<!DOCTYPE html
>

<html><head> 
    <title>PROV-DM: The PROV Data Model</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
    <!-- 
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     -->
<!-- PM -->
    <style type="text/css">
      .note { font-size:small; margin-left:50px }
     </style>

    <script src="http://dev.w3.org/2009/dap/ReSpec.js/js/respec.js" class="remove"></script> 
    <script src="http://www.w3.org/2007/OWL/toggles.js" class="remove"></script> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" class="remove"></script>

    <script src="../glossary.js" class="remove"></script>

    <script class="remove">
      function updateGlossaryRefs() {
        $('.glossary-ref').each(function(index) {
          var ref=$(this).attr('data-ref');
          var span=$(this).attr('data-withspan')
          $(this).removeAttr('data-withspan');
          $(this).removeAttr('data-ref');

          $('#'+ref+'.glossary').contents().clone().appendTo($(this));
//          $(this).attr("prov:hadOriginalSource",glossary_hg);
          if (span) {
            $(this).children('dfn').replaceWith(function(){return $('<span>').addClass('dfn').append($(this).contents())});
          }
        });
      }
      $(document).ready(function(){
        // if glossary is in a string:
        $('#glossary_div').html(glossary_string)
        updateGlossaryRefs();
      });

    </script>

    <script class="remove"> 
      var addExtraReferences = function() {
          for (var k in extraReferences)
              berjon.biblio[k] = extraReferences[k];
      };
      var extraReferences = {
        "CLOCK":
         "Lamport, L. "+
         "<a href=\"http://research.microsoft.com/users/lamport/pubs/time-clocks.pdf\"><cite>Time, clocks, and the ordering of events in a distributed system</cite></a>."+
         "Communications of the ACM 21 (7): 558â€“565. 1978. "+
         "URL: <a href=\"http://research.microsoft.com/users/lamport/pubs/time-clocks.pdf\">http://research.microsoft.com/users/lamport/pubs/time-clocks.pdf</a> " +
         "DOI: doi:10.1145/359545.359563.",
        "CSP":
         "Hoare, C. A. R. "+
         "<a href=\"http://www.usingcsp.com/cspbook.pdf\"><cite>Communicating Sequential Processes</cite></a>."+
         "Prentice-Hall. 1985"+
         "URL: <a href=\"http://www.usingcsp.com/cspbook.pdf\">http://www.usingcsp.com/cspbook.pdf</a>",
        "Logic":
          "W. E. Johnson"+
          "<a href=\"http://www.ditext.com/johnson/intro-3.html\"><cite>Logic: Part III</cite></a>."+
          "1924. "+
          "URL: <a href=\"http://www.ditext.com/johnson/intro-3.html\">http://www.ditext.com/johnson/intro-3.html</a>",
        "PROV-SEM":
          "James Cheney "+
          "<a href=\"http://www.w3.org/2011/prov/wiki/FormalSemanticsStrawman\"><cite>Formal Semantics Strawman</cite></a>. "+
          "2011, Work in progress. "+
          "URL: <a href=\"http://www.w3.org/2011/prov/wiki/FormalSemanticsStrawman\">http://www.w3.org/2011/prov/wiki/FormalSemanticsStrawman</a>",

        "PROV-PRIMER":
          "Yolanda Gil and Simon Miles (eds.) Khalid Belhajjame, Helena Deus, Daniel Garijo, Graham Klyne, Paolo Missier, Stian Soiland-Reyes, and Stephan Zednik "+
          "<a href=\"http://www.w3.org/TR/prov-primer/\"><cite>Prov Model Primer</cite></a>. "+
          "2011, Working Draft. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-primer/\">http://www.w3.org/TR/prov-primer/</a>",

        "PROV-O":
          "Satya Sahoo and Deborah McGuinness (eds.) Khalid Belhajjame, James Cheney, Daniel Garijo, Timothy Lebo, Stian Soiland-Reyes, and Stephan Zednik "+
          "<a href=\"http://www.w3.org/TR/prov-o/\"><cite>Provenance Formal Model</cite></a>. "+
          "2011, Working Draft. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-o/\">http://www.w3.org/TR/prov-o/</a>",


        "PROV-CONSTRAINTS":
          "James Cheney, Paolo Missier, and Luc Moreau (eds.) "+
          "<a href=\"http://www.w3.org/TR/prov-constraints/\"><cite>Constraints of the PROV Data Model</cite></a>. "+
          "2011, Working Draft. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-constraints/\">http://www.w3.org/TR/prov-constraints/</a>",

        "PROV-N":
          "Luc Moreau and Paolo Missier (eds.)"+
          "<a href=\"http://www.w3.org/TR/prov-n/\"><cite>PROV-N: The Provenance Notation</cite></a>. "+
          "2011, Working Draft. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-n/\">http://www.w3.org/TR/prov-n/</a>",

        "PROV-AQ":
          "Graham Klyne and Paul Groth (eds.) Luc Moreau, Olaf Hartig, Yogesh Simmhan, James Meyers, Timothy Lebo, Khalid Belhajjame, and Simon Miles "+
          "<a href=\"http://www.w3.org/TR/prov-aq/\"><cite>Provenance Access and Query</cite></a>. "+
          "2011, Working Draft. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-aq/\">http://www.w3.org/TR/prov-aq/</a>",
      };
      var respecConfig = {
          // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
          specStatus:           "ED",
          
          // the specification's short name, as in http://www.w3.org/TR/short-name/
          shortName:            "prov-dm",
 
          // if your specification has a subtitle that goes below the main
          // formal title, define it here
      subtitle   :  "TEXT NOW MERGED in EDITOR'S DRAFT",

 
          // if you wish the publication date to be other than today, set this
//          publishDate:  "2012-05-03",
 
          // if the specification's copyright date is a range of years, specify
          // the start date here:
          copyrightStart: "2011",
 
          // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
          // and its maturity status
          previousPublishDate:  "2012-05-03",
          previousMaturity:  "WD",
 
          // if there a publicly available Editor's Draft, this is the link
          edDraftURI:           "http://dvcs.w3.org/hg/prov/raw-file/default/model/prov-dm.html",
 
          // if this is a LCWD, uncomment and set the end of its review period
          // lcEnd: "2009-08-05",
 
          // if you want to have extra CSS, append them to this list
          // it is recommended that the respec.css stylesheet be kept
          extraCSS:             ["http://dev.w3.org/2009/dap/ReSpec.js/css/respec.css", "../extra-dm.css"],
 
          // editors, add as many as you like
          // only "name" is required
          editors:  [
              { name: "Luc Moreau", url: "http://www.ecs.soton.ac.uk/~lavm/",
                company: "University of Southampton" },
              { name: "Paolo Missier", url: "http://www.cs.ncl.ac.uk/people/Paolo.Missier",
                company: "Newcastle University" },
          ],
 
          // authors, add as many as you like. 
          // This is optional, uncomment if you have authors as well as editors.
          // only "name" is required. Same format as editors.
 
          authors:  [
              { name: "Khalid Belhajjame", url: "http://semanticweb.org/wiki/Khalid_Belhajjame",
                company: "University of Manchester" },
              { name: "Reza B'Far",
                company: "Oracle Corporation" },
              { name: "Stephen Cresswell",
                company: "legislation.gov.uk"},
              { name: "Yolanda Gil",
                company: "Invited Expert", url:"http://www.isi.edu/~gil/"},
              { name: "Paul Groth", url: "http://www.few.vu.nl/~pgroth/",
                company: "VU University of Amsterdam" },
              { name: "Graham Klyne",
                company: "University of Oxford" },
              { name: "Jim McCusker", url: "http://tw.rpi.edu/web/person/JamesMcCusker",
                company: "Rensselaer Polytechnic Institute" },
              { name: "Simon Miles", 
                company: "Invited Expert", url:"http://www.inf.kcl.ac.uk/staff/simonm/" },
              { name: "James Myers", url:"http://www.rpi.edu/research/ccni/",
                company: "Rensselaer Polytechnic Institute"},
              { name: "Satya Sahoo", url:"http://cci.case.edu/cci/index.php/Satya_Sahoo",
                company: "Case Western Reserve University" },
              { name: "Curt Tilmes", 
                company: "National Aeronautics and Space Administration" },
          ],
          
          // name of the WG
          wg:           "Provenance Working Group",
          
          // URI of the public WG page
          wgURI:        "http://www.w3.org/2011/prov/",
          
          // name (with the @w3c.org) of the public mailing to which comments are due
          wgPublicList: "public-prov-wg",
          
          // URI of the patent status for this WG, for Rec-track documents
          // !!!! IMPORTANT !!!!
          // This is important for Rec-track documents, do not copy a patent URI from a random
          // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
          // Team Contact.
          wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/46974/status",

          // Add extraReferences to bibliography database
          preProcess: [addExtraReferences],
      };
    </script> 
  </head> 
  <body> 

    <section id="abstract">
<p>
PROV-DM, the PROV data model, is a data model for provenance that describes
the entities, people and activities involved in
producing a piece of data or thing. 
PROV-DM is structured in six components, dealing with: 
(1) entities and activities, and the time at which they were created, used, or ended;
(2) agents bearing responsibility for entities that were generated and activities that happened;
(3) derivations of entities from entities;
(4) properties to link entities that refer to the same thing;
(5) collections forming a logical structure for its members;
(6) a simple annotation mechanism.
</p>

<p>This document introduces the provenance concepts found in
PROV and defines PROV-DM types and
relations. PROV data model is domain-agnostic, but is equipped with
extensibility points allowing domain-specific information to be included. </p>

<p>Two further documents complete the specification of PROV-DM.
First, a companion document specifies the set of constraints that
provenance descriptions should follow.  Second, 
a separate document describes a provenance notation for expressing 
instances of provenance for human consumption; this notation is used in examples in
this document. </p>

    </section> 

<section id="sotd">
<h4>PROV Family of Specifications</h4>
This document is part of the PROV family of specifications, a set of specifications defining various aspects that are necessary to achieve the vision of inter-operable
interchange of provenance information in heterogeneous environments such as the Web.  The specifications are:
<ul>
<li> PROV-DM, the PROV data model for provenance (this document);</li>
<li> PROV-CONSTRAINTS, a set of constraints applying to the PROV data model;</li>
<li> PROV-N, a notation for provenance aimed at human consumption;</li>
<li> PROV-O, the PROV ontology, an OWL-RL ontology allowing the mapping of PROV to RDF;</li>
<li> PROV-AQ, the mechanisms for accessing and querying provenance; </li>
<li> PROV-PRIMER, a primer for the PROV data model;</li>
<li> PROV-SEM, a formal semantics for the PROV data model;</li>
<li> PROV-XML, an XML schema for the PROV data model.</li>
</ul>
<h4>How to read the PROV Family of Specifications</h4>
<ul>
<li>The primer is the entry point to PROV offering an introduction to the provenance model.</li>
<li>The Linked Data and Semantic Web community should focus on PROV-O defining PROV classes and properties specified in an OWL-RL ontology. For further details, PROV-DM and PROV-CONSTRAINTS specify the constraints applicable to the data model, and its interpretation. PROV-SEM provides a mathematical semantics.</li>
<li>The XML community should focus on PROV-XML defining an XML schema for PROV. Further details can also be found in PROV-DM, PROV-CONSTRAINTS, and PROV-SEM.</li>
<li>Developers seeking to retrieve or publish provenance should focus on PROV-AQ.</li>
<li>Readers seeking to implement other PROV serializations
should focus on PROV-DM and PROV-CONSTRAINTS.  PROV-O, PROV-N, PROV-XML offer examples of mapping to RDF, text, and XML, respectively.</li>
</ul>


<h4>Fourth Public Working Draft</h4>
<p>This is the fourth public release of the PROV-DM document. Following feedback, the Working Group has decided to reorganize this document substantially, separating the data model from its contraints and the notation used to illustrate it. The PROV-DM release is synchronized with the release of the PROV-O, PROV-PRIMER, PROV-N, and PROV-CONSTRAINTS documents. We are now clarifying the entry path to the PROV family of specifications.</p>
</section>




<!-- <div class="buttonpanel"> 
<form action="#"><p> 
<input id="hide-asn" onclick="set_display_by_class('div','withAsn','none');set_display_by_class('span','withAsn','none'); set_display_by_id('hide-asn','none'); set_display_by_id('show-asn','');" type="button"
value="Hide ASN" /> 
<input id="show-asn" onclick="set_display_by_class('div','withAsn',''); set_display_by_class('span','withAsn','');  set_display_by_id('hide-asn',''); set_display_by_id('show-asn','none');" style="display: none"
type="button" value="Show ASN" /> 
</p> 
</form> 
</div>     
-->





    <section id="introduction"> 
      <h2>Introduction<br>
</h2> 


<div style="color: red;     font-size: 150%; ">
Summary of proposed changes:
<ul>
<li> Drop the term 'account' from prov-dm.
<li> Instead, introduce the notion of bundle, as defined here.
<li> Drop the component on annotation.
<li> Introduce a component on bundles, as described here.
</ul>
</div>
</section> 



<section id='starting-points'> 
<h1>PROV Starting Points</h1>

<section > 
<h3>...</h3>
</section>
<section > 
<h3>...</h3>
</section>
<section > 
<h3>...</h3>
</section>

<section id="section-provenance-of-provnance"> 
<h2>Provenance of Provenance</h2>




<p>
<span class="glossary-ref" data-ref="glossary-bundle"  data-withspan="true">
</span>

<div class="conceptexample" id="bundle-example">
<p>
For users to decide whether they can place their trust in
a resource, they may want to analyze the resource's provenance, but also determine
who its provenance is attributed to, and when it was
generated. In other words, users need to be able to determine the provenance of provenance.
Hence, provenance is also
regarded as an entity (of type Bundle), by which provenance of provenance can then be
expressed.
</p>
</div>
</section>

<section id="section-collections"> 
<h2>Collections</h2>

<p>
<span class="glossary-ref" data-ref="glossary-collection"  data-withspan="true"></span> This concept allows for the provenance of the collection itself to be expressed in addition to that of the members.  Many different types of collections exist, such as a <em>set</em>, <em>dictionaries</em>, or <em>lists</em>, all of which involve a membership relationship between the constituents and the collection. </p>

<div class="conceptexample" id="collection-example">
<p>
An example of collection is an archive of documents. Each document has its own provenance, but the archive itself also has some provenance: who maintained it, which documents it contained at which point in time, how it was assembled, etc. 
</div>


</section>


</section>


<section id="prov-dm-example"> 
<h2>Illustration of PROV-DM by an Example</h2>

<section id="section-example-a"> 
<h3>...</h3>
</section>

<section id="section-example-b"> 
<h3>...</h3>
</section>

<section id="section-example-c"> 
<h3>Attribution of Provenance</h3>

<p>The two previous sections  offer two different perspectives on the provenance of a document.  PROV allows for multiple sources to provide the provenance of a subject. For users to decide whether they can place their trust in the document, they may want to analyze its provenance, but also determine who the provenance is attributed to, and when it was
generated, etc. In other words, we need to be able to express the provenance of provenance.</p>

<p>PROV-DM offers a construct to name a bundle of provenance descriptions. </p>

<pre class="codeexample">
bundle ex:author-view

  agent(ex:Paolo,   [ prov:type='prov:Person' ])
  agent(ex:Simon,   [ prov:type='prov:Person' ])


...

endBundle
</pre>

Likewise, the process view can be expressed as a separate named bundle.
<pre class="codeexample">
bundle ex:process-view

   agent(w3:Consortium, [ prov:type='prov:Organization' ])

...

endBundle
</pre>

<p>To express their respective provenance, these bundles must be seen as entities, and all PROV constructs are now available to express their provenance. In the example below, <span class="name">ex:author-view</span> is attributed to the agent  <span class="name">ex:Simon</span>, whereas <span class="name">ex:process-view</span> to  <span class="name">w3:Consortium</span>.

<pre class="codeexample">
entity(ex:author-view, [prov:type='prov:Bundle' ])
wasAttributedTo(ex:author-view, ex:Simon)

entity(ex:process-view, [prov:type='prov:Bundle' ])
wasAttributedTo(ex:process-view, w3:Consortium)
</pre>

<div class="note">
<p>TODO: full details of bundles can be found at  <a href="examples/w3c-publication1.pn">ex:process-view</a> and <a href="examples/w3c-publication3.pn">ex:author-view</a>.</p>
</div>


</section>

</section>

</section>

<section id="data-model-components"> 

<h2>PROV-DM Types and Relations</h2>

<section id="component1"> 
<h3>Component 1: Entities and Activities</h3>
</section>

<section id="component2"> 
<h3>Component 2: Agents and Responsibility</h3>
</section>

<section id="component3"> 
<h3>Component 3: Derivations</h3>
</section>

<section id="component4"> 
<h3>Component 4: Alternate Entities</h3>
</section>

<section id="component5"> 
<h3>Component 5: Collections</h3>
</section>

<section id="component6"> 
<h3>Component 6: Bundles</h3>








<section id="term-bundle"> 

<h3>Bundle Declaration</h3>


<p>
<span class="glossary-ref" data-ref="glossary-bundle" >
</span>
 </p>




<p>
<div class="attributes" id="attributes-bundle">
 A <dfn title="dfn-bundle" id="dfn-bundle-declaration">bundle declaration</dfn>, written <span class="pnExpression">bundle id description_1 ... description_n endBundle</span>, consists of:
<ul>
<li><span class='attribute' id="bundle.declaration.id">id</span>:  an identifier for the bundle;</li>
<li><span class='attribute' id="bundle.declaration.descriptions">descriptions</span>: a set of provenance descriptions <span class="name">
description_1</span>, ..., <span class="name">description_n</span>.</li>
</ul>
<p>A bundle's identifier <span class="name">id</span> identifies a unique set of descriptions.</p>
</section>





<section id="term-bundle-entity"> 

<h3>Bundle Description</h3>

<p>As a named bundle is a set of descriptions, it is also an entity so that its provenance can be described.  </p>

PROV defines the following type for bundles:
<ul>
<li><span class="name">prov:Bundle</span> is the type that denotes <a title="bundle">bundles</a>.
</ul>


<p>
A  bundle description is of the form <span class="pnExpression">entity(id,[prov:type='prov:Bundle', attr1=val1, ...])</span>
where <span class='name'>id</span> is  an identifier denoting a bundle,
 a type <span>prov:Bundle</span> and
an OPTIONAL set of attribute-value  pairs ((<span class="name">attr1</span>, <span class="name">val1</span>), ...) representing additional information about this bundle.
</p>


<p>The provenance of provenance can then be described using PROV constructs, as illustrated by the following example. </p>

<div class="anexample" id="anexample-provenance-of-provenance">
<p>Let us consider an example consisting of two entities <span class="name">ex:report1</span> and <span class="name">ex:report2</span>.</p>
<pre class="codeexample"> 
entity(ex:report1, [ prov:type="report", ex:version=1 ])
wasGeneratedBy(ex:report1, -, 2012-05-24T10:00:01)
entity(ex:report2, [ prov:type="report", ex:version=2])
wasGeneratedBy(ex:report2, -, 2012-05-25T11:00:01)
wasDerivedFrom(ex:report2, ex:report1)
</pre>

<p>Let us assume that Bob observed the creation of <span class="name">ex:report1</span>.
A first bundle can be expressed.</p>
<pre class="codeexample"> 
bundle bob:bundle1
  entity(ex:report1, [ prov:type="report", ex:version=1 ])
  wasGeneratedBy(ex:report1, -, 2012-05-24T10:00:01)
endBundle
</pre>

<p>In contrast,
Alice observed the creation of <span class="name">ex:report2</span> and its derivation from <span class="name">ex:report1</span>.
A separate bundle can also be expressed.</p>
<pre class="codeexample"> 
bundle alice:bundle2
  entity(ex:report1)
  entity(ex:report2, [ prov:type="report", ex:version=2 ])
  wasGeneratedBy(ex:report2, -, 2012-05-25T11:00:01)
  wasDerivedFrom(ex:report2, ex:report1)
endBundle
</pre>

<p>The first bundle contains the descriptions corresponding to  Bob observing the creation of <span class="name">ex:report1</span>. Its provenance can be described as follows.</p>
<pre class="codeexample"> 
entity(bob:bundle1, [prov:type='prov:Bundle'])
wasGeneratedBy(bob:bundle1, -, 2012-05-24T10:30:00)
wasAttributedTo(bob:bundle1, ex:Bob)
</pre>

<p>In contrast, the second bundle is attributed to Alice who
observed the derivation of <span class="name">ex:report2</span> from <span class="name">ex:report1</span>.</p>
<pre class="codeexample"> 
entity(alice:bundle2, [ prov:type='prov:Bundle' ])
wasGeneratedBy(alice:bundle2, -, 2012-05-25T11:15:00)
wasAttributedTo(alice:bundle2, ex:Alice)
</pre>
</div>

<div class="anexample" id="anexample-provenance-aggregation">
<p>A provenance aggregator could merge two bundles, resulting in a novel bundle, whose provenance is described as follows.</p>
<pre class="codeexample"> 
bundle uuid:03
  entity(ex:report1, [ prov:type="report", ex:version=1 ])
  wasGeneratedBy(ex:report1, -, 2012-05-24T10:00:01)

  entity(ex:report2, [ prov:type="report", ex:version=2 ])
  wasGeneratedBy(ex:report2, -, 2012-05-25T11:00:01)
  wasDerivedFrom(ex:report2, ex:report1)
endBundle

entity(agg:bundle3, [ prov:type='prov:Bundle' ])
agent(ex:aggregator01, [ prov:type='ex:Aggregator' ])
wasAttributedTo(agg:bundle3, ex:aggregator01)
wasDerivedFrom(agg:bundle3, bob:bundle1)
wasDerivedFrom(agg:bundle3, alice:bundle2)
</pre>
<p>The new bundle is given a new identifier <span class="name">agg:bundle3</span> and is attributed to the <span class="name">ex:aggregator01</span> agent.
</div>


</section>

<section id="term-hasProvenanceIn"> 

<h3>Provenance Locator</h3>


In <a href="#anexample-provenance-of-provenance">Example anexample-provenance-of-provenance</a>, we initially presented a scenario involving two entities <span class="name">report1</span> and <span class="name">report2</span>, and showed how the descriptions can be organized into two bundles.  There is no explicit indication that the second bundle "continues" the description offered by the first bundle.  Given that bundles may be retrieved separately [[PROV-AQ]], it is not obvious for a provenance consumer to navigate descriptions across bundles.  To aid consumers,
 Alice may wish to express that there is further provenance information about <span class="name">report1</span> in bundle <span class="name">bob:bundle1</span>.  To this end, PROV introduces the notion of provenance locator, inspired by [[PROV-AQ]].


<p><div class="glossary-ref" data-ref="glossary-provenance-locator"></div></p>


<div class="attributes" id="attributes-hasProvenanceIn">
A <dfn title="hasProvenanceIn">provenance locator</dfn>,
written
<span class="pnExpression">hasProvenanceIn(id, subject, bundle, target, service, prov, attrs)</span>, has:
<ul>
<li><span class='attribute' id="prov.localtor.id">id</span>: an identifier for a provenance locator; </li>
<li><span class='attribute' id="prov.locator.subject">subject</span>:  an identifier denoting something (entity, activity, agent, or relatation instance);</li>
<li><span class='attribute' id="prov.locator.bundle">bundle</span>:  an OPTIONAL identifier (<span class="name">bundle</span>) for a bundle;
<li><span class='attribute' id="prov.locator.target">target</span>:  an OPTIONAL identifier (<span class="name">target</span>) denoting  something described in another set of descriptions (referred to as <a href="http://www.w3.org/TR/prov-aq/#dfn-target-uri">Target-URI</a> in [[PROV-AQ]]);
<li><span class='attribute' id="prov.locator.service">service</span>:  an OPTIONAL URI (<span class="name">service</span>) denoting a <a href="http://www.w3.org/TR/prov-aq/#dfn-provenance-service">provenance service</a> from which provenance can be retrieved (referred to as <a href="http://www.w3.org/TR/prov-aq/#dfn-service-uri">Service-URI</a> in [[PROV-AQ]]);
<li><span class='attribute' id="prov.locator.provenance">provenance</span>:  an OPTIONAL URI (<span class="name">prov</span>), which when dereferenced, allows access to provenance descriptions (referred to as <a href="http://www.w3.org/TR/prov-aq/#dfn-provenance-uri">Provenance-URI</a> in [[PROV-AQ]]);
<li><span class='attribute' id="prov.locator.attributes">attributes</span>: an OPTIONAL set (<span class="name">attrs</span>) of attribute-value pairs representing additional information about this locator.</li>
</ul>
<p>In <span class="pnExpression">hasProvenanceIn(id, subject, bundle, target, service, prov, attrs)</span>, <span class="name">service</span> and <span class="name">prov</span> are both optional and mutually exclusive: if specified, either <span class="name">service</span> or <span class="name">prov</span> is provided.</p>
</div>

<p>A provenance locator specifies a context, referred to
as <em>located context</em> in which further descriptions can be found
about something.</p>

<p>When the subject and optional target denote entities,
a provenance locator not only provides a located context, but it also expresses an <a>alternate</a> relation between the entity denoted by <span class="name">subject</span> and the  entity described in the located context. This is a alternate since the entity denoted by <span class="name">subject</span> in the current context presents other aspects than the entity in the located one.</p>

<div class="anexample" id="anexample-provenance-locator">
<p>According to the following provenance locator, provenance descriptions about <span class="name">ex:report1</span> can be found in bundle <span class="name">bob:bundle1</span>.</p>
<pre class="codeexample"> 
hasProvenanceIn(ex:report1, bob:bundle1, -, -, -)
</pre>
<p>According to the following provenance locator, provenance descriptions about <span class="name">ex:report1</span> can be found in bundle <span class="name">bob:bundle1</span>, which is available from the provenance service identified by the provided URI.</p>
<pre class="codeexample"> 
hasProvenanceIn(ex:report1, bob:bundle1, -, "http://example.com/service"^xsd:anyURI, -)
</pre>
<p>According to the following provenance locator, provenance descriptions about <span class="name">ex:report1</span> can be found in resource identified by the provided URI.</p>
<pre class="codeexample"> 
hasProvenanceIn(ex:report1, -, -, -, "http://example.com/some-provenance.pn"^xsd:anyURI)
</pre>
</div>


<div class="anexample" id="anexample-provenance-locator2">
<p>Let us again consider the same scenario involving two entities <span class="name">ex:report1</span> and <span class="name">ex:report2</span>.</p>
<p>The first bundle can be expressed with all Bob's observations about the creation of <span class="name">ex:report1</span>.
</p>
<pre class="codeexample"> 
bundle bob:bundle4
  entity(ex:report1, [ prov:type="report", ex:version=1 ])
  wasGeneratedBy(ex:report1, -, 2012-05-24T10:00:01)
endBundle
</pre>

<p>Likewise, Alice's observation about the derivation of  <span class="name">ex:report2</span>  from <span class="name">ex:report1</span>, is expressed in a separate bundle.</p>
<pre class="codeexample"> 
bundle alice:bundle5
  entity(ex:report1)
  hasProvenanceIn(ex:report1, bob:bundle4, -, -, -)
  entity(ex:report2, [ prov:type="report", ex:version=2 ])
  wasGeneratedBy(ex:report2, -, 2012-05-25T11:00:01)
  wasDerivedFrom(ex:report2, ex:report1)
endBundle
</pre>
<p>In bundle <span class="name">alice:bundle5</span>, there is a description for entity <span class="name">ex:report1</span>, and 
a provenance locator pointing to bundle <span class="name">bob:bundle4</span>.  
The locator indicates that some provenance description for <span class="name">ex:report1</span> can be found in bundle <span class="name">bob:bundle4</span>. The purpose of the locator is twofold. First, it allows for <a href="http://www.w3.org/TR/prov-aq/#incremental-provenance-retrieval">incremental navigation</a> of provenance [[PROV-AQ]].  Second, it makes entity <span class="name">ex:report1</span> described in <span class="name">alice:bundle5</span> an <a>alternate</a> of <span class="name">ex:report1</span> described in <span class="name">bob:bundle4</span>.
</p>
</div>


<div class="anexample" id="anexample-provenance-locator3">
<p>Alternatively, Alice may have decided to use a different identifier for <span class="name">ex:report1</span>.</p>
<pre class="codeexample"> 
bundle alice:bundle6
  entity(alice:report1)
  hasProvenanceIn(alice:report1, bob:bundle4, ex:report1, -, -)
  entity(ex:report2, [ prov:type="report", ex:version=2 ])
  wasGeneratedBy(ex:report2, -, 2012-05-25T11:00:01)
  wasDerivedFrom(ex:report2, alice:report1)
endBundle
</pre>
<p>Alice can specify the <a href="#prov.locator.target">target</a> in the provenance locator to be  <span class="name">ex:report1</span>.
With such a statement, Alice states that provenance information about <span class="name">alice:report1</span> can be found in bundle
<span class="name">bob:bundle4</span> under the name <span class="name">ex:report1</span>.  In effect, <span class="name">alice:report1</span> and <span class="name">ex:report1</span> are declared to be alternate.</p>
</div>

<div class="anexample" id="aexample-note">
<p>Consider that the following bundle of descriptions, in which derivation and generations have been identified.
<pre class="codeexample"> 
bundle obs:bundle7
  entity(ex:report1, [prov:type="report", ex:version=1])
  wasGeneratedBy(ex:g1; ex:report1,-,2012-05-24T10:00:01)
  entity(ex:report2, [prov:type="report", ex:version=2])
  wasGeneratedBy(ex:g2; ex:report2,-,2012-05-25T11:00:01)
  wasDerivedFrom(ex:d; ex:report2, ex:report1)
endBundle
entity(obs:bundle7, [ prov:type='prov:Bundle' ])
wasAttributedTo(obs:bundle7, ex:observer01)
</pre>
Bundle <span class="name">obs:bundle7</span> is rendered by a visualisation tool.  It may useful for the tool configuration for this bundle to be shared along with the provenance descriptions, so that other users can render provenance as it was originally rendered.  The original  bundle obviously cannot be changed. However, one can create a new bundle, as follows.
<pre class="codeexample"> 
bundle tool:bundle8
  entity(tool:bundle8, [ prov:type='viz:Configuration', prov:type='prov:Bundle' ])
  wasAttributedTo(tool:bundle8, viz:Visualizer)

  entity(ex:report1, [viz:color="orange"])
  hasProvenanceIn(ex:report1, obs:bundle7, -, -, -)

  entity(ex:report2, [viz:color="blue"])
  hasProvenanceIn(ex:report2, obs:bundle7, -, -, -)

  wasDerivedBy(ex:d; ex:report2, ex:report1, [viz:style="dotted"])
  hasProvenanceIn(ex:d, obs:bundle7, -, -, -)
endBundle
</pre>

<p>In bundle <span class="name">tool:bundle8</span>, the prefix <span class="name">viz</span> is used for naming visualisation-specific attributes, types or values.</p>

<p>Bundle <span class="name">tool:bundle8</span> is given type <span class="name">viz:Configuration</span> to indicate that it consists of descriptions that pertain to the configuration of the visualisation tool. This type attribute can be used for searching bundles containing visualization-related descriptions.
</p>

<p>Alternates of the entities <span class="name">ex:report1</span> and <span class="name">ex:report2</span> have a visualization attribute for the color to be used when rendering these entities. 
Likewise, the derivation has a style attribute. To be able to express this alternate of the derivation, it is necessary for it to have an identifier in the first place (<span class="name">ex:d</span>).</p>
</div>

</section>
</div>
</section> 
</section> 




<section id="valid-provenance">
<h4>Creating Valid Provenance</h4>


<ul>

<li>


<li>

<li> 
<p>The idea of bundling provenance descriptions is crucial to the PROV approach. Indeed, it allows multiple provenance perspectives to be provided for a given entity. It is also the mechanism by which provenance of provenance can be expressed.
Descriptions in bundles are expected to satisfy constraints specified in the companion specification [[PROV-CONSTRAINTS]].</p>
</li>


</ul>


</section>

<div id="glossary_div" class="remove">
<!-- glossary loaded from glossary.js will be hooked up here,
     class remove, will remove this element from the final output.
-->
</div>

<section class="appendix"> 
      <h2>Acknowledgements</h2> 
      <p> 
        WG membership to be listed here.
      </p> 
    </section> 

 </body>
</html>
