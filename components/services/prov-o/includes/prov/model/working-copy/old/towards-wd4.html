<!DOCTYPE html>

<html><head> 
    <title>PROV-DM Part 1: The Provenance Data Model</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
    <!-- 
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     -->
<!-- PM -->
    <style type="text/css">
      .note { font-size:small; margin-left:50px }
     </style>

    <script src="http://dev.w3.org/2009/dap/ReSpec.js/js/respec.js" class="remove"></script> 
    <script src="http://www.w3.org/2007/OWL/toggles.js" class="remove"></script> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" class="remove"></script>

    <script src="glossary.js" class="remove"></script>

    <script class="remove">
      function updateGlossaryRefs() {
        $('.glossary-ref').each(function(index) {
          var ref=$(this).attr('ref');
          var span=$(this).attr('withspan')
          $('#'+ref+'.glossary').contents().clone().appendTo($(this));
          $(this).attr('prov:hadOriginalSource',glossary_hg);
          if (span) {
            $(this).children('dfn').replaceWith(function(){return $('<span>').addClass('dfn').append($(this).contents())});
          }
        });
      }
      $(document).ready(function(){
        // if glossary is in a string:
        $('#glossary_div').html(glossary_string)
        updateGlossaryRefs();
      });

    </script>

    <script class="remove"> 
      var addExtraReferences = function() {
          for (var k in extraReferences)
              berjon.biblio[k] = extraReferences[k];
      };
      var extraReferences = {
        "CLOCK":
         "Lamport, L. "+
         "<a href=\"http://research.microsoft.com/users/lamport/pubs/time-clocks.pdf\"><cite>Time, clocks, and the ordering of events in a distributed system</cite></a>."+
         "Communications of the ACM 21 (7): 558â€“565. 1978. "+
         "URL: <a href=\"http://research.microsoft.com/users/lamport/pubs/time-clocks.pdf\">http://research.microsoft.com/users/lamport/pubs/time-clocks.pdf</a> " +
         "DOI: doi:10.1145/359545.359563.",
        "CSP":
         "Hoare, C. A. R. "+
         "<a href=\"http://www.usingcsp.com/cspbook.pdf\"><cite>Communicating Sequential Processes</cite></a>."+
         "Prentice-Hall. 1985"+
         "URL: <a href=\"http://www.usingcsp.com/cspbook.pdf\">http://www.usingcsp.com/cspbook.pdf</a>",
        "Logic":
          "W. E. Johnson"+
          "<a href=\"http://www.ditext.com/johnson/intro-3.html\"><cite>Logic: Part III</cite></a>."+
          "1924. "+
          "URL: <a href=\"http://www.ditext.com/johnson/intro-3.html\">http://www.ditext.com/johnson/intro-3.html</a>",
        "PROV-SEM":
          "James Cheney "+
          "<a href=\"http://www.w3.org/2011/prov/wiki/FormalSemanticsStrawman\"><cite>Formal Semantics Strawman</cite></a>. "+
          "2011, Work in progress. "+
          "URL: <a href=\"http://www.w3.org/2011/prov/wiki/FormalSemanticsStrawman\">http://www.w3.org/2011/prov/wiki/FormalSemanticsStrawman</a>",

        "PROV-PRIMER":
          "Yolanda Gil and Simon Miles (eds.) Khalid Belhajjame, Helena Deus, Daniel Garijo, Graham Klyne, Paolo Missier, Stian Soiland-Reyes, and Stephan Zednik "+
          "<a href=\"http://www.w3.org/TR/prov-primer/\"><cite>Prov Model Primer</cite></a>. "+
          "2011, Working Draft. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-primer/\">http://www.w3.org/TR/prov-primer/</a>",

        "PROV-O":
          "Satya Sahoo and Deborah McGuinness (eds.) Khalid Belhajjame, James Cheney, Daniel Garijo, Timothy Lebo, Stian Soiland-Reyes, and Stephan Zednik "+
          "<a href=\"http://www.w3.org/TR/prov-o/\"><cite>Provenance Formal Model</cite></a>. "+
          "2011, Working Draft. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-o/\">http://www.w3.org/TR/prov-o/</a>",


        "PROV-DM":
          "Luc Moreau and Paolo Missier (eds.) ... "+
          "<a href=\"http://www.w3.org/TR/prov-dm/\"><cite>PART 1: PROV-DM ...</cite></a>. "+
          "2011, Working Draft. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-dm/\">http://www.w3.org/TR/prov-dm/</a>",


        "PROV-DM-CONSTRAINTS":
          "Luc Moreau and Paolo Missier (eds.) ... "+
          "<a href=\"http://www.w3.org/TR/prov-dm-constraints/\"><cite>PROV-DM Constraints</cite></a>. "+
          "2011, Working Draft. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-dm-constraints/\">http://www.w3.org/TR/prov-dm-constraints/</a>",

        "PROV-ASN":
          "Luc Moreau and Paolo Missier (eds.) ... "+
          "<a href=\"http://www.w3.org/TR/prov-asn/\"><cite>PROV-ASN ....</cite></a>. "+
          "2011, Working Draft. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-asn/\">http://www.w3.org/TR/prov-asn/</a>",

        "PROV-AQ":
          "Graham Klyne and Paul Groth (eds.) Luc Moreau, Olaf Hartig, Yogesh Simmhan, James Meyers, Timothy Lebo, Khalid Belhajjame, and Simon Miles "+
          "<a href=\"http://www.w3.org/TR/prov-aq/\"><cite>Provenance Access and Query</cite></a>. "+
          "2011, Working Draft. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-aq/\">http://www.w3.org/TR/prov-aq/</a>",
      };
      var respecConfig = {
          // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
          specStatus:           "ED",
          
          // the specification's short name, as in http://www.w3.org/TR/short-name/
          shortName:            "prov-dm",
 
          // if your specification has a subtitle that goes below the main
          // formal title, define it here
          //subtitle   :  "Some speculative write-ups, for discussion before integration in the data model",
 
          // if you wish the publication date to be other than today, set this
          // publishDate:  "2011-10-18",
 
          // if the specification's copyright date is a range of years, specify
          // the start date here:
          // copyrightStart: "2005"
 
          // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
          // and its maturity status
          //previousPublishDate:  "2011-12-15",
          //previousMaturity:  "WD",
 
          // if there a publicly available Editor's Draft, this is the link
          edDraftURI:           "http://dvcs.w3.org/hg/prov/raw-file/default/model/working-copy/towards-wd4.html",
 
          // if this is a LCWD, uncomment and set the end of its review period
          // lcEnd: "2009-08-05",
 
          // if you want to have extra CSS, append them to this list
          // it is recommended that the respec.css stylesheet be kept
          extraCSS:             ["http://dev.w3.org/2009/dap/ReSpec.js/css/respec.css", "./extra.css"],
 
          // editors, add as many as you like
          // only "name" is required
          editors:  [
              { name: "Luc Moreau", url: "http://www.ecs.soton.ac.uk/~lavm/",
                company: "University of Southampton" },
              { name: "Paolo Missier", url: "http://www.cs.ncl.ac.uk/people/Paolo.Missier",
                company: "Newcastle University" },
          ],
 
          // authors, add as many as you like. 
          // This is optional, uncomment if you have authors as well as editors.
          // only "name" is required. Same format as editors.
 
          
          // name of the WG
          wg:           "Provenance Working Group",
          
          // URI of the public WG page
          wgURI:        "http://www.w3.org/2011/prov/",
          
          // name (with the @w3c.org) of the public mailing to which comments are due
          wgPublicList: "public-prov-wg",
          
          // URI of the patent status for this WG, for Rec-track documents
          // !!!! IMPORTANT !!!!
          // This is important for Rec-track documents, do not copy a patent URI from a random
          // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
          // Team Contact.
          wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/46974/status",

          // Add extraReferences to bibliography database
          preProcess: [addExtraReferences],
      };
    </script> 
  </head> 
  <body> 

    <section id="abstract">
<p>
<b>Editors' working copy can change at any time. </b>
</p>
    </section> 

<section id="sotd">
<b>Editors' working copy can change at any time. </b>
</section>


<div class="buttonpanel"> 
<form action="#"><p> 
<input id="hide-asn" onclick="set_display_by_class('div','withAsn','none');set_display_by_class('span','withAsn','none'); set_display_by_id('hide-asn','none'); set_display_by_id('show-asn','');" type="button"
value="Hide ASN" /> 
<input id="show-asn" onclick="set_display_by_class('div','withAsn',''); set_display_by_class('span','withAsn','');  set_display_by_id('hide-asn',''); set_display_by_id('show-asn','none');" style="display: none"
type="button" value="Show ASN" /> 
</p> 
</form> 
</div>     




<div class='note' id='changes'>
<p> Following F2F2 guidance, in this document we try to: 
<ul>
<li> pitch from the start the idea of an upgrade path, from 'scruffy provenance' (term TBD), to 'precise provenance' (term TBD)
<li> formulate concepts without referring to things, just in term of entities, the intent is that the semantics only refers to things
<li> introduce concepts minimally, just to be able to express 'scruffy provenance' 
<li> present the data model
<li>present the upgrade path
<li>contemplating the organization of the deliverable in two/three separate documents.</li>
</ul>
</div>



<div class='note' id='editorial-notes'>
<ul>
<li> Term 'record' dropped: we no longer refer to 'entity record', 'activity record', etc but simply to 'entity', 'activity', etc
<li> Aiming to drop the word 'assertion'. This is work in progress.  
<li> Aiming to drop the word 'characterization'.
</ul>
</div>


    <section id="introduction"> 
      <h2>Introduction<br>
</h2> 

<p> 
For the purpose of this specification, <dfn>provenance</dfn> is defined as a record that describes the people,
institutions, entities, and activities, involved in producing,
influencing, or delivering a piece of data or a thing in the world.
In particular, the provenance of information is crucial in deciding
whether information is to be trusted, how it should be integrated with
other diverse information sources, and how to give credit to its
originators when reusing it.  In an open and inclusive environment
such as the Web, where users find information that is often contradictory or
questionable, provenance can help those users to make trust judgements.
</p>


<p>
The idea that a single way of representing and collecting provenance could be adopted internally by all systems does not seem to be realistic today. Instead, a pragmatic approach is to
consider a core data model for provenance that allows  domain and application specific representations of provenance to be translated into such a data model and exchanged between systems.
Heterogeneous systems can then export their provenance into such a core data model, and applications that need to make sense of provenance in heterogeneous systems can then import it,
process it, and reason over it.</p>

<p>Thus, the vision is that different provenance-aware systems natively adopt their own model for representing their provenance, but a core provenance data model can be readily adopted as a
provenance <em>interchange</em> model across such systems.</p>

<p>A set of specifications, referred to as the PROV family of specifications, define the various aspects
that are necessary to achieve this vision in an interoperable
way:</p>
<ul>
<li>A data model for provenance, which is presented in three documents:
<ul>
<li> PROV-DM (part I): the provenance data model itself, expressed in natural language (this document);
<li> PROV-DM-CONSTRAINTS (part II): constraints underpinning the data model [[PROV-DM-CONSTRAINTS]];
<li> PROV-ASN (part III): a notation to express instances of that data model for human consumption [[PROV-ASN]];
</ul> 
</li>

<li>PROV-O: a normative serialization of PROV-DM in RDF [[!PROV-O]], specified by means of a mapping to the OWL2 Web Ontology Language [[!OWL2-SYNTAX]];</li>
<li>PROV-AQ: the mechanisms for accessing and querying provenance [[PROV-AQ]];</li>
<li>PROV-PRIMER: a primer for the PROV approach [[PROV-PRIMER]];</li>
<li>PROV-SEM: semantics of the PROV-DM data model [[PROV-SEM]];</li>
</ul>


<p>
The PROV-DM data model for provenance consists of a set of core
concepts, and a few common relations, based on these core concepts.  PROV-DM is a domain-agnostic model, but with clear extensibility points allowing further domain-specific and
application-specific extensions to be defined.</p>

<p>This specification intentionally presents the key concepts of the PROV Data Model, without drilling down into all its subtleties.  Using these key concepts, it becomes possible to write useful provenance assertions very quickly, and publish or embed them along side the data they relate to. </p>

<p>However, it becomes challenging for provenance, like for any other form of metadata, when the data it is about changes. To address this challenge, an <em>upgrade path</em> is proposed to enrich simple provenance, with extra-descriptions that  help qualify the subject of provenance and provenance itself, with attributes and interval, intended to satisfy a comprehensive set of constraints.  These aspects are covered in the companion specification [[PROV-DM-CONSTRAINTS]].
</p>


    <section id="structure-of-this-document"> 
<h3>Structure of this Document</h3>

<p><a href="#prov-dm-overview">Section 2</a> provides an overview of PROV-DM listing its core types and their relations.</p>

<p>In <a href="#prov-dm-example">section 3</a>, PROV-DM is
applied to a short scenario, encoded in PROV-ASN, and illustrated
graphically.</p>

<p><a href="#data-model-concepts">Section 4</a> provides the definition of PROV-DM.</p>

<p><a href="#common-relations">Section 5</a> introduces further relations offered by PROV-DM, including relations for data collections and domain-independent common relations.</p>

<p><a href="#extensibility-section">Section 6</a> summarizes PROV-DM extensibility points.</p>

<p><a href="#FurtherConsiderations">Section 7</a> introduces constraints that can be applied to the PROV data model 
and that are covered in [[PROV-DM-CONSTRAINTS]].</p>


    </section> 

<section id="prov-dm-namespace">
 <h3>PROV-DM Namespace</h3>


<p>The PROV-DM namespace is <span class="name">http://www.w3.org/ns/prov-dm/</span> (TBC).</p>

<p> All the elements, relations, reserved names and attributes introduced in this specification belong to the PROV-DM namespace.</p>

<div class="issue">
There is a desire to use a single namespace that all specifications of the PROV family can share to refer to common provenance terms. This is <a href="http://www.w3.org/2011/prov/track/issues/224">ISSUE-224</a>.
</div>

</section>


    <section id="conventions"> 
<h3>Conventions</h3>



<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and
      "OPTIONAL" in this document are to be interpreted as described in
      [[!RFC2119]].</p>
    </section> 

</section> 



    <section id='conceptualization'> 
<h1>Overview</h1>

This section provides an overview of the main elements and relations of the PROV data model. 


  
    <section id='section-entity-activity-agent'> 
<h2>Entity, Activity, Agent</h2>


<p>PROV-DM is a data model for describing the provenance of <em>Entities</em>, that is, of things in the world. The term "Things" encompasses a broad diversity of concepts, including digital objects such as a file or web page, 
physical things such as a building or a printed book, or a car as well as abstract concepts and ideas. One can regard any Web resource as an example of Entity in this context. </p>

<p>
<div class="glossary-ref" ref="glossary-entity">
</div>
</p>


<div class="anexample" id="entity-example">
<p>An entity may be the document at URI <a href="http://www.w3.org/TR/prov-dm/">http://www.w3.org/TR/prov-dm/</a>, a file in a file system, a car or an idea.</p>
</div>



<p>
<span class="glossary-ref" ref="glossary-activity"></span> Activities that operate on digital entities may for example move, copy, or duplicate them.
</p>



<div class="anexample" id="activity-example">
<p>An activity may be the publishing of a document on the web, sending a twitter message, extracting metadata embedded in a file, or driving a car from Boston to Cambridge, assembling a data set based on a set of measurements, performing a statistical analysis over a data set, sorting news items according to some criteria, running a SPARQL query over a triple store, and editing a file.</p>
</div>


<p>
<span class="glossary-ref" ref="glossary-agent">
</span>
</p>


<p>The key purpose of agents is to assign responsibility
   for activities. 
The definition of agent intentionally stays away from using concepts such as enabling, causing, initiating, affecting, etc, because many entities also enable, cause, initiate, and affect in some way
the activities.  So the notion of having some degree of responsibility is really what makes an agent.</p>


<p>An agent is a particular type of Entity. This means that the model can be
 used to express provenance of the agents themselves.  </p>

<div class="anexample" id="agent-example">
<p>
Software for checking the use of grammar in a document may be defined as an agent of a document preparation activity, and at the same time one can describe its provenance, including for instance the vendor and the version history.</p>
</div>
</section>



    <section id="section-generation-usage-derivation"> 
<h2>Generation, Usage, Derivation</h2>

<p>Activities and entities are associated with each other in two different ways: activities are consumers of entities and activities are producers of entities.  For the purpose of provenance, we define the following notions of generation and usage. </p>

<p>
<div class="glossary-ref" ref="glossary-generation">
</div>
</p>

<p>
<div class="glossary-ref" ref="glossary-usage">
</div>
</p>



<p><div class="anexample" id="generation-example">
Examples of generation are the completed creation of a file by a
program, the completed creation of a linked data set, and the completed
publication of a new version of a document.
</div>
</p>

<p>
<div class="anexample" id="usage-example">
Usage examples include a procedure beginning to consume an argument, a service starting to read a value on a port, a program beginning to read a configuration
file, or the point at which an ingredient, such as eggs, is being added in a baking activity. Usage may entirely consume an entity (e.g. eggs are no longer available after being added to
the mix); alternatively, a same entity may be used multiple times, possibly by different activities (e.g. a file on a file system can be read indefinitely).
</div></p>


<p>Activities are consumers of entities and producers of entities. In some case, the consumption of an entity influences the creation of another in some way. This notion is captured by derivations, defined as follows.</p>

<p>
<span class="glossary-ref" ref="glossary-derivation">
</p>


<div class="anexample" id="derivation-example">
<p>Examples of derivation include  the transformation of a relational table into a
linked data set, the transformation of a canvas into a painting, the transportation of a work of art from London to New York, and a physical transformation such as the melting of ice into water.</p>
</div>

</section>

    <section id="section-types-entities-agents"> 
<h2>Types of Entities and Agents</h2>

<p>There are some useful types of entities and agents that are commonly encountered in applications making data and documents available on the Web; we introduce them in this section. </p>

<p>
<span class="glossary-ref" ref="glossary-plan">
</span>
PROV-DM is not
prescriptive about the nature of plans, their representation, the
actions or steps they consist of, or their intended goals.  Since plans may evolve over time,
it may become necessary to track their provenance, so plans themselves are
entities.</p> 

<div class="anexample" id="plan-example">
<p>
A plan can be a blog post tutorial for how to set up a web server, a list of instructions for a micro-processor execution, a cook's written recipe for a chocolate cake, or a workflow for a scientific experiment.
</p>
</div>

<p>
<span class="glossary-ref" ref="glossary-collection"></span> This concept allows for the provenance of the collection, but also of its constituents to be expressed.  Such a notion of collection corresponds to a wide variety of  concrete data structures, such as a <em>maps</em>, <em>dictionaries</em> or <em>associative arrays</em>.</p>

<div class="anexample" id="collection-example">
<p>
An example of collection is an archive of documents. Each document has its own provenance, but the archive itself also has some provenance: who maintained it, which documents it contained at which point in time, how it was assembled, etc. 
</div>


<!-- alternative names: provenance record, bundle -->
<p>An <dfn title="concept-accountEntity">AccountEntity</dfn> is an entity that contains a bundle of provenance assertions. </p>

<div class="anexample" id="account-example">
<p>
Having found a resource, a user may want to retrieve its
provenance. For users to decide whether they can place their trust in
that resource, they may want to analyze its provenance, but also determine
who the provenance is attributed to, and when it was
generated. Hence, from the PROV-DM data model, the provenance is
regarded as an entity, an AccountEntity, for which provenance can be
sought.
</p>
</div>


<p>Three types of agents are recognized by PROV-DM because they are commonly encountered in applications making data and documents available on the Web: persons, software agents, and organizations.</p>

<div class="anexample" id="software-agents-example">
<p> Even software agents can be assigned some responsibility for the effects they have in the world, so for example if one is using a Text Editor and one's laptop crashes, then one would say
that the Text Editor was responsible for crashing the laptop.  If one invokes a service to buy a book, that service can be considered responsible for drawing funds from one's bank to make
the purchase (the company that runs the service and the web site would also be responsible, but the point here is that we assign some measure of responsibility to software as well). </p>
</div>
<p>So when
someone models software as an agent for an activity in the PROV-DM model, they mean the agent has some responsibility for that activity.</p>
</section>

    <section id="section-responsibility"> 
<h2>Activity Association and Responsibility Chain</h2>

  



<p>It is important to reflect that there is a degree in the
responsibility of agents, and that is a major reason for
distinguishing among all the agents that have some association with an
activity and determine which ones are really the originators of the
entity.  For example, a programmer and a researcher could both be
associated with running a workflow, but it may not matter which
programmer clicked the button to start the workflow while it would
matter a lot which researcher told the programmer to do so.  So there
is some notion of responsibility that needs to be captured. </p>

<!-- <div class="note"> to be revisited for WD5. Paolo's proposed text: "Agents are defined in sec. 2.1 as having some kind of responsibility for activities. However, one may want to be more specific regarding the degrees of an agent's responsibility. For example, ..."</div>
-->


<p>Provenance reflects activities that have occurred.  In some  
cases, those activities reflect the execution of a plan that was  
designed in advance to guide the execution.  PROV-DM allows attaching  
a plan to an activity, which represents what was intended to  
happen.  Representing the plan explicitly in the provenance can be useful for various tasks: for example, to  
validate the execution as represented in the provenance record, to  
manage expectation failures, or to provide explanations.</p>

<!-- <div class="note">Proposal: remove the above para as it repeats from 2.3. Proposed text: "the <em>activity association</em> relation provides a way to indicate that an agent is responsible for an activity, possibly with an associated plan."[PM]</div> -->


<p>
<span class="glossary-ref" ref="glossary-activityAssociation"></span>
</p>

<div class="anexample" id="association-example">
<p>Examples of association between an activity and agent are:
<ul>
<li>creation of a web page under the guidance of a designer;</li>
<li>various forms of participation in a panel discussion, including audience member, panelist, or panel chair;</li>
<li>a public event, sponsored by a company, and hosted by a museum;</li>
<li>an XSLT transform initiated by a user;</li>
</ul>
</div>

<p>
<span class="glossary-ref" ref="glossary-responsibilityChain">
</span> The nature of this relation is intended to be broad,  including delegation or a contractual relation. </p>

<!--<div class="note">Propose to rephrase as follows: <br/>
A relation between two agents, denoted <dfn title="concept-responsibilityChain">actedOnBehalfOf</dfn> indicates that 
 that a "subordinate" agent acted on behalf of a "responsible" agent, in the context of an activity.  The nature of this relation is intended to be broad,  including delegation or a contractual relation.
  When this relation is used transitively, i.e., one agent acts on behalf of another, who also acts on behalf of another, etc., these relations form a  <dfn title="concept-responsibilityChain">responsibility chain</dfn>.
</div>-->
  




<div class="anexample" id="responsibilityChain-example">
<p>A student publishing a web page describing an academic
department could result in both the student and the department being
agents associated with the activity, and it may not matter which
student published a web page but it matters a lot that the department
told the student to put up the web page.  
</p>
</div>
</section>


    <section id="section-UML"> 
<h2>Overview Diagram</h2>

<p> The following diagram summarizes the elements and relations just described</p>

<div class="note">
   TODO: short text required to explain the overview diagram
</div>


<div style="text-align: center; ">
  <figure>

  <img src="OverviewDiagram.svg" alt="PROV-DM overview" style="max-width: 70%; "  />

<figcaption>PROV-DM overview</figcaption>
  </figure>
</div>


</section>
</section>
<!-- </section>  -->

<section id="prov-dm-example"> 
<h2>Example</h2>


<p>In this example, we consider the second version of the PROV-DM document 
<a href="http://www.w3.org/TR/2011/WD-prov-dm-20111215">http://www.w3.org/TR/2011/WD-prov-dm-20111215</a>. Its provenance can be expressed from several perspectives, which we present. In the first one,  provenance is concerned with the W3C process, whereas in the second one, it takes the authors' viewpoint.  </p>


<section id="section-example-a"> 
<h3>The Process View</h3>




<p>

In this section, we show the kind of provenance record that the <a href="http://www.w3.org/Consortium">WWW Consortium</a> could keep for auditors to check that due processes are followed. All entities involved in this example are Web resources, with well defined URIs (some of which locating archived email messages, available to W3C Members).</p>

<ul>
<li> Two versions of the technical report are involved: <span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111215">tr:WD-prov-dm-20111215</a></span> (second working draft) and <span class="name"><span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111018">tr:WD-prov-dm-20111018</a></span></span> (first working draft);</li>
<li> Both <span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111215">tr:WD-prov-dm-20111215</a></span> and <span class="name"><span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111018">tr:WD-prov-dm-20111018</a></span></span> were published by the WWW Consortium  agent (<span class="name"><a href="http://www.w3.org/Consortium">w3:Consortium</a></span>); </li>
<li> The publication activity for <span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111215">tr:WD-prov-dm-20111215</a></span> is <span class="name">ex:pub2</span>;</li>
<li> The publication activity for <span class="name"><span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111018">tr:WD-prov-dm-20111018</a></span></span> is <span class="name">ex:pub1</span>;
</li>

<li> The report <span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111215">tr:WD-prov-dm-20111215</a></span> is derived from <span class="name"><span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111018">tr:WD-prov-dm-20111018</a></span></span>;</li>

<li> The publication activity <span class="name">ex:pub1</span> used a <a href="http://www.w3.org/2005/08/01-transitions.html#pubreq">publication request</a> (<span class="name"><a href="https://lists.w3.org/Archives/Member/w3c-archive/2011Oct/0141">ar2:0141</a></span>) and a <a href="http://www.w3.org/2005/08/01-transitions.html#transreq">transition request</a> (<span class="name"><a href="https://lists.w3.org/Archives/Member/chairs/2011OctDec/0004">ar1:0004</a></span>);</li>
<li> The publication activity <span class="name">ex:pub1</span> used a <a href="http://www.w3.org/2005/08/01-transitions.html#pubreq">publication request</a> (<span class="name"><a href="https://lists.w3.org/Archives/Member/w3c-archive/2011Dec/0111">ar3:0111</a></span>);</li>
<li> Technical reports were published according to the process rules (<span class="name"><a href="http://www.w3.org/2005/10/Process-20051014/tr.html#rec-advance">pr:rec-advance</a></span>), a plan in PROV-DM terminology.</li>
</ul>

<p>
We now paraphrase some PROV-DM assertions, and illustrate them with the PROV-ASN notation, a notation for PROV-DM aimed at human consumption.  Full details of the provenance record can be found <a href="examples/w3c-publication1.prov-asn">here</a>.

<ul>
<li>There is a technical report, a working draft on the recommendation track (<a href="http://www.w3.org/2005/10/Process-20051014/tr.html#RecsWD">pr:RecsWD</a>), which is regarded as an entity so that we can describe its provenance. Similar descriptions exist for all entities.
<pre>
entity(tr:WD-prov-dm-20111215, [ prov:type="pr:RecsWD" %% xsd:QName ])
</pre>
</li>
<li>There is a publication activity.
<pre>
activity(ex:pub2,,,[prov:type="publish"])
</pre>
</li>

<li>The technical report was generated by the publication activity: this is a <a title="concept-Generation">Generation</a>.
<pre>
wasGeneratedBy(tr:WD-prov-dm-20111215, ex:pub2)
</pre>
</li>


<li>The second draft of the technical report was derived from the first draft of the technical report: this is a <a title="concept-Derivation">Derivation</a>.
<pre>
wasDerivedFrom(tr:WD-prov-dm-20111215, tr:WD-prov-dm-20111018)
</pre>
</li>

<li>The activity required a publication request: this is a <a title="concept-Usage">Usage</a>.
<pre>
used(ex:pub2,ar3:0111)
</pre>
</li>

<li>The activity was associated with the Consortium agent, and proceeded according to its publication policy: this is an <a title="concept-activityAssociation">Activity Association</a>.
<pre>
wasAssociatedWith(ex:pub2, w3:Consortium  @ pr:rec-advance)
</pre>
</li>
</ul>

<p>
Provenance descriptions can be <em>illustrated</em> graphically. The illustration is not intended to represent all the details of the model, but it is intended to show the essence of a set of
provenance statements.  Therefore, it should not be seen as an alternate notation for expressing provenance.</p>

<p>The graphical illustration takes the form of a graph. Entities, activities and agents are represented as nodes, with oval, rectangular, and octagonal shapes, respectively.  Usage,
Generation, Derivation, and Activity Association are represented as directed edges.</p>

<p>Entities are laid out according to the ordering of their generation event.  We endeavor to show time progressing from top to bottom. This means that edges for Usage, Generation and
Derivation typically point upwards.</p>






<div style="text-align: center;">
  <figure>
  <img src="examples/w3c-publication1.png" alt="Provenance of a Tech Report" style="max-width: 70%; "/>
<figcaption>Provenance of a Tech Report</figcaption>
  </figure>
</div>

<div class='note'>
Illustration to be hand crafted instead of being generated automatically. It's important to adopt a common style for all illustrations across all PROV documents.
</div>


<p> This simple example has shown a variety of PROV-DM constructs, such as Entity, Agent, Activity, Usage, Generation, Derivation, and ActivityAssociation. In this example, it happens that all entities were already Web resources, with readily available URIs, which we used. We note that some of the resources are public, whereas others have restricted access: provenance statements only make use of their identifiers. If identifiers do not pre-exist, e.g. for activities, then they can be minted, for instance <span class="name">ex:pub2</span>, occurring in the namespace identified by prefix <span class="name">ex</span>.  We note that the URI scheme developed by W3C is particularly suited for expressing provenance of these reports, since each URI denotes a specific version of a report. It then becomes very easy to relate the various versions, with PROV-DM constructs. </p>


</section>
<section id="section-example-b"> 
<h3>The Authors View</h3>

<p>In this section, we consider another perspective on technical report
<a href="http://www.w3.org/TR/2011/WD-prov-dm-20111215">http://www.w3.org/TR/2011/WD-prov-dm-20111215</a>. Here, provenance is concerned with the document editing activity, as perceived by authors.  This kind of information could be used by authors in their CV or in a narrative about this document. </p>

<ul>
<li> The same technical report is involved: <span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111215">tr:WD-prov-dm-20111215</a></span>;</li>
<li> An editing activity for <span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111215">tr:WD-prov-dm-20111215</a></span> is <span class="name">ex:edit1</span>;</li>
<li> The report <span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111215">tr:WD-prov-dm-20111215</a></span> is generated by activity <span class="name">ex:edit1</span>;</li>
<li> Several persons are associated with activity <span class="name">ex:edit1</span>, some in an editorial role, some in a contributor's role.</li>
</ul>

<p>Again, we paraphrase some PROV-DM assertions, and illustrate them with the PROV-ASN notation.
Full details of the provenance record can be found <a href="examples/w3c-publication3.prov-asn">here</a>.</p>

<ul>
<li>There is a technical report, which from the author's perspective is a document in its second version. 
<pre>
entity(tr:WD-prov-dm-20111215, [ prov:type="document", ex:version="2" ])
</pre>
<p>While this description is about the same report <span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111215">tr:WD-prov-dm-20111215</a></span>, its details differ from the author's perspective: it is a document and it has a version number. </p></li>

<li>There is an editing activity.
<pre>
activity(ex:edit1,,,[prov:type="edit"])
</pre>
</li>

<li>The technical report was generated by the editing activity: this is a <a title="concept-generation">Generation</a>.
<pre>
wasGeneratedBy(tr:WD-prov-dm-20111215, ex:edit1)
</pre>
</li>


<li>There are some agents.
<pre>
agent(ex:Paolo, [ prov:type="Human" ])
agent(ex:Simon, [ prov:type="Human" ])
</pre>
</li>

<li>Agents were assigned various responsibilities in the editing activity: contributor and editor.
<pre>
wasAssociatedWith(ex:edit1, ex:Paolo, [prov:role="editor"])
wasAssociatedWith(ex:edit1, ex:Simon, [prov:role="contributor"])
</pre>
</li>
</ul>



<div style="text-align: center;">
  <figure>
  <img src="http://www.w3.org/2011/prov/wiki/images/c/cd/W3c-publication3.png" alt="Provenance of a Tech Report (b)" style="max-width: 98%; "/>
<figcaption id="prov-tech-report">Provenance of a Tech Report (b)</figcaption>
  </figure>
</div>
</section>

<section id="section-example-c"> 
<h3>Attribution of Provenance</h3>

<p>The two previous sections  provide  two different perspectives on the provenance of a technical report. By design, the PROV approach allows for the provenance of a subject to be provided by multiple sources. For users to decide whether they can place their trust in the technical report, they may want to analyze its provenance, but also determine
who the provenance is attributed to, and when it was
generated, etc. In other words, we need to be able to express the provenance of provenance.</p>

<p>No new mechanism is required to support this requirement.  PROV-DM makes the assumption that provenance statements have been bundled up, and named, by some mechanism outside the scope of PROV-DM. For instance, in this case, provenance statements were put in a file and exposed on the Web, respectively at <a href="http://dvcs.w3.org/hg/prov/raw-file/default/model/working-copy/examples/w3c-publication1.prov-asn">ex:prov1</a> and <a href="http://dvcs.w3.org/hg/prov/raw-file/default/model/working-copy/examples/w3c-publication3.prov-asn">ex:prov3</a>.   To express their respective provenance, these resources must be seen as entities, and all the constructs of PROV-DM are now available to characterize their provenance. In the example below, <span class="name">ex:prov1</span> is attributed to the agent <span class="name">w3:Consortium</span>, whereas <span class="name">ex:prov3</span> to <span class="name">ex:Simon</span>.

<pre>
entity(ex:prov1, [prov:type="prov:AccountEntity" %% xsd:QName ])
wasAttributedTo(ex1:prov1,w3:Consortium)

entity(ex:prov3, [prov:type="prov:AccountEntity" %% xsd:QName ])
wasAttributedTo(ex1:prov3,ex:Simon)
</pre>



</section>

</section>

<section id="data-model-concepts"> 

<h2>PROV-DM Core</h2>

<p>In this section, we revisit each concept introduction in <a href='#conceptualization'>Section 2</a>, and provide its detailed definition in the PROV data model, in terms of its various constituents. </p>

<p>In PROV-DM, we distinguish elements from relations, which are respectively discussed in 
<a href='#term-element'>Section 4.1</a> and <a href='#term-relation'>Section 4.2</a>.</p>

<section id="term-element"> 
<h3>Element</h3>


   <section id="term-Entty"> 
      
<h4>Entity</h4>


<div class="glossary-ref" ref="glossary-entity" withspan='true'></div>


<p><div class="attributes" id="attributes-entity">An entity<span class="withAsn">, written <span class="name">entity(id, [ attr1=val1, ...])</span> in PROV-ASN, </span> contains:</p>
<ul>
<li><em>id</em>: an identifier identifying an entity; </li>
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs representing this entity's situation in the world.</li>
</ul></div>

<div class="anexample">
<p>
The following expression</p>
<pre class="codeexample">
entity(tr:WD-prov-dm-20111215, [ prov:type="document", ex:version="2" ])
</pre>
states the existence of an entity, denoted by identifier <span class="name">tr:WD-prov-dm-20111215</span>,  with type <span class="name">document</span> and version number <span class="name">2</span>. The  attributes <span class="name">ex:version</span> is application specific, whereas the attribute <span
class="name">type</span> is reserved in the PROV-DM namespace.
<!--The following expression</p>
<pre class="codeexample">
entity(tr:WD-prov-dm-20111215, [ prov:type="document", ex:version="2" ])
entity(e0, [ prov:type="File", ex:path="/shared/crime.txt", ex:creator="Alice" ])
</pre>
states the existence of an entity, denoted by identifier <span class="name">e0</span>,  with type <span class="name">File</span> and path <span class="name">/shared/crime.txt</span> in the
file system,  and creator alice. The  attributes <span class="name">path</span> and <span class="name">creator</span> are application specific, whereas the attribute <span
class="name">type</span> is reserved in the PROV-DM namespace.-->
</div>

<p>Further considerations:</p>
<ul>
<li>The sets of Activities and Entities are disjoint, as explained below.</li>
</ul>


<div class='issue'>The characterization interval of an entity is currently implicit. Making it explicit would allow us to define wasComplementOf more precisely. 
Beginning and end of characterization interval could be expressed by attributes (similarly to activities). 
How do we define the end of an entity? This is <a href="http://www.w3.org/2011/prov/track/issues/204">ISSUE-204</a>.
</div>


 <div class="issue">
There is still some confusion about what the identifiers really denote. For instance, are they entity identifiers or entity record identifiers.  This is <a
href="http://www.w3.org/2011/prov/track/issues/183">ISSUE-183</a>.
An example and questions appear in <a href="http://www.w3.org/2011/prov/track/issues/215">ISSUE-215</a>. A related issued is also raised in <a
href="http://www.w3.org/2011/prov/track/issues/145">ISSUE-145</a>.
</div>


    </section> 

    <section id="term-Activity"> 
      
<h3>Activity</h3>

<div class="glossary-ref" ref="glossary-activity" withspan='true'></div>

<p><div class="attributes" id="attributes-activity"> An activity<span class="withAsn">, written <span class="name">activity(id, st, et, [ attr1=val1, ...])</span> in PROV-ASN,</span> contains:</p>
<ul>
<li><em>id</em>: an identifier identifying an activity;</li>
<li><em>startTime</em>: an OPTIONAL time for the start of the activity;</li>
<li><em>endTime</em>: an OPTIONAL time for the end of the activity;</li>
<li><em>attributes</em>:  an OPTIONAL set of attribute-value pairs for this activity.</li>
</ul></div>

<div class="anexample">
<p>
The following expression</p>
<pre class="codeexample">
activity(a1,2011-11-16T16:05:00,2011-11-16T16:06:00,
        [ex:host="server.example.org",prov:type="ex:edit" %% xsd:QName])
</pre>
<p>states the existence of an activity with identifier <span class="name">a1</span>, start time <span class="name">2011-11-16T16:05:00</span>, and end time <span
class="name">2011-11-16T16:06:00</span>, running on host <span class="name">server.example.org</span>, and of type <span class="name">edit</span>.  The attribute <span class="name">host</span>  is application specific  (declared in some namespace with prefix <span class="name">ex</span>).  The attribute <span
class="name">type</span> is a reserved attribute of PROV-DM, allowing for sub-typing to be expressed.</p>
</div>



<p>Further considerations:</p>
<ul>
<li>An activity is not an entity.
Indeed,  an entity exists in full at
any point in its lifetime, persists during this
interval, and preserves the characteristics that makes it
identifiable.  In contrast, an activity is something that happens,
unfolds or develops through time, but is typically not identifiable by
the characteristics it exhibits at any point during its duration. 
This distinction is similar to the distinction between 
'continuant' and 'occurrent' in logic [[Logic]].</li>
</ul>


</section> 

<section id="term-Agent">
<h3>Agent</h3>

<div class="glossary-ref" ref="glossary-agent" withspan='true'></div>


<p><div class="attributes" id="attributes-agent">An agent<span class="withAsn">, noted <span class="name">agent(id, [ attr1=val1, ...])</span> in PROV-ASN,</span> contains:</p>
<ul>
<li><em>id</em>: an identifier identifying an agent;</li>
<li><em>attributes</em>: a set of attribute-value pairs representing this agent's situation in the world.
</li>
</ul></div>


<p>
From an interoperability perspective, it is useful to define some basic categories of agents since
it will improve the use of provenance by applications.  
There should be very few of these basic categories to keep the model simple and accessible. 
There are three types of agents in the model since they are common across most anticipated domains of use:
<ul>
<li><span class="name">Human</span>: agents of type Human are people. (This type is equivalent to a "foaf:person" [[FOAF]])</li> 
<li><span class="name">Organization</span>: agents of type Organization are social institutions such as companies, societies etc. (This type is equivalent to a "foaf:organization"
[[FOAF]])</li> 
<li><span class="name">ComputingSystem</span>: a computing system agent is a piece of software and/or hardware. </li>
</ul>
<p>These types are mutually exclusive, though they do not cover all kinds of agent. </p>



<div class="anexample">
<p>The following expression is about an agent identified by <span class="name">e1</span>, which is a person, named Alice, with employee number 1234.</p>
<pre class="codeexample">
agent(e1, [ex:employee="1234", ex:name="Alice", prov:type="prov:Human" %% xsd:QName])
</pre>
<p>It is optional to specify the type of an agent. When present, it is expressed using the <span class="name">prov:type</span> attribute.</p>
</div>

<div class='issue'> Shouldn't we allow for entities (not agent) to be associated with an activity?  Should we drop the inference association-agent? <a
href="http://www.w3.org/2011/prov/track/issues/203">ISSUE-203</a>.</div>

</section>

   <section id="term-note"> 
      
<h4>Note</h4>

<p>As provenance descriptions are exchanged between systems, it may be useful to add extra-information to what they are describing. For instance, a "trust service" may add value-judgements about the
trustworthiness of some of the entities or agents involved. Likewise, an interactive visualization component may want to enrich a set of provenance descriptions with information helping reproduce their
visual representation. To help with interoperability, PROV-DM introduces a simple annotation mechanism allowing anything that is identifiable to be associated with notes.</p>

<p>A <dfn title="dfn-note">note</dfn><span class="withAsn">, noted <span class="name">note(id, [ attr1=val1, ...])</span> in PROV-ASN,</span> contains:</p>
<ul>
<li><em>id</em>: an identifier identifying the note;</li>
<li><em>attributes</em>: a set of attribute-value pairs, whose meaning is application specific.</li>
</ul>




<p>A separate PROV-DM relation is used to associate a note with something that is identifiable (see <a href="#term-annotation">Section on annotation</a>). A given note may be associated with
multiple identifiable things.
</p>


<div class="anexample">
<p>
The following note consists of a set of application-specific attribute-value pairs, intended
to help the rendering of what it is associated with, by
specifying its color and its position on the screen.</p>
<pre class="codeexample">
note(ex2:n1,[ex2:color="blue", ex2:screenX=20, ex2:screenY=30])
hasAnnotation(tr:WD-prov-dm-20111215,ex2:n1)
</pre>
<p>The note is associated with the entity <span class="name">tr:WD-prov-dm-20111215</span> previously introduced (<a title="annotation">hasAnnotation</a> is 
discussed in Section <a href="#term-annotation">Annotation</a>).  The note's identifier and attributes are declares in a separate namespace denoted by prefix <span class="name">ex2</span>.
</p>

<p>Alternatively, a reputation service may enrich a provenance record with notes providing reputation ratings about agents. In the following fragment, both agents <span class="name">ex:Simon</span> and <span class="name">ex:Paolo</span> are rated "excellent".</p>
<pre class="codeexample">
note(ex3:n2,[ex3:reputation="excellent"])
hasAnnotation(ex:Simon,ex3:n2)
hasAnnotation(ex:Paolo,ex3:n2)
</pre>
<p>The note's identifier and attributes are declares in a separate namespace denoted by prefix <span class="name">ex3</span>.</p>

</div>


   </section> 

</section>


<section id="term-relation">
<h3>Relation</h3>

<p>
This section describes all the PROV-DM relations between the elements introduced in <a href="#term-element">Section Element</a>. While these relations are not
binary,  they all involve two primary elements. They can be summarized as follows. </p>


<div style="text-align: center;">
<table border="1" style="margin-left: auto; margin-right: auto;">
<caption>PROV-DM Core Relation Summary</caption>
<tr><td></td><td>Entity</td><td>Activity</td><td>Agent</td><td>Note</td></tr> 
<tr><td>Entity</td><td><a title="derivations">wasDerivedFrom</a><br><a title="dfn-alternate">alternateOf</a><br><a title="dfn-specialization">specializationOf</a></td><td><a
title="dfn-Generation">wasGeneratedBy</a></td><td>&mdash;</td><td><a title="dfn-annotation">hasAnnotation</a></td></tr>
<tr><td>Activity</td><td><a title="usage">used</a></td><td>&mdash;</td><td><a title="start record">wasStartedBy</a><br><a title="end record">wasEndedBy</a><br><a title="dfn-activity-association">wasAssociatedWith</a></td><td><a title="dfn-annotation">hasAnnotation</a></td></tr>
<tr><td>Agent</td><td>&mdash;</td><td>&mdash;</td><td><a title="dfn-responsibility-chain">actedOnBehalfOf</a></td><td><a title="dfn-annotation">hasAnnotation</a></td></tr>
<tr><td>Note</td><td>&mdash;</td><td>&mdash;</td><td>&mdash;</td><td><a title="dfn-annotation">hasAnnotation</a></td></tr>
</table>
</div>



<section id="activity-entity-relation">
<h3>Activity-Entity Relation</h3>

<section id="term-Generation">
<h4>Generation</h4>

<div class="glossary-ref" ref="glossary-generation" withspan='true'></div>

<p>
<div class="attributes" id="attributes-generation"><dfn title="dfn-Generation">Generation</dfn><span class="withAsn">, written <span class="name">wasGeneratedBy(id,e,a,t,attrs)</span> in PROV-ASN,</span> has the following components:</p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier identifying a generation;</li> 
<li><em>entity</em>:  an identifier identifying a created entity; </li>
<li><em>activity</em>:  an OPTIONAL identifier identifying the activity that creates the entity;</li>

<li><em>time</em>: an OPTIONAL "generation time", the time at which the entity was completely created;</li>

<li><em>attributes</em>:  an OPTIONAL set of attribute-value pairs that describes the modalities of generation of this entity by this activity.</li>
</ul></div>
<p>While each of the components <em>activity</em>, <em>time</em>, and  <em>attributes</em> is OPTIONAL, at least one of them MUST be present.</p>





<div class='anexample'>
<p>
The following expressions</p>
<pre class="codeexample">
  wasGeneratedBy(e1,a1, 2001-10-26T21:32:52, [ex:port="p1", ex:order=1])
  wasGeneratedBy(e2,a1, 2001-10-26T10:00:00, [ex:port="p1", ex:order=2])
</pre>
<p>state the existence of two generations (with respective times <span class="name">2001-10-26T21:32:52</span> and <span
class="name">2001-10-26T10:00:00</span>), at which new entities,  identified by <span class="name">e1</span> and <span class="name">e2</span>, are created by an
activity,  identified by <span class="name">a1</span>.
The first one is available as the first value on port p1, whereas the other is the second value on port p1.  The semantics of <span class="name">port</span> and <span
class="name">order</span> are application specific.
</p>
</div>


<div class='anexample'>
<p>
In some cases, we may want to record the time at which an entity was generated without having to specify the activity that generated it. To support this requirement, the activity component in generation is optional. Hence,  the following expression indicates the time at which an entity is generated, without naming the activity that did it.</p>
<pre class="codeexample">
  wasGeneratedBy(e,,2001-10-26T21:32:52)
</pre>
</div>


</section>


<section id="term-Usage">
<h3>Usage</h3>

<div class="glossary-ref" ref="glossary-usage" withspan='true'></div>


<p><div class="attributes" id="attributes-usage"><dfn title="dfn-Usage">Usage</dfn><span class="withAsn">, written <span class="name">used(id,a,e,t,attrs)</span> in PROV-ASN,</span> has the following constituents:</p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier identifying a usage;</li> 
<li><em>activity</em>: an identifier for the consuming activity;</li>
<li><em>entity</em>: an identifier for the consumed entity;</li>
<li><em>time</em>: an OPTIONAL "usage time", the time at which the entity started to be used;</li>
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs that describe the modalities of usage of this entity by this activity.</li>
</ul></div>

<p>
A reference to a given entity MAY appear in multiple usages that share
 a given activity identifier. 
</p>


<div class='anexample'>
<p>The following usages</p>
<pre class="codeexample">
  used(a1,e1,2011-11-16T16:00:00,[ex:parameter="p1"])
  used(a1,e2,2011-11-16T16:00:01,[ex:parameter="p2"])
</pre>
<p>state that the activity identified by <span class="name">a1</span> consumed two entities identified by <span
class="name">e1</span> and <span class="name">e2</span>, at times <span class="name">2011-11-16T16:00:00</span> and  <span class="name">2011-11-16T16:00:01</span>, respectively; the first
one was found as the value of parameter <span class="name">p1</span>, whereas the second was found as value of parameter <span class="name">p2</span>.  The semantics of <span
class="name">parameter</span> is application specific.</p>
</div>



<div class='note'>



<p>
A usage record's id is OPTIONAL. It MUST be present when annotating usage records (see Section <a href="#term-annotation">Annotation Record</a>) or when defining precise-1 derivations (see
<a href="#Derivation-Relation">Derivation</a>).</p>
</div>




</section>
</section>





<section id="activity-agent-relation">
<h3>Activity-Agent Relation</h3>

<section id="term-ActivityAssociation">
<h4>Activity Association</h4>

<div class="glossary-ref" ref="glossary-activityAssociation" withspan='true'></div>

<p>As far as responsibility is concerned, PROV-DM offers two kinds of constructs. The first, introduced in this section, is a relation between an agent, a plan, and an activity; the second, introduced in <a
href="#term-responsibility">Section Responsibility</a>, is a relation between agents expressing that an agent was acting on behalf of another, in the context of an activity. </p>


<p><div class="attributes" id="attributes-activity-association">An <dfn title="dfn-activity-association">activity association</dfn><span class="withAsn">, written <span class="name">wasAssociatedWith(id,a,ag,pl,attrs)</span> in PROV-ASN,</span> has the following
constituents:</p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier for the association between an activity and an agent;</li> 
<li><em>activity</em>: an identifier for the activity;</li>
<li><em>agent</em>: an identifier for the agent associated with the activity;</li>
<li><em>plan</em>: an OPTIONAL identifier for the plan adopted by the agent in the context of this activity;
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs that describe the modalities of association of this activity with this agent.</li>
</ul></div>

<div class="anexample">
In the following example, a designer and an operator agents are associated with an activity. The designer's goals are achieved by a workflow <span class="name">ex:wf</span>.   
<pre class="codeexample">
activity(ex:a,[prov:type="workflow execution"])
agent(ex:ag1,[prov:type="operator"])
agent(ex:ag2,[prov:type="designer"])
wasAssociatedWith(ex:a,ex:ag1,[prov:role="loggedInUser", ex:how="webapp"])
wasAssociatedWith(ex:a,ex:ag2,ex:wf,[prov:role="designer", ex:context="project1"])
entity(ex:wf,[prov:type="prov:Plan"%% xsd:QName, ex:label="Workflow 1", 
              ex:url="http://example.org/workflow1.bpel" %% xsd:anyURI])
</pre>
Since the workflow <span class="name">ex:wf</span> is itself an entity, its provenance can also be expressed in PROV-DM: it can be generated by some activity and derived from other entities,
for instance.
</div>

<div class='issue'> The activity association record does not allow for a plan to be asserted without an agent.
This seems over-restrictive. Discussed in the context of <a href="http://www.w3.org/2011/prov/track/issues/203">ISSUE-203</a>.</div>


<div class='issue'> Agents should not be inferred. WasAssociatedWith should also work with entities.
This is <a href="http://www.w3.org/2011/prov/track/issues/206">ISSUE-206</a>.</div>


</section>

<section id="term-Start-End">
<h4>Activity Start and Activity End</h4>

<p> A <dfn title="dfn-Start">activity start</dfn> is a representation of an agent starting an activity.
 An <dfn title="dfn-End">activity end</dfn> is a representation of an agent ending an activity. Both relations are specialized forms of <span class="name">wasAssociatedWith</span>. They contain
attributes describing the modalities of acting/ending activities.</p>



<p>An activity start<span class="withAsn">, written <span class="name">wasStartedBy(id,a,ag,attrs)</span> in PROV-ASN,</span> contains:</p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier identifying the activity start;</li> 
<li><em>activity</em>: an identifier identifying the started activity;
<li><em>agent</em>: an identifier for the agent starting the activity;
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs describing modalities according to which the agent started the activity.
</ul>

<p>An activity end<span class="withAsn">, written <span class="name">wasEndedBy(id,a,ag,attrs)</span> in PROV-ASN,</span> contains:</p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier identifying the activity end;</li> 
<li><em>activity</em>: an identifier identifying the ended activity;
<li><em>agent</em>: an identifier for the agent ending the activity;
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs describing modalities according to which the agent ended the activity.
</ul>


<div class="anexample">
<p>
In the following example,</p>
<pre class="codeexample">
wasStartedBy(a,ag,[ex:mode="manual"])
wasEndedby(a,ag,[ex:mode="manual"])
</pre>
<p>there is an activity denoted by <span class="name">a</span>
that was started and ended by an agent denoted by  <span class="name">ag</span>, in "manual" mode, an application specific characterization of these relations.
</p>
</div>

<div class='issue'> 
Should we define start/end records as representation of activity start/end events.
Should time be associated with these events rather than with activities. This will be similar to what
we do for entities. This is issue <a href="http://www.w3.org/2011/prov/track/issues/207">ISSUE-207</a>.</div>


</section>




</section>

<section id="entity-entity-agent-agent-relation">
<h4>Entity-Entity or Agent-Agent Relation</h4>

<section id="term-responsibility">

<h4>Responsibility Chain</h4>

<div class="glossary-ref" ref="glossary-responsibilityChain" withspan='true'></div>

<p>PROV-DM offers a mild version of responsibility
in the form of a relation to represent when an agent acted on another
agent's behalf.  So in the example of someone running a mail program,
the program is an agent of that activity and the person is also an
agent of the activity, but we would also add that the mail software
agent is running on the person's behalf.  In the other example, the
student acted on behalf of his supervisor, who acted on behalf of the
department chair, who acts on behalf of the university, and all those
agents are responsible in some way for the activity to take place but
we do not say explicitly who bears responsibility and to what
degree. </p>

<p>We could also say that an agent can act on behalf of several other
agents (a group of agents).  This would also make possible to
indirectly reflect chains of responsibility.  This also indirectly
reflects control without requiring that control is explicitly
indicated.  In some contexts there will be a need to represent
responsibility explicitly, for example to indicate legal
responsibility, and that could be added as an extension to this core
model.  Similarly with control, since in particular contexts there
might be a need to define specific aspects of control that various
agents exert over a given activity.</p>

<p><div class="attributes" id="attributes-responsibility-chain">A <dfn title="dfn-responsibility-chain">responsibility chain</dfn><span class="withAsn">, written <span class="name">actedOnBehalfOf(id,ag2,ag1,a,attrs)</span> in PROV-ASN,</span> has the following constituents:</p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier identifying the responsibility chain;</li> 
<li><em>subordinate</em>: an identifier for the agent associated with an activity, acting on behalf of the responsible
agent;</li>
<li><em>responsible</em>: an identifier for the agent,  on behalf of which the subordinate agent acted;</li>
<li><em>activity</em>: an OPTIONAL identifier of an activity for which the responsibility chain holds;</li>
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs that describe the modalities of this relation.</li>
</ul></div>


<div class="anexample">
In the following example, a programmer, a researcher and a funder agents are described.  The programmer and researcher are associated with a workflow activity.  The programmer acts on behalf
of the researcher (delegation) encoding the commands specified by the researcher; the researcher acts on behalf of the funder, who has an contractual agreement with the researcher. The terms
'delegation' and 'contact' used in this example are domain specific.
<pre class="codeexample">
activity(a,[prov:type="workflow"])
agent(ag1,[prov:type="programmer"])
agent(ag2,[prov:type="researcher"])
agent(ag3,[prov:type="funder"])
wasAssociatedWith(a,ag1,[prov:role="loggedInUser"])
wasAssociatedWith(a,ag2)
actedOnBehalfOf(ag1,ag2,a,[prov:type="delegation"])
actedOnBehalfOf(ag2,ag3,a,[prov:type="contract"])
</pre>
</div>


</section>

<section id="Derivation-Relation">
<h4>Derivation</h4>

<div class="glossary-ref" ref="glossary-derivation" withspan='true'></div>


<div class='note'>
This text was not edited much. It keeps on referring to asserter/assertion.  Before editing this section, we would like to have  <a href="http://www.w3.org/2011/prov/track/issues/249">ISSUE-249</a> resolved.
</div>


<p>According to <a href="#conceptualization">Section Conceptualization</a>, for an entity to be transformed from, created from, or affected by another in some way, there must be some
underpinning activities performing the necessary actions resulting in such a derivation.  
However, asserters may not assert or have knowledge of these activities and associated details: they may not assert or know their number, they may not assert or know their identity, they may
not assert or know the attributes characterizing how the relevant entities are used or generated. To accommodate the varying circumstances of the various asserters, PROV-DM allows more or
less precise derivations to be asserted.  Hence, PROV-DM uses the terms <em>precise</em> and <em>imprecise</em> to characterize the different kinds of derivations. We note
that the derivation itself is exact (i.e., deterministic, non-probabilistic), but it is its description, expressed in a derivation assertion, that may be imprecise. </p>

<p>The  lack of precision may come from two sources:</p>
<ul>
<li> the number of activities that underpin a derivation is not asserted or known, or</li>
<li> any of the other details that are involved in the derivation is not asserted or known; these include activity identities, generation and usage, and their attributes.</li>
</ul>




<p>Hence, we can consider two axis.  An activity number axis that has values  <em>single</em>, <em>multiple</em>,  and <em>unknown</em>, respectively representing the case where one activity
is known to have occurred, more than one activities are known to have occurred, or an unknown number of activities have occurred. Likewise, we can consider another axis to cover other
details (identities, generation, usage, and attributes), with values <em>asserted</em> and <em>not asserted</em>. We can then form a matrix of possible derivations. Out of the six
possibilities, 
PROV-DM offers three forms of derivations to cater for five of them, while the remaining one is not meaningful.  The following table summarizes names for the three kinds of
derivation, which we then explain.</p>

<div style="text-align: center;">
<table border="1" style="margin-left: auto; margin-right: auto;">
<caption>PROV-DM Derivation Type Summary</caption>
<tr><td colspan=2 rowspan=2></td><td colspan=2><em>other details</em> axis</td></tr>
<tr><td>asserted</td><td>not asserted</td></tr> 
<tr><td rowspan=3><em>activity number</em><br>axis</td><td>single</td><td><a>precise-1 derivation</a></td><td><a>imprecise-1 derivation</a></td></tr> 
<tr><td>multiple</td><td><a>imprecise-n derivation</a></td><td rowspan=2><a>imprecise-n derivation</a></td></tr> 
<tr><td>unknown</td><td>&mdash;</td></tr> 
</table>
</div>

<ul>
<li> The asserter asserts that derivation is due to exactly one activity, and all the details are asserted. We call this a precise-1 derivation.</li>
<li> The asserter asserts that derivation is due to exactly one activity, but other details,  whether known or unknown, are not asserted. We call this an imprecise-1 derivation.</li>
<li> The following cases are captured by an imprecise-n derivation.
<ul>
<li> The asserter knows that multiple activities are involved or ignores the number of activities involved in the derivation, and  other details are not asserted. </li>
<li> The asserter knows that multiple activities are involved in the derivation, and all their details are asserted. In this case,  these activities are connected by means of generated and
used intermediary entities.  Despite all activities and details being known, there is no guarantee that any of these activities plays an active role in the derivation; hence, this case is
also regarded as imprecise. Instead, precise derivations need to be expressed between these intermediary entities.  </li>
</ul>
</ul>

<p> We note that the last theoretical cases cannot occur, since
  asserting the details of an unknown number of activities is a contradiction.
</p>

<p>In order to represent the number of activities in a derivation, we introduce a PROV-DM attribute <span class="name">steps</span>, which can take two possible values:   <span
class="name">single</span> and <span class="name">any</span>.
When <span class="name">prov:steps="single"</span>, derivation is due to one activity; when <span class="name">prov:steps="any"</span>, the number of activities is multiple or not known.</p>


<p>The three kinds of <dfn id="dfn-derivation">derivations</dfn> are successively introduced.  Making use of the attribute <span class="name">steps</span>, we can distinguish the various derivation types.</p>

<p><div class="attributes" id="attributes-derivation">A <dfn>precise-1 derivation</dfn><span class="withAsn">, written <span class="name">wasDerivedFrom(id, e2, e1, a, g2, u1, attrs)</span> in PROV-ASN,</span> contains:</p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier  identifying the derivation;</li> 
<li><em>generatedEntity</em>: the identifier  of the generation entity;</li>
<li><em>usedEntity</em>: the identifier of the used entity;</li>
<li><em>activity</em>: the identifier of the activity using and generating the above entities;</li>
<li><em>generation</em>: the identifier the generation for the generated entity and activity;</li> 
<li><em>usage</em>: the identifier of the usage for the used entity and activity;</li> 
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs that describe the modalities of this derivation, optionally including the attribute-value
pair <span class="name">prov:steps="single"</span>.</li>
</ul>
</div>
<p>It is OPTIONAL to include  the attribute <span class="name">prov:steps</span> in a precise-1 derivation since it already refers to the one and only one activity underpinning the
derivation.</p>


<p>An <dfn>imprecise-1 derivation</dfn><span class="withAsn">, written <span class="name">wasDerivedFrom(id, e2,e1, t, attrs)</span> in PROV-ASN,</span> contains:</p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier identifying the derivation;</li> 
<li><em>generatedEntity</em>: the identifier of  the generated entity;</li>
<li><em>usedEntity</em>: the identifier of the used entity;</li>
<li><em>time</em>: an OPTIONAL "generation time", the time at which the entity was created;</li>
<li><em>attributes</em>: a set of attribute-value pairs that describe the modalities of this derivation; it MUST include the attribute-value pair <span class="name">prov:steps="single"</span>.</li>
</ul>
<p>An imprecise-1 derivation MUST include the attribute <span class="name">prov:steps</span>,  since it is the only means to distinguish this derivation from an imprecise-n derivation.</p>


<p>An <dfn>imprecise-n derivation</dfn><span class="withAsn">, written <span class="name">wasDerivedFrom(id, e2, e1, t, attrs)</span> in PROV-ASN,</span> contains:</p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier  identifying the derivation;</li> 
<li><em>generatedEntity</em>: the identifier of the generated entity;</li>
<li><em>usedEntity</em>: the identifier of the used entity;</li>
<li><em>time</em>: an OPTIONAL "generation time", the time at which the entity was created;</li>
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs that describe the modalities of this derivation; it optionally includes the attribute-value pair <span class="name">prov:steps="any"</span>.</li>
</ul>
<p>It is OPTIONAL to include  the attribute <span class="name">prov:steps</span> in an imprecise-n derivation. It defaults to <span class="name">prov:steps="any"</span>.</p> 


<p>None of the three kinds of derivation is defined to be transitive. Domain-specific specializations of these derivations may be defined in such a way that the transitivity property
holds.</p>


<div class="anexample">
<p>The following descriptions state the existence of derivations.</p>
<pre class="codeexample">
wasDerivedFrom(e5,e3,a4,g2,u2)
wasDerivedFrom(e5,e3,a4,g2,u2,[prov:steps="single"])

wasDerivedFrom(e3,e2,[prov:steps="single"])

wasDerivedFrom(e2,e1,[])
wasDerivedFrom(e2,e1,[prov:steps="any"])

wasDerivedFrom(e2,e1,2012-01-18T16:00:00, [prov:steps="any"])
</pre>
<p>
The first two are precise-1 derivations expressing that the activity identified by <span class="name">a4</span>, by
using the entity denoted by <span class="name">e3</span> according to usage <span class="name">u2</span>
 derived the
entity denoted by <span class="name">e5</span> and generated it according to generation
 <span class="name">g2</span>. </p>

<p>
The third line describes an imprecise-1 derivation, which is similar for <span class="name">e3</span> and <span class="name">e2</span>, but it leaves the activity and associated attributes implicit. The fourth and fifth lines are about imprecise-n derivations between  <span class="name">e2</span> and  <span class="name">e1</span>, but no information is provided as to the number and identity of activities underpinning the derivation. The sixth derivation extends the fifth with the derivation time of <span class="name">e2</span>.
</p>
</div>



<div class='issue'>Several points were raised about the attribute steps.
Its name, its default value   <a href="http://www.w3.org/2011/prov/track/issues/180">ISSUE-180</a>.
 <a href="http://www.w3.org/2011/prov/track/issues/179">ISSUE-179</a>.</div>

<div class='issue'> Emphasize the notion of 'affected by'   <a href="http://www.w3.org/2011/prov/track/issues/133">ISSUE-133</a>.</div>


<div class='issue'> Is imprecise-1 derivation necessary? Can we just use precise-1 and imprecise-n?   <a href="http://www.w3.org/2011/prov/track/issues/249">ISSUE-249</a>.</div>


</section>


<section id="term-alternate-specialization">

<h4>Alternate and Specialization</h4>

<p>The purpose of this section is to introduce relations between two entities that refer to the same thing in the world.
Consider for example three entities:
</p>
<ul>
  <li><span class="name">e1</span> denoting "Bob, the holder of Facebook account ABC",
  
  <li><span class="name">e2</span> denoting "Bob, the holder of Twitter account XYZ",

  <li><span class="name">e3</span> denoting "Bob, the person".
</ul>

<p>These entities refer to the same real person Bob, either in different contexts, or at different levels of abstraction. Specifically:


<ol>
  <li>e1 and e2 refer to Bob in two contexts (as Facebook and Twitter users, respectively)
  <li> both of e1 and e2  are more detailed than e3.
</ol>



<p>The following two relations are introduced for expressing alternative or specialized entities. </p>


  

<p>An <dfn title="dfn-Alternate">alternate relation</dfn><span class="withAsn">, written <span class="name">alternateOf(id, alt1, alt2, attrs)</span> in PROV-ASN,</span> addresses case (1). It has the following constituents:</p>

<ul>
<li><em>id</em>:  an OPTIONAL identifier for the association between the two alternates;</li>
<li><em>firstAlternate</em>: an identifier of the first of the two entities;</li>
<li><em>secondAlternate</em>: an identifier of the second of the two entities;</li>
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs to further describe this relation.</li>
</ul>

<div class="anexample" id="anexample-alternate">
<p>The following expressions describe two persons, respectively holder of a Facebook account and a Twitter account, and their relation as alternate. </p>
<pre class="codeexample">
entity(facebook:ABC, [ prov:type="person with Facebook account " ])
entity(twitter:XYZ, [ prov:type="person with Twitter account" ])
alternateOf(facebook:ABC, twitter:XYZ)
</pre>
</div>



<p>A <dfn title="dfn-Specialization">specialization relation</dfn><span class="withAsn">, written <span class="name">specializationOf(id, sub, super, attrs)</span> in PROV-ASN,</span> addresses case  (2). It  has the following constituents:</p>

<ul>
<li><em>id</em>:  an OPTIONAL identifier for the association between the two entities;</li>
<li><em>specializedEntity</em>: an identifier of the specialized entity;</li>
<li><em>generalEntity</em>: an identifier of the entity that is being specialized;</li>
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs to further describe this relation.</li>
</ul>

<div class="anexample" id="anexample-specialization">
<p>The following expressions describe two persons, the second of which is holder of a Twitter account. The second entity is a specialization of the first. </p>
<pre class="codeexample">
entity(ex:Bob, [ prov:type="person", ex:name="Bob" ])
entity(twitter:XYZ, [ prov:type="person with Twitter account" ])
specializationOf(twitter:XYZ, ex:Bob)
</pre>
</div>

<!--
<p>To promote take up of these relations, it is not specified whether they are transitive or symmetric.  We anticipate that applications will specialize these relations according to their needs. </p>
-->

<div class='issue'>A discussion on alternative definition of these relations has not yet reached a satisfactory conclusion. This is <a
href="http://www.w3.org/2011/prov/track/issues/29">ISSUE-29</a>. Also <a href="http://www.w3.org/2011/prov/track/issues/96">ISSUE-96</a>.</div>


</section>
</section>



<section id="term-annotation">
<h4>Annotation</h4>


<p>
<div class="glossary" id="glossary-annotation">
An <dfn title="concept-annotation">annotation</dfn> is a link between something that is identifiable and a note referred to by its identifier.</div>Multiple notes can
be associated with a given identified object; symmetrically, multiple objects can be associated with a given note.  Since notes have identifiers,  they can also be
annotated. The annotation mechanism (with note and annotation) forms a key aspect of the extensibility mechanism of PROV-DM (see <a
href="#extensibility-section">extensibility section</a>).</p> 

<p>An <dfn title="dfn-annotation">annotation relation</dfn><span class="withAsn">, written <span class="name">hasAnnotation(id,r,n,attrs)</span> in PROV-ASN,</span> has the following constituents:</p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier for this relation;</li>
<li><em>something</em>: the identifier of something being annotated;</li>
<li><em>note</em>: an identifier of a note;</li>
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs to further describe this annotation.</li>
</ul>

<div class="anexample">
<p>
The following expressions</p>
<pre class="codexample">
entity(e1,[prov:type="document"])
entity(e2,[prov:type="document"])
activity(a,t1,t2)
used(u1,a,e1,[ex:file="stdin"])
wasGeneratedBy(e2, a, [ex:file="stdout"])

note(n1,[ex:icon="doc.png"])
hasAnnotation(e1,n1)
hasAnnotation(e2,n1)

note(n2,[ex:style="dotted"])
hasAnnotation(u1,n2)
</pre>
<p>describe two  documents (attribute-value pair: <span class="name">prov:type="document"</span>) identified by <span class="name">e1</span> and <span
class="name">e2</span>, and their annotation with a note indicating that the icon (an application specific way of rendering provenance) is <span class="name">doc.png</span>. The example also
includes an activity, its usage of the first entity, and its generation of the second entity. The <a title="dfn-usage">usage</a> is annotated with a style (an application specific way
of rendering this edge graphically). To be able to express this annotation, the usage was provided with an identifier <span class="name">u1</span>, which was then referred to in <span
class="name">hasAnnotation(u1,n2)</span>.
</p>
</div>


</section>
</section>



<section  id="second-class-elements">
<h3>Further Elements of PROV-DM</h3>

This section introduces further elements of PROV-DM.

<section id="term-NamespaceDeclaration">
<h3>Namespace Declaration</h3>

<p>A PROV-DM <dfn id="dfn-namespace">namespace</dfn> is identified by an IRI reference [[!IRI]]. In PROV-DM, attributes, identifiers, and literals with <a title="qualified name">qualified names</a> as data type can be placed in a namespace using the mechanisms described in this specification. </p>


<p>A <dfn id="dfn-namespaceDeclaration">namespace declaration</dfn> consists of a binding between a prefix and a namespace. Every qualified name with this prefix in the scope of this
declaration refers to this namespace. 
A <dfn id="dfn-defaultNamespaceDeclaration">default namespace declaration</dfn> consists of a namespace. Every un-prefixed qualified name in the scope of this default namespace declaration
refers to this namespace.</p>

<p>The PROV-DM namespace is <span class="name">http://www.w3.org/ns/prov-dm/</span> (TBC).</p>

</section>

<section id="term-identifier">
<h4>Identifier</h4>

<p>
An <dfn id="dfn-identifier">identifier</dfn> is a <a>qualified
 name</a>. 
</p>

<p>
A <dfn id="dfn-qualifiedName">qualified name</dfn> is a name subject to <a>namespace</a> interpretation. It consists of a <a>namespace</a>, denoted by an optional prefix, and a local name.</p>


<p>PROV-DM stipulates that a qualified name can be mapped into an IRI
 by concatenating the IRI associated with the prefix and the local part.</p>

<p>A qualified name's prefix is OPTIONAL. If a prefix occurs in a
 qualified name, it refers to a <a>namespace</a> declared in a namespace declaration.  In the absence of prefix, the qualified name 
 refers to the <a title="default namespace declaration">default namespace</a>.</p>

</section>

<section id="term-attribute">
<h4>Attribute</h4>

<p>An <dfn title="dfn-attribute">attribute</dfn> is a <a>qualified name</a>. 


<p>The PROV data model introduces a pre-defined set of attributes in the <a href="#prov-dm-namespace">PROV-DM namespace</a>, which we define below. 
The interpretation of any attribute declared in another namespace is out of scope.</p>

<section id="term-attribute-role">
<h4>prov:role</h4>

<p>The attribute <dfn title="dfn-role"><span class="name">prov:role</span></dfn>  denotes the function of an entity with respect to an activity, in the context of a usage, generation,
activity association, activity start, and activity end. The attribute <span class="name">prov:role</span> is allowed to occur multiple times in a list of attribute-value pairs. The value associated with a <span
class="name">prov:role</span> attribute MUST be a PROV-DM <a title="literal">Literal</a>.</p>

<div class="anexample">
<p>The following activity start describes the role of the agent identified by <span class="name">ag</span> in this start relation with activity <span class="name">a</span>. </p>
<pre class="codeexample">
   wasStartedBy(a,ag, [prov:role="program-operator"])
</pre>
</div>
</section>

<section id="term-attribute-type">
<h4>prov:type</h4>

<p>The attribute <dfn title="dfn-type"><span class="name">prov:type</span></dfn>  provides further typing information for an element or relation. PROV-DM liberally
defines a type as a category of things having common characteristics. PROV-DM is agnostic about the representation of types, and only states that
the value associated with a <span class="name">prov:type</span> attribute MUST be a PROV-DM Literal. The attribute <span class="name">prov:type</span>
is allowed to occur multiple times.</p>

<div class="anexample">
<p>The following describes an agent of type software agent.</p>
<pre class="codeexample">
   agent(ag, [prov:type="prov:ComputingSystem" %% xsd:QName])
</pre>
</div>
</section>

<section id="term-attribute-steps">
<h4>prov:steps</h4>

<p> The  attribute <dfn title="dfn-steps"><span class="name">prov:steps</span></dfn>  defines the level of precision associated with a derivation. The value associated with a <span
class="name">prov:steps</span> attribute  MUST be   <span class="name">"single"</span> or <span class="name">"any"</span>. The attribute <span class="name">prov:steps</span> occurs at most
once in a derivation. A derivation  without attribute <span class="name">prov:steps</span> is considered to be equivalent to the same derivation extended with an extra attribute 
<span class="name">prov:steps</span> and associated value <span class="name">"any"</span>. </p>

<div class="anexample">
<p>The following expression declares an imprecise-1 derivation, which is known to involve one activity, though its identity, usage details of <span class="name">ex:e1</span>, and generation
details of <span class="name">ex:e2</span> are not explicit.</p>
<pre class="codeexample">
   wasDerivedFrom(ex:e2, ex:e1, [prov:steps="single"])
</pre>
</div>
</section>

<section id="term-attribute-label">
<h4>prov:label</h4>

<p> The attribute <dfn title="dfn-label"><span class="name">prov:label</span></dfn> provides a human-readable representation of a PROV-DM element or relation.  The value associated with the attribute <span class="name">prov:label</span> MUST be a string.</p>

<div class='issue'>
 This is <a href="http://www.w3.org/2011/prov/track/issues/219">ISSUE-219</a>. </div>
</section>



<section id="term-attribute-location">
<h4>prov:location</h4>

<p><dfn title="dfn-Location">Location</dfn> is an identifiable geographic place (ISO 19112). As such, there are numerous ways in which location can be expressed, such as by a coordinate,
address, landmark, row, column, and so forth. This  document does not specify how to concretely express  locations, but instead provide a mechanism to introduce locations, by means of attributes. </p> 


<p>
The attribute <dfn title="dfn-location"><span class="name">prov:location</span></dfn> is an OPTIONAL attribute of entity and activity.  The value associated with the  attribute <span class="name">prov:location</span> MUST be a PROV-DM Literal, expected to denote a location.
</p>

<div class="anexample">
<p>The following expression describes entity Mona Lisa, a painting, with a location attribute. </p>
<pre class="codeexample">
 entity(ex:MonaLisa, [prov:location="Le Louvres, Paris", prov:type="StillImage"])
</pre>
</div>
</section>




</section>
 

</section>




<section id="term-literal">
<h4>Literal</h4>

<div class='note'>
Usually, in programming languages, Literal are a notation for values. So, Literals should probably be moved to the serialization. Here, instead, we should define the types of values.  Thoughts?
</div>

<p>
A PROV-DM Literal represents a data value such as a particular string
or number.  A PROV-DM Literal represents a value whose interpretation is outside the scope of PROV-DM.
</p>


<div class="anexample">
<p>
The following examples respectively are the string "abc", the string "abc", the integer number 1, and the IRI "http://example.org/foo".
<pre class="codeexample">
  "abc"
  1
  "http://example.org/foo" %% xsd:anyURI
</pre>
<p>The following example shows a literal of type <span class="name">xsd:QName</span> (see
<a href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#QName">QName</a> [[!XMLSCHEMA-2]]).
The prefix <span class="name">ex</span>  MUST be bound to a <a>namespace</a> declared in a <a>namespace declaration</a>.</p>
<pre class="codeexample">
  "ex:value" %% xsd:QName
</pre>
</div>



</section>




<section id="term-Time">
<h4>Time</h4>

<div class='note'>
It's a legacy of the charter that time is a top level section. Time is a specific kind of value, and should be folded into the "value" section.
</div>


<p><dfn title="dfn-time">Time instants</dfn> are defined according to xsd:dateTime [[!XMLSCHEMA-2]].</p> 



<p>Time is OPTIONAL in usage, generation, and activity</p>





</section>

</section>

</section>


<section  id="common-relations">
<h2>PROV-DM Common Relations</h2>

<p>The following figure summarizes the additional relations described in this section.
</p>

<div style="text-align: center;">
<figure>
<img src="commonRelations.svg" alt="common relations"/>
<figcaption>PROV-DM Common Relations</figcaption>
</figure>
</div>





<section id="term-Revision">
<h3>Revision</h3>

<p> A <dfn title="dfn-Revision">revision</dfn> is the result of revising an entity into a revised version.
 Deciding whether something is made available as a revision of something else usually involves an agent who takes responsibility for approving that the former is a due variant of the latter.
 The agent who is responsible for the revision may optionally be specified.
 Revision is a particular case of  <a href="#Derivation-Relation">derivation</a> of an entity into its revised version.</p>

<p> A revision relation<span class="withAsn">, written <span class="name">wasRevisionOf(id,e2,e1,ag,attrs)</span> in PROV-ASN,</span> contains:</p>
<ul>
<li><em>id</em>: an OPTIONAL identifier for the relation;</li> 
<li><em>newer</em>: the identifier of the revised  entity;
<li><em>older</em>: the identifier of the older entity;
<li><em>responsibility</em>: an OPTIONAL  identifier for the agent who approved the newer entity as a variant of the older;
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs to further describe the properties of this relation.</li>
</ul>



<div class="anexample">
<p>
Revisiting the example of <a href="#section-example-a">Section 3.1</a>,
we can now state that the report 
 <span class="name">tr:WD-prov-dm-20111215</span> is a revision of 
 the report <span class="name">tr:WD-prov-dm-20111018</span>, approved by
agent  <span class="name">w3:Consortium</span>.
<pre class="codeexample">
entity(tr:WD-prov-dm-20111215, [ prov:type="pr:RecsWD" %% xsd:QName ])
entity(tr:WD-prov-dm-20111018, [ prov:type="pr:RecsWD" %% xsd:QName ])
wasRevisionOf(tr:WD-prov-dm-20111215, tr:WD-prov-dm-20111018, w3:Consortium)
</pre>
</div>



</section>  <!-- end revision -->


<section id="term-attribution">
<h3>Attribution</h3> 

<p><dfn id="dfn-attribution">Attribution</dfn> is the ascribing of an entity to an agent. More precisely, when an entity  <span class="name">e</span> is attributed to agent  <span class="name">ag</span>, entity <span class="name">e</span> was generated by some activity <span class="name">a</span>, which in turn was associated to agent  <span class="name">ag</span>. Thus, this relation is useful when the activity is not known, or irrelevant.

<p> An attribution relation<span class="withAsn">, written <span class="name"> wasAttributedTo(id,e,ag,attr)</span> in PROV-ASN,</span> contains the following elements:</p>
<ul>
<li><em>id</em>: an OPTIONAL identifier for the relation;</li> 
<li><em>entity</em>: an entity identifier;</li>
<li><em>agent</em>: the identifier of the agent whom the entity is ascribed to;</li>
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs to further describe the properties of the relation.</li>
</ul>

<div class="anexample">
<p>
Revisiting the example of <a href="#section-example-b">Section 3.2</a>,
we can ascribe <span class="name">tr:WD-prov-dm-20111215</span> to some agents without having to make an activity explicit.
<pre class="codeexample">
agent(ex:Paolo, [ prov:type="Human" ])
agent(ex:Simon, [ prov:type="Human" ])
entity(tr:WD-prov-dm-20111215, [ prov:type="pr:RecsWD" %% xsd:QName ])
wasAttributedTo(tr:WD-prov-dm-20111215, ex:Paolo, [prov:role="editor"])
wasAttributedTo(tr:WD-prov-dm-20111215, ex:Simon, [prov:role="contributor"])
</pre>
</div>

</section>  <!-- end attribution -->

<section id="term-OrderingOfActivities">
<h3>Activity Ordering</h3>


<p>The following  relations express dependencies amongst activities.</p>

<ul>
  <li> An <dfn title="InformationFlowOrdering">information flow ordering relation</dfn> states that activity  <span class="name">a2</span> is dependent on another <span class="name">a1</span>, by way of some entity <span class="name">e</span> that is generated by <span class="name">a1</span> and used by <span class="name">a2</span>.
    <li>A <dfn title="ControlOrdering">control ordering relation</dfn> states that  activity <span class="name">a2</span> was initiated by another activity <span class="name">a1</span>.
</ul>

<p>
An information flow ordering relation<span class="withAsn">, written as 
<span class="name">wasInformedBy(id,a2,a1,attrs)</span> in PROV-ASN,</span> contains: 
<ul>
<li><em>id</em>:  an OPTIONAL identifier  identifying the relation;</li> 
<li><em>informed</em>: the identifier of the informed activity;
<li><em>informant</em>: the identifier of the informant activity;
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs to further describe properties of the relation.</li>
</ul>
<p> Relation <span class="name">wasInformedBy</span> is not transitive.</p>


<div class="anexample">
<p>
Consider two long running services, which we represent by activities  <span class="name">s1</span> and <span class="name">s2</span>.  
<pre class="codeexample">
activity(s1,,,[prov:type="service"])
activity(s2,,,[prov:type="service"])
wasInformedBy(s2,s1)
</pre>
The last line indicates that some entity was generated by  <span class="name">s1</span> and used by  <span class="name">s2</span>.
</div>


<p>
A control ordering relation<span class="withAsn">, written as 
<span class="name">wasStartedBy(id, a2, a1, attrs)</span> in PROV-ASN,</span> contains: </p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier of the relation;</li> 
<li><em>started</em>: the identifier of  the started activity;
<li><em>starter</em>: the identifier of the activity that started the other;</li>
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs to further describe the properties of the relation.</li>
</ul>




<div class="anexample">
<p>
Suppose activities <span class="name">a1</span> and <span class="name">a2</span> are computer processes that are executed on different hosts, and that <span class="name">a1</span> started <span class="name">a2</span>. This can be expressed as in the following fragment:</p>
<pre class="codeexample">
activity(a1,t1,t2,[ex:host="server1.example.org",prov:type="workflow"])
activity(a2,t3,t4,[ex:host="server2.example.org",prov:type="subworkflow"])
wasStartedBy(a2,a1)
</pre>
</div>

</section>

<section id="term-traceability">
<h3>Traceability</h3>

<p> A <dfn title="dfn-Traceability">traceability relation</dfn> between two entities  <span class="name">e2</span> and  <span class="name">e1</span> is a generic dependency of <span class="name">e2</span>
on  <span class="name">e1</span> that indicates either that <span class="name">e1</span> was necessary for <span class="name">e2</span> to be created, or that <span class="name">e1</span> bears 
some responsibility for  <span class="name">e2</span>'s existence.


<p> A traceability relation<span class="withAsn">, written <span class="name">tracedTo(id,e2,e1,attrs)</span> in PROV-ASN,</span> contains:</p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier identifying the relation;</li> 
<li><em>entity</em>:  an identifier identifying an entity;
<li><em>ancestor</em>: an identifier identifying an ancestor entity that the former depends on;
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs to further describe properties of the relation.</li>
</ul>
<p>We note that the ancestor is allowed to be an agent since agents are entities. </p>

<div class="anexample">
<p>We refer to the example of <a href="#section-example-a">Section 3.1</a>, and specifically to <a href="#prov-tech-report">Figure prov-tech-report</a>. We can see that there is a path from 
<span class="name">tr:WD-prov-dm-20111215</span> to 
<span class="name">w3:Consortium</span> or to
<span class="name">pr:rec-advance</span>. This is expressed as follows.
<pre class="codeexample">
 tracedTo(tr:WD-prov-dm-20111215,w3:Consortium)
 tracedTo(tr:WD-prov-dm-20111215,pr:rec-advance)
</pre>
</div>


<p>Further considerations:</p>
<ul>
  <li>Traceability is more general than <a href="#Derivation-Relation">Derivation</a>.
</ul>


<div class='note'>
  I propose to delete the following, given that this document does not mention inferences.  [LM]
<p>Further considerations:</p>
<ul>
  <li>Traceability is more general than <a href="#Derivation-Relation">Derivation</a>. This means that an assertion of the form: <span class="name">tracedTo(...,e2,e1,...)</span> can be inferred from an assertion of the form:
  <span class="name">wasDerivedFrom(e2,e1,..)</span>. The precise inference rules are specified in [REF].
 <li>Traceability is related to responsibility by way of inference rules that involve <a href="#term-responsibility">responsibility chain</a> and <a href="#term-Generation">generation</a> relations.
  These rules are specified in [REF]
</ul>
</div>

<div class="note">looking at the definition, there is something wrong. It's not true that e2 was neceaary for e1 (in the transitive case) and
that e1 bears responsibility. [LM]</div>
</section>



<section id="term-quotation">
<h3>Quotation</h3>

<div class="note">I find that quotation is really a misnomer. This expands into derivation with attribution, in what sense is the derived entity a "quote" of the original?  . The agent that is quoted is particularly obscure. It does not seem to be involved in the quoting at all.  Why isn't quoting an activity with the quoting agent associated with it? [PM]</div>

<p> A <dfn>quotation</dfn>
 is the repeat of an entity (such as text or image) by
someone other that its original author. Quotation
 is a particular case of  <a href="#Derivation-Relation">derivation</a> in which entity <span class="name">e2</span> is derived from entity <span class="name">e1</span> by copying, or "quoting", parts of it.</p>

<p>  A quotation relation<span class="withAsn">, written <span class="name"> wasQuotedFrom(id,e2,e1,ag2,ag1,attrs)</span> in PROV-ASN,</span> contains:</p>
<ul>
<li><em>id</em>: an OPTIONAL identifier for the relation;</li> 
<li><em>quote</em>:  an identifier  of the entity that represents the quote (the partial copy);
<li><em>quoted</em>: an identifier  of the original entity being quoted;
<li><em>quoterAgent</em>: an OPTIONAL identifier of the agent who is doing the quoting;
<li><em>quotedAgent</em>: an OPTIONAL identifier of the agent who attributed to the original entity;
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs to further describe the properties of the relation.</li>

</ul>

</section>  <!-- end quotation -->


<section id="term-summary">
<h3>Summary</h3>

<div class="note">Omitted as this is likely to be removed [PM]</div>

<div class='issue'>Drop this relation  <a href="http://www.w3.org/2011/prov/track/issues/220">ISSUE-220</a>.</div>


</section>  <!-- end summary -->


<section id="term-orignal-source">
<h3>Original Source</h3>

<div class="note"> I find this relation confusing. Please add an example. I wouldn't really know when to use this. [PM]</div>

<p> An <dfn>original source relation</dfn> is a particular case of <a href="#Derivation-Relation">derivation</a> that states that an entity <span class="name">e2</span> (derived) was originally part of some other entity <span class="name">e1</span> (the original source).</p>

<p> An original source relation<span class="withAsn">, written <span class="name"> hadOriginalSource(id,e2,e1,attrs)</span>,</span> contains:</p>
<ul>
<li><em>id</em>:  an OPTIONAL identifier identifying the relation;</li> 
<li><em>derived</em>: an identifier for the derived entity; </li>
<li><em>source</em>: an identifier  for the original source entity;</li>
<li><em>attributes</em>: an OPTIONAL set of attribute-value pairs to further describe the properties of the relation.</li>
</ul>

</section>  <!-- end original source -->



<section id="term-Collection">
<h3>Collections</h3>

<p><strong>Collection relations</strong> address the need to describe the evolution of entities that have a collection structure, that is, which may contain other entities. Specifically, this section exploits the built-in type for entities, called <a title="concept-collection">collection</a>, and two relations to describe the effect of adding elements to, and removing elements from, a collection entity.
The intent of these relations and entity types is to capture the <em>history of changes that occurred to a collection</em>. </p>

<p>A collection is an entity that has a logical internal structure consisting of key-value pairs, often referred to as a map.
More precisely, the following entity types are introduced:

<ul>
  <li> <span class="name">Collection</span>  denotes an entity of type collection, i.e. an entity that  can participate in insertion and removal relations;

  <li><span class="name">EmptyCollection</span> denotes an empty collection.
</ul>

The following relations relate a collection <span class="name">c1</span> with a collection <span class="name">c2</span> obtained after adding or removing a new pair to (resp. from) <span class="name">c1</span>:

<ul>
  <li>Insertion relation <span class="name">CollectionAfterInsertion(c2, c1, k, v)</span> states that  <span class="name">c2</span> is the state of the collection
following the insertion of pair <span class="name">(k,v)</span> into collection  <span class="name">c1</span>;</li>

<li>  Removal relation <span class="name">CollectionAfterRemoval(c2,c1, k)</span> states that  <span class="name">c2</span> is  the  state of the collection following the removal of the pair corresponding to key  <span class="name">k</span> from  <span class="name">c1</span>.</li>

</ul>

<div class="anexample">
<pre class="codeexample">
   entity(c, [prov:type="EmptyCollection"])    // e is an empty collection
   entity(v1)
   entity(v2)
   entity(c1, [prov:type="Collection"])
   entity(c2, [prov:type="Collection"])
  
  CollectionAfterInsertion(c1, c, "k1", v1)       // c1 = { ("k1",v1) }
  CollectionAfterInsertion(c2, c1, "k2", v2)      // c2 = { ("k1",v1), ("k2", v2) }
  CollectionAfterRemoval(c3, c2, k1)              // c3 = { ("k2",v2) }
</pre>
</div>


<p> A relation CollectionAfterInsertion<span class="withAsn">, written <span class="name"> CollectionAfterInsertion(collAfter, collBefore, key, value)</span>,</span> contains:</p>
<ul>
<li><em>after</em>: an identifier for the collection <em>after</em> insertion; </li>
<li><em>before</em>: an identifier for the collection <em>before</em> insertion;</li>
<li><em>key</em>: the key that has been inserted</li>
<li><em>value</em>: an identifier  for the value that has been inserted with the key.</li>
</ul>

<p> A relation CollectionAfterDeletion, written <span class="name"> CollectionAfterDeletion(collAfter, collBefore, key)</span>, contains:</p>
<ul>
<li><em>after</em>: an identifier  for the collection  <em>after</em> the deletion; </li>
<li><em>before</em>: an identifier  for the collection <em>before</em> the deletion;</li>
<li><em>key</em>: the key corresponding to the (key, value) pair that has been deleted from the collection.</li>
</ul>

<div class='note'>
I propose to call them afterInsertion instead of CollectionAfterInsertion (likewise, for deletion).
What about attributes and optional Id?
</div>


<p>Further considerations:</p>

<ul>
  <li>The <strong>map</strong> collection type provides a generic indexing structure that can be used to model commonly used data structures, including associative lists (also known as "dictionaries" in some programming languages), relational tables, ordered lists, and more (the specification of such specialized structures in terms of key-value pairs is out of the scope of this document).</li>

<li>Keys are literals, and values are entities. This allows expressing nested collections, that is, collections whose values include entities of type collection.</li>

<li>Insertion and removal relations are a particular case of <a href="#Derivation-Relation">derivation</a>.</li>

 <li>This representation of a collection's evolution makes no assumption regarding the underlying data structure used to store and manage collections. In particular, no assumptions are needed regarding the mutability of a data structure that is subject to updates.   In fact, the state of a collection (i.e., the set of key-value pairs it contains) at a given point in a sequence of operations is never stated explicitly. Rather, it can be obtained by querying the chain of derivations involving insertions and removals. Entity type <span class="name">emptyCollection</span> can be used in this context as it marks the start of a sequence of collection operations.</li>


<!-- 
  <li> One can have multiple assertions regarding the state of a collection following a <em>set</em> of insertions, for example:<br/>
<span class="name">CollectionAfterInsertion(c2,c1, k1, v1)</span><br/>
<span class="name">CollectionAfterInsertion(c2,c1, k2, v2)</span><br/>
  <span class="name">...</span><br/>
This is interpreted as <em>" <span class="name">c2</span> is the state that results from inserting  <span class="name">(k1, v1)</span>,  <span class="name">(k2, v2)</span> etc. into  <span class="name">c1</span>"</em></li></p>

<li> It is possible to have multiple derivations from a single root collection, possibly by different asserters, as shown in the following example.

<div class="anexample">
<pre class="codeexample">
  entity(c, [prov:type="EmptyCollection"])    // e is an empty collection
  entity(v1)
  entity(v2)
  entity(v3)
  entity(c1, [prov:type="Collection"])
  entity(c2, [prov:type="Collection"])
  entity(c3, [prov:type="Collection"])
  
  CollectionAfterInsertion(c1, c, k1, v1)       // c1 = { (k1,v1) }
  CollectionAfterInsertion(c2, c, k2, v2)       // c2 = { (k2 v2) }
  CollectionAfterInsertion(c3, c1, k3,v3)       // c3 = { (k1,v1),  (k3,v3) }
</pre>
</div>

<div class='note'>Asserter not defined</div>
</li></p>


<li>Given the pair of assertions:

<span class="name">CollectionAfterInsertion(c, c1, k1, v1)</span><br/>
<span class="name">CollectionAfterInsertion(c, c2, k2, v2)</span><br/>

it follows that <span class="name">c1==c2, k1==k2, v1==v2</span>, because one cannot have two different derivations for the same final collection state.</li></p>


<li>Given the following set of insertions:<br/>

<span class="name">CollectionAfterInsertion(c1, c, k, v1)</span><br/>
<span class="name">CollectionAfterInsertion(c1, c, k, v2)</span><br/>

it follows that  <span class="name">v1==v2</span>.</li></p>


<li> The state of a collection is only known to the extent that a chain of derivations starting from an empty collection can be found. Since a set of assertions regarding a collection's evolution may be incomplete, so is the reconstructed state obtained by querying those assertions. In general, all assertions reflect the asserter's partial knowledge of a sequence of data transformation events. In the particular case of collection evolution, in which the asserter  <em>knows</em> that some of the state changes may have been missed, then the more generic  <a href="#Derivation-Relation">derivation</a> relation should be used to signal that some updates may have occurred, which cannot be precisely asserted as insertions or removals. The following two examples illustrate this.

<div class="anexample">
<pre class="codeexample">
  entity(c, [prov:type="collection"])    // e is a collection, possibly not empty
  entity(v1)
  entity(v2, [prov:type="collection"])    // v2 is a collection

  CollectionAfterInsertion(c1, c, k1, v1)       // c1 <em>includes</em> { (k1,v1) } but may contain additional unknown pairs
  CollectionAfterInsertion(c2, c1, k2, v2)      // c2 includes { (k1,v1), (k2 v2) } where v2 is a collection with unknown state
</pre>
</div>
  In the example, the state of <span class="name">c2</span> is only partially known because the collection is constructed from partially known other collections.

<div class="anexample">
<pre class="codeexample">
  entity(c, [prov:type="emptyCollection"])    // e is an empty collection
  entity(v1)
  entity(v2)

  CollectionAfterInsertion(c1, c, k1, v1)       // c1 = { (k1,v1) }
  wasDerivedFrom(c2, c1)                        // the asserted knows that c2 is somehow derived from c1, but cannot assert the precise sequence of updates
    CollectionAfterInsertion(c3, c2, k2, v2)       
</pre>
</div>
Here  <span class="name">c3</span> includes <span class="name">{ (k2 v2) }</span> but the earlier "gap" leaves uncertainty regarding  <span class="name">(k1,v1)</span>  (it may have been removed) or any other pair that may have been added as part of the derivation activities.</li></p>
-->
</ul>
<div class='note'>Deleted further items. Some of them are constraints which belong to part 2.</div>


</section>   <!-- end collections-->


</section>

<!-- end sec. 5 -->

    <section id="extensibility-section"> 
<h2>PROV-DM Extensibility Points</h2>


<p>The PROV data model provides several extensibility points that allow designers to specialize it to specific applications or domains. We summarize these extensibility points here:

<ul>
<li> Attributes occur in all elements and relations of the data model.  Applications are free to introduce 
application-specific attributes, according to their perspective on the world.  Attributes for a given application can be distinguished by qualifying them with a prefix denoting a namespace
declared in a namespace declaration.

<p>The <a href="#prov-dm-namespace">PROV-DM namespace</a> declares a set of reserved attributes catering for extensibility: <span class="name">type</span>, <span
class="name">location</span>.</li>


<li> Sets of Attribute-value pairs offer a mechanism to
describe modalities of use, generation, activity association, and responsibility chain.  
Such attributes are also qualified by namespaces.

<p>To this end, the <a href="#prov-dm-namespace">PROV-DM namespace</a> declares a reserved attribute: <span class="name">role</span>.</p></li>


<li>Notes allow arbitrary metadata to be associated with anything identifiable in PROV-DM. Notes consist of name-value pairs. Like attributes, names are qualified by a
namespace.</li>


<li>Namespaces allow attributes and names to be qualified. </li>

<li>Sub-typing of elements and relations is allowed by means of the reserved attribute <span class="name">type</span>.</li>

<li>Domain specific values can be expressed by means of typed literals. </li>
</ul>

<p>The PROV data model is designed to be application and technology independent, but specializations of PROV-DM are welcome and encouraged.  To ensure interoperability, specializations of
the PROV data model that exploit the extensibility points summarized in this section MUST preserve the semantics specified in the PROV-DM documents (part 1 to 3). </p>



    </section> 



<section id="FurtherConsiderations">
<h4>Data Model Constraints</h4>


<ul>

<li>This specification defines PROV-DM, a data model that allows 
descriptions of the people, institutions, entities, and activities,
involved in producing, influencing, or delivering a piece of data or a
thing to be expressed.  However, with this data model, it is also possible to compose
descriptions that would not make sense: for instance, one could
express that an entity was used before it was generated, or that the
activity that generated an entity began its existence after the entity
generation.  A set of consistency constraints have been defined for PROV-DM and
can be found in a companion specification [[PROV-DM-CONSTRAINTS]].
They can be used by asserters as a guideline for composing provenance descriptions that are consistent, and
by implementers of reasoning engines. </li>



<li>
<p> The example of <a href="#prov-dm-example">section 3</a> contains identifiers such as <span class="name"><a href="http://www.w3.org/TR/2011/WD-prov-dm-20111215">tr:WD-prov-dm-20111215</a></span>, which denotes a specific version of a technical report.  On the other hand, a URI such as <a href="http://www.w3.org/TR/prov-dm/">http://www.w3.org/TR/prov-dm/</a> points to the latest version of a document. One needs to ensure that provenance descriptions for the latter document remain valid as denoted resources change. </p>

<p>To this end, PROV-DM allows asserters to describe "<em>partial states</em>" of entities by means of attributes and associated values. Some further constraints apply to the use of these attributes, since the values associated with them are expected to remain unchanged for some period of time. The constraints associated to attributes are also specified in the companion specification [[PROV-DM-CONSTRAINTS]].</p>


</li>


<li>The existence of some mechanism(s)  by which a set of provenance descriptions can be bundled up and named is assumed.  No such mechanism is considered as mature for standardization, and therefore such mechanisms remain outside the scope of PROV-DM.   Various ways of achieving this functionality exist, for instance, by:
<ul>
<li> bundling up a set of descriptions in a file and exposing it as a Web resource;</li>
<li> relying on specific serializations to name bundles of descriptions;</li>
<li> using the idea of a service that is capable of associating provenance descriptions to whom they are attributed to.</li>
</ul>
<p>Even though a mechanism for blundling up provenance descriptions and naming them is not part of PROV-DM, the idea of a bundle of descriptions is crucial to the PROV approach. Indeed, it allows multiple provenance perspectives to be provided for a given entity. It is also the mechanism by which provenance of provenance can be expressed. Such a named bundle is being referred to as an <dfn>account</dfn> and is regarded as an <a title="concept-accountEntity">AccountEntity</a> so that its provenance can be expressed.   The notion of account is specified in the companion specification [[PROV-DM-CONSTRAINTS]], as well as constraint that  <dfn>structurally well-formed</dfn> descriptions are expected to satisfy.</p>
</li>


</ul>


</section>

<div id="glossary_div" class="remove">
<!-- glossary loaded from glossary.js will be hooked up here,
     class remove, will remove this element from the final output.
-->
</div>

 </body>
</html>
