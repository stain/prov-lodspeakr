<!DOCTYPE html>

<html>
  <head>
    <title>PROV-AQ: Provenance Access and Query</title>
    <link rel="stylesheet" type="text/css" href="css/respec.css" />
    <link rel="stylesheet" type="text/css" href="css/prov-aq.css" />
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
<!--  Use common W3C-hosted version of ReSpec.js:
-->
    <script src="http://dev.w3.org/2009/dap/ReSpec.js/js/respec.js" class="remove"></script>
<!--  Use local version of ReSpec.js for debugging:
    <script src="js/respec.js" class="remove"></script>
-->
    <script class='remove'>
      var addExtraReferences = function() {
          for (var k in extraReferences)
              berjon.biblio[k] = extraReferences[k];
      };
      var extraReferences = {

        "LINK-REL" : "M. Nottingham, <a href='http://www.ietf.org/rfc/rfc5988.txt'><cite>Web Linking</cite></a>, October 2010, Internet RFC 5988. URL: <a href='http://www.ietf.org/rfc/rfc5988.txt'>http://www.ietf.org/rfc/rfc5988.txt</a>",

        "RFC2387" : "E. Levinson. <a href=\"http://www.ietf.org/rfc/rfc2387.txt\"><cite>The MIME Multipart/Related Content-type.</cite></a> August 1998. Internet RFC 2387. URL: <a href=\"http://www.ietf.org/rfc/rfc2387.txt\">http://www.ietf.org/rfc/rfc2387.txt</a>",

        "RFC2392" : "E. Levinson. <a href=\"http://www.ietf.org/rfc/rfc2392.txt\"><cite>Content-ID and Message-ID Uniform Resource Locators.</cite></a> August 1998. Internet RFC 2392. URL: <a href=\"http://www.ietf.org/rfc/rfc2392.txt\">http://www.ietf.org/rfc/rfc2392.txt</a>",

        "RFC3297" : "G. Klyne; R. Iwazaki; D. Crocker. <a href=\"http://www.ietf.org/rfc/rfc3297.txt\"><cite>Content Negotiation for Messaging Services based on Email.</cite></a> July 2002. Internet RFC 3297. URL: <a href=\"http://www.ietf.org/rfc/rfc3297.txt\">http://www.ietf.org/rfc/rfc3297.txt</a>",

        "PRISM" : "International Digital Enterprise Alliance, Inc. <a href=\"http://www.prismstandard.org/specifications/2.0/PRISM_prism_namespace_2.0.pdf\"><cite>PRISM: Publishing Requirements for Industry Standard Metadata</cite></a>. February 2008. URL: <a href=\"http://www.prismstandard.org/specifications/2.0/PRISM_prism_namespace_2.0.pdf\">http://www.prismstandard.org/specifications/2.0/PRISM_prism_namespace_2.0.pdf</a>",

        "FABIO" : "D. Shotton; S. Peroni. <a href=\"http://speroni.web.cs.unibo.it/cgi-bin/lode/req.py?req=http:/purl.org/spar/fabio#namespacedeclarations\"><cite>FaBiO, the FRBR-aligned Bibliographic Ontology.</cite></a> June 2011. URL: <a href=\"http://speroni.web.cs.unibo.it/cgi-bin/lode/req.py?req=http:/purl.org/spar/fabio#namespacedeclarations\">http://speroni.web.cs.unibo.it/cgi-bin/lode/req.py?req=http:/purl.org/spar/fabio#namespacedeclarations</a>",

        "URI-template": 
          "J. Gregorio; R. Fielding; M. Hadley; M. Nottingham; D. Orchard. "+
          "<a href=\"http://tools.ietf.org/html/rfc6570\"><cite>URI Template</cite></a>. "+
          "March 2012, Internet RFC 6570. "+
          "URL: <a href=\"http://tools.ietf.org/html/rfc6570/\"><cite>http://tools.ietf.org/html/rfc6570</cite></a>",

        "REST":
          "R. Fielding. "+
          "<a href=\"http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm\"><cite>Representational State Transfer (REST)</cite></a>. "+
          "2000, Ph.D. dissertation. "+
          "URL: <a href=\"http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm\"http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm>http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm</a>",

        "REST-APIs": 
          "R. Fielding. "+
          "<a href=\"http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven\"><cite>REST APIs must be hypertext driven</cite></a>. "+
          "October 2008 (blog post), "+
          "URL: <a href=\"http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven\">http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven</a>",

        "PROV-DM":
          "L. Moreau; P. Missier. "+
          "<a href=\"http://www.w3.org/TR/prov-dm/\"><cite>The PROV Data Model and Abstract Syntax Notation</cite></a>. "+
          "2011, Work in progress. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-dm/\">http://www.w3.org/TR/prov-dm/</a>",

        "PROV-O":
          "S. Sahoo; D. McGuinness. "+
          "<a href=\"http://dvcs.w3.org/hg/prov/raw-file/default/ontology/ProvenanceFormalModel.html\"><cite>PROV Ontology Model</cite></a>. "+
          "2011, Work in progress. "+
          "URL: <a href=\"http://dvcs.w3.org/hg/prov/raw-file/default/ontology/ProvenanceFormalModel.html/\">http://dvcs.w3.org/hg/prov/raw-file/default/ontology/ProvenanceFormalModel.html</a>",

        "SPARQL-SD":
          "G. T. Williams. "+
          "<a href=\"http://www.w3.org/TR/sparql11-service-description/\"><cite>SPARQL 1.1 Service Description</cite></a>. "+
          "2011, Work in progress. "+
          "URL: <a href=\"http://www.w3.org/TR/sparql11-service-description/\">http://www.w3.org/TR/sparql11-service-description/</a>",

        "SPARQL-HTTP":
          "Chimezie Ogbuji. "+
          "<a href=\"http://www.w3.org/TR/sparql11-http-rdf-update/\"><cite>SPARQL 1.1 Service Description</cite></a>. "+
          "2011, Work in progress. "+
          "URL: <a href=\"http://www.w3.org/TR/sparql11-http-rdf-update/\">http://www.w3.org/TR/sparql11-http-rdf-update/</a>",

      };
      var respecConfig = {
          // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
          specStatus:           "ED",
          
          // the specification's short name, as in http://www.w3.org/TR/short-name/
          shortName:            "prov-aq",

          // if your specification has a subtitle that goes below the main
          // formal title, define it here
          // subtitle   :  "an excellent document",

          // if you wish the publication date to be other than today, set this
        // publishDate:  "2012-06-19",

          // if the specification's copyright date is a range of years, specify
          // the start date here:
          copyrightStart: "2012",

          // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
          // and its maturity status
          previousPublishDate:  "2012-01-10",
          previousMaturity:  "WD",

          // if there a publicly available Editor's Draft, this is the link
          edDraftURI:           "http://dvcs.w3.org/hg/prov/raw-file/tip/paq/prov-aq.html",
          //edDraftURI:           "http://dvcs.w3.org/hg/prov/raw-file/tip/paq/working/prov-aq.html",

          // if this is a LCWD, uncomment and set the end of its review period
          // lcEnd: "2009-08-05",

          // if you want to have extra CSS, append them to this list
          // it is recommended that the respec.css stylesheet be kept
          extraCSS:             ["http://dev.w3.org/2009/dap/ReSpec.js/css/respec.css"],
          //extraCSS:             [],

          // editors, add as many as you like
          // only "name" is required
          editors:  [
              { name: "Graham Klyne", url: "",
                company: "University of Oxford", companyURL: "http://www.ox.ac.uk/" },
                
              { name: "Paul Groth", url: "",
                company: "VU University Amsterdam", companyURL: "http://www.vu.nl/" },
          ],

          // authors, add as many as you like. 
          // This is optional, uncomment if you have authors as well as editors.
          // only "name" is required. Same format as editors.

          //authors:  [
          //    { name: "Your Name", url: "http://example.org/",
          //      company: "Your Company", companyURL: "http://example.com/" },
          //],
 
          // authors, add as many as you like. 
          // This is optional, uncomment if you have authors as well as editors.
          // only "name" is required. Same format as editors.

          authors:  [
              { name: "Luc Moreau", url: "http://www.ecs.soton.ac.uk/~lavm/",
                company: "University of Southampton" },
              { name: "Olaf Hartig", url: "http://olafhartig.de/",
                company: "Invited Expert"},
              { name: "Yogesh Simmhan",
                company: "Invited Expert"},
              { name: "James Myers", url:"http://www.rpi.edu/research/ccni/",
                company: "Rensselaer Polytechnic Institute"},
              { name: "Timothy Lebo", url:"http://tw.rpi.edu/web/person/TimLebo",
                company: "Rensselaer Polytechnic Institute"},
              { name: "Khalid Belhajjame", url: "http://semanticweb.org/wiki/Khalid_Belhajjame",
                company: "University of Manchester" },
              { name: "Simon Miles", 
                company: "Invited Expert", url:"http://www.inf.kcl.ac.uk/staff/simonm/" },
          ],
          
          // name of the WG
          wg:           "Provenance Working Group",
          
          // URI of the public WG page
          wgURI:        "http://www.w3.org/2011/prov",
          
          // name (with the @w3c.org) of the public mailing to which comments are due
          wgPublicList: "public-prov-comments",
          
          // URI of the patent status for this WG, for Rec-track documents
          // !!!! IMPORTANT !!!!
          // This is important for Rec-track documents, do not copy a patent URI from a random
          // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
          // Team Contact.
          wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/46974/status",
          
          // Add extraReferences to bibliography database
          preProcess: [addExtraReferences],
      };
    </script>
  </head>
  <body>


    <section id='abstract'>
This document specifies how to use standard Web protocols,
including HTTP, to obtain information about the provenance of
resources on the Web. We describe both simple access mechanisms for
locating provenance information associated with web pages or resources, and
provenance query services for more complex deployments. This is
part of the larger W3C Prov provenance framework.
    </section>

    <section id="sotd">
      This document is part of a set of specifications produced by the W3C provenance working group to define interoperable interchange of provenance information in heterogeneous environments such as the Web.  It describes the use of existing web mechanisms for discovery and retrieval of provenance information. 
      
      <h4>PROV Family of Specifications</h4>
The PROV family of specifications aims to define the various aspects that are necessary to achieve the vision of inter-operable
interchange of provenance information in heterogeneous environments such as the Web.  
The specifications are as follows.
<ul>
<li> PROV-DM, the PROV data model for provenance,</li>
<li> PROV-DM-CONSTRAINTS, a set of constraints applying to the PROV data model,</li>
<li> PROV-N, a notation for provenance aimed at human consumption,</li>
<li> PROV-O, the PROV ontology, an OWL-RL ontology allowing the mapping of PROV to RDF,</li>
<li> PROV-AQ, the mechanisms for accessing and querying provenance (this document), </li>
<li> PROV-PRIMER, a primer for the PROV data model,</li>
<li> PROV-SEM, a formal semantics for the PROV data model.</li>
<li> PROV-XML, an XML schema for the PROV data model.</li>
</ul>
<h4>How to read the PROV Family of Specifications</h4>
<ul>
<li>The primer is the entry point to PROV offering a pedagogical presentation of the provenance model.</li>
<li>The Linked Data and Semantic Web community should focus on PROV-O defining PROV classes and properties specified in an OWL-RL ontology. For further details, PROV-DM and PROV-DM-CONSTRAINTS specify the constraints applicable to the data model, and its interpretation. PROV-SEM provides a mathematical semantics.</li>
<li>The XML community should focus on PROV-XML defining an XML schema for PROV-DM. Further details can also be found in PROV-DM, PROV-DM-CONSTRAINTS, and PROV-SEM.</li>
<li>Developers seeking to retrieve or publish provenance should focus of PROV-AQ.</li>
<li>Readers seeking to implement other PROV serializations
should focus on PROV-DM and PROV-DM-CONSTRAINTS.  PROV-O, PROV-N, PROV-XML offer examples of mapping to RDF, text, and XML, respectively.</li>
</ul>
<h4>Second Public Working Draft</h4>
<p>
This is the second public working draft. The changes focus on revising the provenance-service specification to provide better guidance to developers as well as introducing better naming conventions for the use of link headers in locating provenance. 
</p>
    </section>


<!-- == Sect 1 =================================================================================== -->
    
    <section>
      <h2>Introduction</h2>
      <p>
        The Provenance Data Model [[PROV-DM]] and Provenance Ontology [[PROV-O]] specifications define how to represent provenance information in the World Wide Web.
      </p>
      <p>
        This note describes how standard web protocols may be used to locate, retrieve and query provenance information:
      </p>
        <ul>
          <li>
            Simple mechanisms for retrieving and discovering provenance information are described in <a href="#accessing-provenance-information" class="sectionRef"></a> and <a href="#locating-provenance-information" class="sectionRef"></a> .
          </li>
          <li>
            More advanced discovery service and query mechanisms that may be used for more demanding deployments are described in <a href="#provenance-services" class="sectionRef"></a>, <a href="#querying-provenance-information" class="sectionRef"></a> and <a href="#incremental-provenance-retrieval" class="sectionRef"></a>.
          </li>
        </ul>
     
      
      <section>
        <h2>Concepts</h2>
       
          <p>In defining the specification below, we make use of the following concepts. </p>
          <dl>
            <dt><dfn>Provenance information</dfn></dt>
            <dd>refers to provenance represented in some fashion.</dd>
            <dt><dfn>Provenance-URI</dfn></dt>
            <dd>a URI denoting some <a class="internalDFN">provenance information</a>.</dd>
            <dt><dfn>Constrained resource</dfn></dt>
            <dd>an aspect, version or instance of a <a class="internalDFN">resource</a>, about which one may wish to present some <a class="internalDFN">provenance information</a>. For example, a weather report for a given date may be an aspect of a resource that is maintained as the current weather report. A constrained resource is itself a <a class="internalDFN">resource</a>, and may have it's own URI different from that of the original.  See also [[PROV-DM]], and [[WEBARCH]] <a href="http://www.w3.org/TR/webarch/#representation-reuse">section 2.3.2</a>.</dd>
            <dt><dfn>Target-URI</dfn></dt>
            <dd>a URI denoting a <a class="internalDFN">resource</a> (including any <a class="internalDFN">constrained resource</a>), which identifies that resource for the purpose of finding and expressing <a class="internalDFN">provenance information</a> associated with it (see <a href="#provenance-entities-resources" class="sectionRef"></a> for discussion)</dd>
            <dt><dfn>Provenance service</dfn></dt>
            <dd>a service that provides <a class="internalDFN">provenance information</a> given a <a class="internalDFN">target-URI</a>.</dd>
            <dt><dfn>Service-URI</dfn></dt>
            <dd>the URI of a <a class="internalDFN">provenance service</a>.</dd>
<!--
            <dt><dfn>Resource</dfn></dt>
            <dd>also referred to as <dfn>resource on the Web</dfn>: a resource as described by the Architecture of the World Wide Web [[WEBARCH]], <a href="http://www.w3.org/TR/webarch/#id-resources">section 2.2</a>. A resource may be associated with multiple instances or views (<a class="internalDFN">constrained resource</a>s) with differing provenance.</dd>
-->
            <dt><dfn>Resource</dfn></dt>
            <dd>a resource in the general sense of "whatever might be identified by a URI", as described by the Architecture of the World Wide Web [[WEBARCH]], <a href="http://www.w3.org/TR/webarch/#id-resources">section 2.2</a>. A resource may be associated with multiple instances or views (<a class="internalDFN">constrained resource</a>s) with differing provenance.</dd>
          </dl>
       

      </section>

      <section>
        <h2 id="provenance-entities-resources">Provenance and resources</h2>
        <p>
          Fundamentally, <a class="internalDFN">provenance information</a> is <em>about</em> <a class="internalDFN">resource</a>s.  In general, resources may vary over time and context.  E.g., a resource describing the weather in London changes from day-to-day, or a listing of restaurants near you will vary depending on your location.  Provenance information, to be useful, must be persistent and not itself dependent on context.  Yet we may still want to make provenance assertions about dynamic or context-dependent resources (e.g. a weather forecast for London on a particular day may have been derived from a particular set of Meteorological Office data).
        </p>
        <p>
          Provenance descriptions of dynamic and context-dependent resources are possible through a notion of constrained resources.  A <a class="internalDFN">constrained resource</a> is simply a resource (in the sense defined by [[WEBARCH]], <a href="http://www.w3.org/TR/webarch/#id-resources">section 2.2</a>) that is a contextualized view or instance of some other resource.  For example, a W3C specification typically undergoes several public revisions before it is finalized.  A URI that refers to the "current" revision might be thought of as denoting the specification throughout its lifetime.  Each individual revision would also have its own <a class="internalDFN">target-URI</a> denoting the specification at that particular stage in its development.  Using these, we can make provenance assertions that a particular revision was published on a particular date, and was last modified by a particular editor.  Target-URIs may use any URI scheme, and are not required to be dereferencable.
        </p>
        <p>
           Requests for provenance about a resource may return provenance information that uses one or more target-URIs to refer to versions of that resource.  Some given provenance information may use multiple target-URIs if there are assertions referring to the same underlying resource in different contexts.  For example, provenance information describing a W3C document might include information about all revisions of the document using statements that use the different target-URIs of the various revisions.
        </p>
        <p>
          In summary, <a class="internalDFN">provenance information</a> may be not universally applicable to a <a class="internalDFN">resource</a>, but may be expressed with respect to that resource in a restricted context (e.g. at a particular time). This restriction is itself just another resource (e.g. the weather forecast for a give date as opposed to the current weather forecast), with its own URI for referring to it within provenance information.
        </p>
      </section>

      <section>
        <h2>Interpreting provenance information</h2>
        <p>
          Any given <a class="internalDFN">provenance information</a> may contain information about several resources, referring to them using their various <a class="internalDFN">target-URI</a>s.
          Thus, when interpreting provenance information, it is important to be aware that statements about several resources may be present, and to be accordingly selective when using the information provided.  (In some exceptional cases, it may be that the provenance information returned does not contain any information relating to a specific associated resource.)
        </p>
        <p>
          Provenance information is not of itself guaranteed to be authoritative or correct. Trust in provenance information must be determined separately from trust in the original resource. Just as in the web at large, it is a user's responsibility to determine an appropriate level of trust in any other resource; e.g. based on the domain that serves it, or an associated digital signature. (See also <a href="#security-considerations" class="sectionRef"></a>.)
        </p>

      </section>

    </section>
 
<!-- == Sect 2 =================================================================================== -->
    
    <section>
      <h2>Accessing provenance information</h2>
      <p>
        Web applications may access <a class="internalDFN">provenance information</a> in the same way as any resource on the Web, by dereferencing its URI. Thus, any provenance information may be associated with a <a class="internalDFN">provenance-URI</a>, and may be accessed by dereferencing that URI using web mechanisms.
      </p>
      <p>
        How much or how little provenance information is returned in response to a retrieval request is a matter for the provenance provider application.  
      </p>
      <p>
        It may be useful to provide provenance information through a service interface. A REST protocol for provenance retrieval is defined in Section <a href="#provenance-services" class="sectionRef"></a>.
      </p>
      <p>
        When publishing provenance information, a corresponding <a class="internalDFN">provenance-URI</a> or <a class="internalDFN">service-URI</a> should be discoverable using one or more of the mechanisms described in <a href="#locating-provenance-information" class="sectionRef"></a>.
      </p>
      <p>
        Some alternative practices for accessing provenance information are discussed in <a href="#best-practice" class="sectionRef"></a>
      </p>
    </section>
 
<!-- == Sect 3 =================================================================================== -->
    
    <section>
      <h2>Locating provenance information</h2>
      <p>
        When <a class="internalDFN">provenance information</a> is a resource that can be accessed using web retrieval, one needs to know its <a class="internalDFN">provenance-URI</a> to dereference.  If this is known in advance, there is nothing more to specify.  If a provenance-URI is not known then a mechanism to discover one must be based on information that is available to the would-be accessor. Likewise, provenance information may be exposed by a service. In this case, the <a class="internalDFN">service-URI</a> needs to be known. 
      </p>
      <p>Provenance information about a resource may be provided by several parties other than the provider of that resource, each using different locations, and each with different concerns.  (It is possible that these different parties may provide contradictory provenance information.)
      </p>
      <p>
      Once provenance information about a resource is retrieved, one may also need to know how to locate information about that resource within the provenance information. This may be a <a class="internalDFN">constrained resource</a> identified by a separate <a class="internalDFN">target-URI</a>.
      </p>
      <p>
        We start by considering mechanisms for the resource provider to indicate a <a class="internalDFN">provenance-URI</a> or <a class="internalDFN">Service-URI</a> along with a <a class="internalDFN">target-URI</a>.  
        Three mechanisms are described here:
      </p>
        <ul>
          <li>The requester knows the resource URI <em>and</em> the resource is accessible using HTTP</li>
          <li>The requester has a copy of a resource represented as HTML or XHTML</li>
          <li>The requester has a copy of a resource represented as RDF (including the range of possible RDF syntaxes, such as HTML with embedded RDFa)</li>
        </ul>
       <p>
        These particular cases are selected as corresponding to primary current web protocol and data formats.  Finally, in <a href="#arbitrary-data" class="sectionRef"></a>, we discuss the case of a resource in an unspecified format which has been provided by some means other than HTTP.
      </p>
      <p>
        The mechanisms specified for use with HTTP and HTML are similar to those proposed by POWDER [[POWDER-DR]] (sections <a href="http://www.w3.org/TR/2009/REC-powder-dr-20090901/#assoc-markup">4.1.1</a> and <a href="http://www.w3.org/TR/2009/REC-powder-dr-20090901/#httplink">4.1.3</a>).
      </p>

      <section>
        <h2>Resource accessed by HTTP</h2>
        <p>
          For a resource accessible using HTTP, provenance information may be indicated using an HTTP <code>Link</code> header field, as defined by <a href="http://tools.ietf.org/html/rfc5988">Web Linking (RFC 5988)</a> [[LINK-REL]].  The <code>Link</code> header field is included in the HTTP response to a GET or HEAD operation (other HTTP operations are not excluded, but are not considered here).
        </p>
A <code>provenance</code> link relation type for referencing provenance information is registered according to the template in <a href="#iana-considerations" class="sectionRef"></a>, and may be used as shown:  <pre class="pattern">Link: <cite>provenance-URI</cite>; rel="provenance"; anchor="<cite>target-URI</cite>"</pre> When used in conjunction with an HTTP success response code (<code>2xx</code>), this HTTP header field indicates that <code><cite>provenance-URI</cite></code> is the URI of some provenance information associated with the requested resource and that the associated resource is identified within the referenced provenance information as <code><cite>target-URI</cite></code>. (See also <a href="#interpreting-provenance-information" class="sectionRef"></a>.)
        <p>
        If no <code>anchor</code> parameter is provided then the <code><cite>target-URI</cite></code> is assumed to be the URI of the resource, used in the corresponding HTTP request.
        </p>
        <p>
          At this time, the meaning of these links returned with other HTTP response codes is not defined: future revisions of this specification may define interpretations for these.
        </p>
        <p>
          An HTTP response MAY include multiple <code>provenance</code> link header fields, indicating a number of different provenance resources that are known to the responding server, each providing provenance information about the accessed resource.
        </p>
        <p>
          The presence of a <code>provenance</code> link in an HTTP response does not preclude the possibility that other publishers may offer provenance information about the same resource.  In such cases, discovery of the additional provenance information must use other means (e.g. see <a href="#provenance-services" class="sectionRef"></a>).
        </p>
        <p>
          Provenance resources indicated in this way are not guaranteed to be authoritative.  Trust in the linked provenance information must be determined separately from trust in the original resource. Just as in the web at large, it is a user's responsibility to determine an appropriate level of trust in any other linked resource; e.g. based on the domain that serves it, or an associated digital signature. (See also <a href="#security-considerations" class="sectionRef"></a>.)
        </p>

        <section>
          <h2>Specifying Provenance Services</h2>
            <p>
              The resource provider may indicate that provenance information about the resource is provided by a <a class="internalDFN">provenance service</a>. This is done through the use of a <code>provenance-service</code> link relation type following the same pattern as above:
            </p>
            <pre class="pattern">
Link: <cite>provenance-service-URI</cite>; anchor="<cite>target-URI</cite>"; rel="provenance-service"</pre>
            <p>
              The <code>provenance-service</code> link identifies the <a class="internalDFN">service-URI</a>.  Dereferencing this URI yields a service description that provides further information to enable a client to determine a <a class="internalDFN">provenance-URI</a> or retrieve <a class="internalDFN">provenance information</a> for a <a class="internalDFN">resource</a>; see <a href="#provenance-services" class="sectionRef"></a> for more details.
            </p>
            <p>
            There may be multiple <code>provenance-service</code> link header fields, and these may appear in an HTTP response together with <code>provenance</code> link header fields (though, in simple cases, we anticipate that <code>provenance</code> and <code>provenance-service</code> link relations will not be used together).
          </p>
        </section>

      </section>

      <section>
        <h2>Resource represented as HTML</h2>
        <div>
          For a document presented as HTML or XHTML, without regard for how it has been obtained, provenance information may be associated with a resource by adding a <code>&lt;link&gt;</code> element to the HTML <code>&lt;head&gt;</code> section.
          Two new link relation types for referencing provenance information are registered according to the template in <a href="#iana-considerations" class="sectionRef"></a>, and may be used as shown:
          <pre class="pattern">
  &lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
     &lt;head&gt;
        &lt;link rel="provenance" href="<cite>provenance-URI</cite>"&gt;
        &lt;link rel="anchor" href="<cite>target-URI</cite>"&gt;
        &lt;title&gt;Welcome to example.com&lt;/title&gt;
     &lt;/head&gt;
     &lt;body&gt;
        ...
     &lt;/body&gt;
  &lt;/html&gt;</pre>
   </div>
        <p>
          The <code><cite>provenance-URI</cite></code> given by the <code>provenance</code> link element identifies the provenance-URI for the document.
        </p>
        <p>
          The <code><cite>target-URI</cite></code> given by the <code>anchor</code> link element specifies an identifier for the document that may be used within the provenance information when referring to the document.
        </p>
        <p>
          An HTML document header MAY include multiple <code>provenance</code> link elements, indicating a number of different provenance sources that are known to the creator of the document, each of which may provide provenance information about the document. 
        </p>
<!--
        <p>
          Likewise, the header MAY include multiple "anchor" link elements indicating that, e.g., different revisions of the document can be identified in the provenance information using the different  <code><cite>resource-URIs</cite></code>.
        </p>
-->
        <p>
          If no "anchor" link element is provided then the <code><cite>target-URI</cite></code> is assumed to be the URI of the document. It is RECOMMENDED that this convention be used only when the document is static and has a stable URI that is reasonably expected to be available to anyone accessing the document (e.g. when delivered from a web server, or as part of a MIME structure containing content identifiers [[RFC2392]]).
        </p>

        <section>
          <h2>Specifying Provenance Services</h2>
            <p>
              The document creator may specify that the provenance information about the document is provided by a <a class="internalDFN">provenance service</a>. This is done through the use of a third link relation type following the same pattern as above:
            </p>
            <pre class="pattern">
  &lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
     &lt;head&gt;
        &lt;link rel="provenance-service" href="<cite>service-URI</cite>"&gt;
        &lt;link rel="anchor" href="<cite>target-URI</cite>"&gt;
        &lt;title&gt;Welcome to example.com&lt;/title&gt;
     &lt;/head&gt;
     &lt;body&gt;
        ...
     &lt;/body&gt;
  &lt;/html&gt;</pre>
          <p>
            The <code>provenance-service</code> link element identifies the <a class="internalDFN">service-URI</a>.  Dereferencing this URI yields a service description that provides further information to enable a client to access <a class="internalDFN">provenance information</a> for a <a class="internalDFN">resource</a>; see <a href="#provenance-services" class="sectionRef"></a> for more details.
          </p>
          <p>
            There MAY be multiple <code>provenance-service</code> link elements, and these MAY appear in the same document as <code>provenance</code> link elements (though, in simple cases, we anticipate that <code>provenance</code> and <code>provenance-service</code> link relations would not be used together).
          </p>
        </section>
      </section>

      <section>
        <h2>Resource represented as RDF</h2>
        <p>
          If a resource is represented as RDF (in any of its recognized syntaxes, including RDFa), it may contain references to its own provenance using additional RDF statements.  For this purpose three new RDF properties, <code>prov:hasProvenance</code>, <code>prov:hasAnchor</code>, and <code>prov:hasProvenanceService</code>, are defined as follows.
          (These terms may be used to indicate provenance of other resources too, but discussion of such usage is beyond the scope of this section.)
        </p>
        <p>
          The RDF property <code>prov:hasProvenance</code> is defined as a relation between two resources, where the object of the property is a resource that provides provenance information about the subject resource.  Multiple <code>prov:hasProvenance</code> assertions may be made about a subject resource.  This property corresponds to a <a href="#registration-template-for-link-relation---provenance">provenance link relation</a> used with an HTTP <code>Link</code> header field, or HTML <code>&lt;link&gt;</code> element.
        </p>
        <p>
          Property <code>prov:hasAnchor</code> specifies a <a class="internalDFN">target-URI</a> used in the provenance information to refer to the containing RDF document.
          This corresponds to use of the <code>anchor</code> parameter in an HTTP provenance <code>Link</code> header field, or an <a href="#registration-template-for-link-relation---anchor">anchor link relation</a> in an HTML <code>&lt;link&gt;</code> element, which similarly indicate a URI used by the provenance information to refer to the described document.
        </p>
        <p>
          Property <code>prov:hasProvenanceService</code> specifies a <a class="internalDFN">service-URI</a> associated with the RDF document for possible access to provenance information.  This property corresponds to a <a href="#registration-template-for-link-relation---provenance-service">provenance-service link relation</a> used with an HTTP <code>Link</code> header field, or HTML <code>&lt;link&gt;</code> element.
        </p>
        <pre class="example code">
    @prefix prov: &lt;http://www.w3.org/ns/prov#&gt;

    &lt;&gt; dcterms:title      "Welcome to example.com" ;
       prov:hasAnchor     &lt;http://example.com/data/resource.rdf&gt; ;
       prov:hasProvenance &lt;http://example.com/provenance/resource.rdf&gt; ;
       prov:hasProvenanceService &lt;http://example.com/provenance-service/&gt; .
        :
       (RDF data)
        :
        </pre>
      </section>

      <section>
        <h2>Arbitrary data</h2>
        <p>
          If a resource is represented using a data format other than HTML or RDF, and no URI for the resource is known, provenance discovery becomes trickier to achieve.  This specification does not define a specific mechanism for such arbitrary resources, but this section discusses some of the options that might be considered.
        </p>
        <p>
          For formats which have provision for including metadata within the file (e.g. JPEG images, PDF documents, etc.), use the format-specific metadata to include a <a class="internalDFN">target-URI</a>, <a class="internalDFN">provenance-URI</a> and/or <a class="internalDFN">service-URI</a>. Format-specific metadata provision might also be used to include <a class="internalDFN">provenance information</a> directly in the resource.
        </p>
        <p>
          Use a generic packaging format that can combine an arbitrary data file with a separate metadata file in a known format, such as RDF.  At this time, it is not clear what format that should be, but some possible candidates are:</p>
          <ul>
            <li>MIME multipart/related [[RFC2387]]: both email and HTTP are based on MIME or MIME-derivatives, so this has the advantage of working well with the network transfer mechanisms discussed in the motivating scenarios considered.
            </li>
            <li>
              Composite object-packaging work from the digital library community, of which there are several (e.g., <a href="http://www.openarchives.org/ore/">ORE</a>, <a href="http://www.loc.gov/standards/mets/">METS</a>, <a href="http://xml.coverpages.org/mpeg21-didl.html">MPEG-21 DIDL</a>, <a href="https://wiki.ucop.edu/display/Curation/BagIt">BagIt</a>) to name a handful.
            </li>
            <li>
              Packaging formats along the lines of those used for shipping Java web applications (basically, a ZIP file with a manifest and some imposed structure)
            </li>
            <li>
              Ongoing work in the research community (e.g. <a href="http://eprints.ecs.soton.ac.uk/21587/">Why Linked Data is Not Enough for Scientists</a>, <a href="http://idpf.org/epub/30/spec/epub30-overview.html">ePub</a>, etc.) to encapsulate data, code, annotations and metadata into a common exchangeable format.
            </li>
          </ul>
      </section>

    </section>

<!-- == Sect 4 =================================================================================== -->

    <section>
      <h2>Provenance services</h2>
      <p>
        This section describes a REST-based protocol [[REST]] for provenance services with facilities for the retrieval of provenance information. The protocol specifies HTTP operations for retrieval of provenance information from a provenance service. It follows the approach of the SPARQL Graph Store HTTP Protocol [[SPARQL-HTTP]].
      </p>
      <p>The introduction of this protocol is motivated by the following possible considerations: </p>
        <ul>
        <li>the naming authority associated with the <a class="internalDFN">target-URI</a> is not the same as the service offering provenance information</li>
        <li>multiple services have <a class="internalDFN">provenance information</a> about the same resource</li>
        <li>the service associated with the target-URI is not accessible for adding additional information when handling retrieval requests</li>
        <li>there is no dereferencable <a class="internalDFN">provenance-URI</a> containing provenance information for a particular resource</li>
        <li>provenance services may provide additional extensibility points for control over returned provenance information.</li>
        </ul>
     

     <section>
        <h2>HTTP GET</h2>
        <div>This protocol combines the <a class="internalDFN">target-URI</a> with the <a class="internalDFN">service-URI</a> to formulate an HTTP GET request, according to the following convention:
          <pre class="pattern">
  GET /provenance/service?<b>target</b>=http://www.example.com/entity HTTP/1.1
  Host: example.com</pre>
        </div>
        <div>The embedded target-URI (<code>http://www.example.com/entity</code>) identifies the resource for which provenance information is to be returned. Any server that implements this protocol and receives a request URI in this form SHOULD return provenance information for the resource-URI embedded in the query component where that URI is the result of percent-decoding the value associated with the provenance-resource key. The embedded URI MUST be an absolute URI and the server MUST respond with a 400 Bad Request if it is not.  If the supplied resource-URI includes a fragment identifier, the '#' MUST be %-encoded as <code>%23</code> when constructing the provenance-URI value; similarly, any '&amp;' character in the resource-URI must be %-encoded as <code>%26</code>.
        </div>
        <p>If the provenance information identified in the request does not exist in the server, a 404 Not Found response code SHOULD be returned.
        </p>
        <p>The format of returned provenance information is not defined here, but may be established through content type negotiation using <code>Accept:</code> header fields in the HTTP request. A provenance service SHOULD be capable of returning RDF using the vocabulary defined by [[PROV-O]], in any standard RDF serialization (e.g. RDF/XML), or any other standard serialization of the Provenance Model specification [[PROV-DM]]. Services MUST identify the <code>Content-Type</code> of the information returned.
        </p>
      </section>

      <!-- <section class="informative"> -->
      <section>
        <h2>Provenance service discovery</h2>
        <p>
          This specification does not define any specific mechanism for discovering provenance services.  Applications may use any appropriate mechanism, including but not limited to: prior configuration, search engines, service registries, etc.
        </p>
        <p>
          To facilitate service discovery, we recommend that RDF publication of service descriptions uses the provenance service type <code>prov:ProvenanceService</code>, defined by the provenance ontology [[PROV-O]].
          The RDF service description example below in <a href="#provenance-service-description" class="sectionRef"></a> shows this use.
        </p>
        <p class="TODO">
          @@TODO: sync up term definitions with provenance ontology specification.
        </p>
      </section>

      <!-- <section class="informative"> -->
      <section>
        <h2>Provenance service description</h2>
        <!--<p>The provenance service interface as described above violates REST constraints by requiring the client to know about the structure of URIs offered by the service (see [[REST-APIs]], 4th bullet point).  The provenance service description mitigates this coupling by providing a mechanism for discovering the URI format to be used, starting with just the service URI.
        %</p> -->
        <p>Dereferencing a provenance service URI should yield a provenance service description. This is to be compatible with the constraints of [[REST-APIs]]. The provenance service description should be available as RDF (in any of its common serializations, and determined through HTTP content negotiation), and it should contain RDF statements of the form:
        </p>
        <pre class="pattern">
  &lt;<cite>service-URI</cite>&gt; a prov:ProvenanceService ;
    prov:provenanceUriTemplate "<cite>service-URI</cite>?target={+uri}" .</pre>
        <p>where <cite><code>service-URI</code></cite> is the URI of the provenance service.  Note that the object of the <code>prov:provenanceUriTemplate</code> statement is a literal text value, not a URI.
        </p>
        <p>A client may retrieve this service description and extract the associated value for <code>prov:provenance-URI-template</code>.  This value is a string containing a URI template [[URI-template]] (level 2). A URI for the desired provenance information is obtained by expanding the URI template with the variable <code>uri</code> set to the resource-URI for which provenance is required.  If the target-URI contains '#' or '&amp;' these  must be %-escaped as <code>%23</code> or <code>%26</code> respectively before template expansion.
        </p>
        <p class="TODO">
          @@TODO: sync up term definitions with provenance ontology specification.
        </p>
      </section>

    </section>
 
<!-- == Sect 5 =================================================================================== -->

    <section>
    <h2>Best practice</h2> 

      <section id="querying-provenance-information">
        <h2>Using SPARQL for provenance queries</h2>
        <p>
          Simply identifying and retrieving provenance information as a resource on the Web may not always meet the requirements of a particular application or service, e.g.:</p>
          <ul>
            <li>the resource for which provenance information is required is not identified by a known URI</li>
            <li>the provenance information for a resource is not directly identified by a known URI</li>
            <li>a requirement to access provenance information for a number of distinct but related resources in a single atomic operation</li>
            <li><i>etc.</i></li>
          </ul>
   
        <p>
          A provenance query service provides an alternative way to access provenance information and/or provenance-URIs.  An application will need a URI for the provenance query service, and some relevant information about the resource whose provenance is to be accessed.
        </p>
        <p>
          The details of a provenance query service is an implementation choice, but for interoperability between different providers and users we recommend use of SPARQL [[RDF-SPARQL-PROTOCOL]] [[RDF-SPARQL-QUERY]].
          The query service URI would then be the URI of a <a href="http://www.w3.org/TR/rdf-sparql-protocol/#conformant-sparql-protocol-service">SPARQL protocol service</a> 
(often referred to as a "SPARQL endpoint").
            The following subsections provide examples for what are considered to be some plausible common scenarios for using SPARQL, and are not intended to cover all possibilities.
        </p>
        <p>
          A SPARQL protocol service description may be published using the <cite>SPARQL 1.1 Service Description</cite> vocabulary [[SPARQL-SD]].
        </p>
        <p>
          The following subsections illustrate use cases for querying a SPARQL-based provenance query service.
        </p>
        <section>
          <h2>Find a provenance-URI given a target-URI</h2>
          <p>
            If the requester has a <a class="internalDFN">target-URI</a>, a simple SPARQL query may be used to return the corresponding <a class="internalDFN">provenance-URI</a>. E.g., if the original resource has a target-URI <code>http://example.org/resource</code>:</p>
            <pre class="example code">
  @prefix prov: &lt;http://www.w3.org/ns/prov#&gt;
  SELECT ?provenance_uri WHERE
  {
    &lt;http://example.org/resource&gt; prov:hasProvenance ?provenance_uri
  }
            </pre>
       
        </section>

        <section>
          <h2>Find Provenance-URI given identifying information about a resource</h2>
          <p>
            If the requester has identifying information that is not the URI of the original resource, then they will need to construct a more elaborate query to locate a resource description and obtain its provenance-URI(s).  The nature of identifying information that can be used in this way will depend upon the third party service used, further definition of which is out of scope for this specification.  For example, a query for a document identified by a DOI, say <code>1234.5678</code>, using the PRISM vocabulary [[PRISM]] recommended by FaBio [[FABIO]], might look like this:</p>
            <pre class="example code">
  @prefix prov: &lt;http://www.w3.org/ns/prov#&gt;
  @prefix prism: &lt;http://prismstandard.org/namespaces/basic/2.0/&gt;
  SELECT ?provenance_uri WHERE
  {
    [ prism:doi "1234.5678" ] prov:hasProvenance ?provenance_uri
  }
            </pre>
          
        </section>

        <section>
          <h2>Obtain provenance information directly given a target-URI</h2>
          <p>
            This scenario retrieves provenance information directly given the URI of a resource, and may be useful where the provenance information has not been assigned a specific URI, or when the calling application is interested only in specific elements of provenance information.
          </p>
          <p>
            If the original resource has a URI <code>http://example.org/resource</code>, a SPARQL query for provenance information might look like this: </p>
            <pre class="example code">
  @prefix prov: &lt;http://www.w3.org/ns/prov#&gt;
  SELECT ?generationStartTime WHERE {
      &lt;http://example.org/resource&gt; prov:wasGeneratedBy ?activity .
      ?activity prov:startedAtTime ?generationStartTime .
  }
            </pre>
          
          <p>
            This query extracts a "generation start time" for an artifact by following links to the start time of the activity which generated it.
          </p>
        </section>

      </section>

  <!-- == Sect 5.2 ===================================================================================== -->

      <section id="incremental-provenance-retrieval">
        <h2>Incremental Provenance Retrieval</h2>
        <p><a class="internalDFN">Provenance information</a> may be large. While this specification does not define how to implement scalable provenance systems, it does allow for publishers to make available provenance in an incremental fashion. We now discuss two possibilities for incremental provenance retrieval.
        </p>

        <section>
          <h2>Via Web Retrieval</h2>
          <p>Publishers are not required to publish all the provenance information associated with a given resource at a particular <a class="internalDFN">provenance-URI</a>. The amount of provenance information exposed is application dependent. However, it is possible to incrementally retrieve (i.e. walk the provenance graph) by progressively looking up provenance information using HTTP. The pattern is as follows:</p>
            <ol>
              <li>For a given resource (<code>resource-URI</code>) retrieve it's associated <code>provenance-URI-1</code> and its associated <code>target-URI-1</code> using a returned HTTP <code>Link:</code> header field (<a href="#resource-accessed-by-http" class="sectionRef"></a>)</li>
              <li>Dereference <code>provenance-URI-1</code></li>
              <li>Navigate the provenance information</li>
              <li>When reaching a dead-end during navigation, that is on encountering a reference to a resource (<code>target-URI-2</code>) with no provided provenance information, find its provenance-URI and continue from Step 2.  (Note: an HTTP HEAD request for <code>target-URI-2</code> may be used to obtain the <code>Link:</code> headers without retrieving the resource representation.)</li>
            </ol>
          
          <p>To reduce the overhead of multiple HTTP requests, a provenance information publishers are encouraged to link entities to their associated provenance information using the <code>prov:hasProvenance</code> predicate. Thus, the same pattern above applies, except instead of having to retrieve a new <code>Link</code> header field, one can immediately access the resource's associated provenance.
          </p>
          <p>The same approach can be adopted when using the <a class="internalDFN">provenance service</a> API (<a href="#provenance-services" class="sectionRef"></a>). However, instead of performing an HTTP HEAD or GET against a resource one queries the provenance service using the given <a class="internalDFN">target-URI</a>.
          </p>
        </section>

        <section>
          <h2>Via SPARQL Queries</h2>
          <p>Provenance information may be made available using a SPARQL endpoint (<a href="#querying-provenance-information" class="sectionRef"></a>) [[RDF-SPARQL-PROTOCOL]] [[RDF-SPARQL-QUERY]]. Using SPARQL queries, provenance can be selectively retrieved using combinations of filters and or path queries.
          </p>
        </section>

      </section>

    </section>
 
<!-- ==== Section 6 ===================================================================================== -->

    <section>
      <h2>IANA considerations</h2>
      <p>This document requests registration of new link relations, per <a href="http://tools.ietf.org/html/rfc5988#section-6.2.1">section-6.2.1 of RFC 5988</a>.
      </p>
      <p class="TODO">
          @@TODO The following templates should be completed and submitted to link-relations@ietf.org:
      </p>
      <section>
        <h2>Registration template for link relation: "provenance"</h2>
          <dl>
            <dt>Relation Name:</dt>
            <dd>
              <code>provenance</code>
            </dd>
            <dt>Description:</dt>
            <dd>
              the resource identified by target IRI of the link provides provenance information about the resource identified by the context link
            </dd>
            <dt>Reference:</dt>
            <dd>
              @@this spec, @@provenance-model-spec
            </dd>
            <dt>Notes:</dt>
            <dd>
              ...
            </dd>
            <dt>Application Data:</dt>
            <dd>
              ...
            </dd>
          </dl>
       
      </section>
      <section>
        <h2>Registration template for link relation: "anchor"</h2>
          <dl>
            <dt>Relation Name:</dt>
            <dd>
              <code>anchor</code>
            </dd>
            <dt>Description:</dt>
            <dd>
              when used in conjunction with a "provenance" link, the resource identified by target IRI of the link is one for which provenance information may be provided.  This may be used, for example, to isolate relevant information from a referenced document that contains provenance information for several entities.
            </dd>
            <dt>Reference:</dt>
            <dd>
              @@this spec, @@provenance-model-spec
            </dd>
            <dt>Notes:</dt>
            <dd>
              ...
            </dd>
            <dt>Application Data:</dt>
            <dd>
              ...
            </dd>
          </dl>
      </section>
      <section>
        <h2>Registration template for link relation: "provenance-service"</h2>
          <dl>
            <dt>Relation Name:</dt>
            <dd>
              <code>provenance-service</code>
            </dd>
            <dt>Description:</dt>
            <dd>
              the resource identified by target URI of the link is an provenance service per <a href="#provenance-services" class="sectionRef"></a> of this specification.
            </dd>
            <dt>Reference:</dt>
            <dd>
              @@this spec, @@provenance-model-spec
            </dd>
            <dt>Notes:</dt>
            <dd>
              ...
            </dd>
            <dt>Application Data:</dt>
            <dd>
              ...
            </dd>
          </dl>
     
      </section>
    </section>
 
<!-- ==== Section 7 ===================================================================================== -->

    <section>
      <h2>Security considerations</h2>
      <p>
        Provenance is central to establishing trust in data. If provenance information is corrupted, it may lead agents (human or software) to draw inappropriate and possibly harmful conclusions.  Therefore, care is needed to ensure that the integrity of provenance information is maintained.
      </p>
      <p>
        Secure HTTP (https) SHOULD be used across unsecured networks when accessing provenance information that may be used as a basis for trust decisions, or to obtain a provenance URI for same.
      </p>
      <p>
        When retrieving a provenance URI from a document, steps SHOULD be taken to ensure the document itself is an accurate copy of the original whose author is being trusted (e.g. signature checking, or verifying its checksum against an author-provided secure web service).
      </p>
      <p class="TODO">
        @@TODO ... privacy, access control to provenance (note to self: discussed in Edinburgh linked data provenance workshop).  In particular, note that the fact that a resource is openly accessible does not mean that its provenance information should also be.
      </p>
      <p class="TODO">
        @@TODO Expand on trust-in-provenance issues. Suggested by Curt: Just as provenance information can help determine trust of the information content of a resource, provenance information related to the provenance itself ("provenance of provenance") can help determine trust of the provenance.
      </p>
    </section>
 
<!-- ===================================================================================== -->
    
    <section class='appendix'>
      <h2>Acknowledgements</h2>
      <p>
        The editors acknowledge the contribution and review from members of the provenance working group.
      </p>
      <p>
        Many thanks to Robin Berjon for making our lives so much easier with his cool <a href="http://dev.w3.org/2009/dap/ReSpec.js/documentation.html">ReSpec</a> tool.
      </p>
    </section>

<!-- ===================================================================================== -->
    
    <section class='appendix'>
      <h2>Names added to prov: namespace</h2>
      <p>
        This specification defines the following additional names in the provenance namespace.
      </p>
      
      <p>
        The provenance namespace URI is http://www.w3.org/ns/prov#.
      </p>
        <table>
          <tr>
            <th>name</th><th>Description</th><th>Definition ref</th>
          </tr>
          <tr>
            <td>ProvenanceService</td><td>Class for a service described by a provenance service description</td><td>...</td>
          </tr>
          <tr>
            <td>hasAnchor</td><td>Indicates anchor URI for a potentially dynamic resource instance</td><td>...</td>
          </tr>
          <tr>
            <td>hasProvenance</td><td>Relates a resource to its provenance</td><td>...</td>
          </tr>
          <tr>
            <td>hasProvenanceService</td><td>Relates a resource to a provenance service</td><td>...</td>
          </tr>
          <tr>
            <td>provenanceUriTemplate</td><td>Relates a provenance service to a URI template string for constructing provenance-URIs</td><td>...</td>
          </tr>
        </table>
    </section>


<!-- ===================================================================================== -->

    <!-- 
<section class='appendix'>
      <h2>Provenance service format examples</h2>
      <p>
        In <a href="#provenance-services" class="sectionRef"></a>, the provenance service description was represented as a JSON-formatted document.  As noted, HTTP content negotiation MAY be enabled to retrieve the document in alternative formats.  This appendix provides examples of service description document represented using RDF Turtle and XML syntaxes, and XML. 
      </p>

      <section>
        <h2>RDF Turtle example of service description</h2>
        <p>
          This example uses the RDF Turtle format [[TURTLE]], presented as MIME content-type <code>text/turtle</code>.
        </p>
        <pre class="example code">
  @prefix provds: &lt;@@TBD@@#&gt; .
  @prefix prov: &lt;http://www.w3.org/ns/prov-o/&gt; .
  
  &lt;http://example.org/provenance_service/&gt; a prov:ProvenanceService ;
    provds:provenance_locations_template       "http://example.org/provenance_service/locations/?uri={uri}" ;
    provds:provenance_content_template     "http://example.org/provenance_service/provenance/?uri={uri}"
    .
        </pre>
        <p class="note">
          The provenance URI templates are encoded in RDF as plain string literals, <em>not</em> as resource URIs.
        </p>
        <p class="TODO">
          Finalize URIs in the above example.
        </p>
      </section>

      <section>
        <h2>RDF/XML example of service description</h2>
        <p>This is essentially the same as the Turtle example above, but encoded in RDF/XML [[RDF-SYNTAX-GRAMMAR]], and presented as MIME content-type <code>application/xml+rdf</code>.</p>
        <pre class="example code">
  &lt;rdf:RDF
    xmlns:rdf    = "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:rdfs   = "http://www.w3.org/2000/01/rdf-schema#"
    xmlns:provds = "@@TBD@@#"
    xmlns:prov   = "http://www.w3.org/ns/prov-o/"
  &gt;
    &lt;prov:ProvenanceService rdf:about="http://example.org/provenance_service/"&gt;
     example.org &lt;provds:provenance_locations_template&gt;http://example.org/provenance_service/locations/?uri={uri}&lt;/provds:location_template&gt; ;
      &lt;provds:provenance_content_template&gt;http://example.org/provenance_service/provenance/?uri={uri}&lt;/provds:provenance_template&gt; ;
    &lt;/prov:ProvenanceService&gt;
  &lt;/rdf:RDF&gt;
        </pre>
        <p class="TODO">
          Finalize URIs in the above example.
        </p>
      </section>

      <section>
        <h2>Plain XML example of service description</h2>
        <p class="TODO">
          @@TODO: provide example and schema
        </p>
      </section>

      <section>
        <h2>RDF Turtle example of provenance locations</h2>
        <p>
          This example uses the RDF Turtle format [[TURTLE]], presented as MIME content type <code>text/turtle</code>.
        </p>
        <pre class="example code">
  @prefix prov: &lt;@@TBD@@#&gt; .
  &lt;http://example.org/qdata/&gt; a prov:Entity ;
    prov:hasProvenance  &lt;http://source1.example.org/provenance/qdata/&gt; ;
    prov:hasProvenance  &lt;http://source2.example.org/prov/qdata/&gt; ;
    prov:hasProvenance  &lt;http://source3.example.com/prov?id=qdata&gt;
    .
        </pre>
        <p class="issue">
          NOTE: The namespace URI used here for the provenance properties is different from that used in the service description.  I am anticipating that it will be defined as part of the provenance model.  If it is not defined as part of the provenance model, then a property name should be allocated in the provenance discovery service namespace.
        </p>
        <p class="TODO">@@TODO: revise to conform with Provenance Model vocabulary; review URIs</p>
      </section>

      <section>
        <h2>RDF/XML example of provenance locations</h2>
        <p>
          This is essentially the same as the Turtle example above, but encoded in RDF/XML [[RDF-SYNTAX-GRAMMAR]], and presented with MIME content type <code>application/rdf+xml</code>.
        </p>
        <pre class="example code">
  &lt;rdf:RDF
    xmlns:rdf    = "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:rdfs   = "http://www.w3.org/2000/01/rdf-schema#"
    xmlns:prov   = "@@TBD@@#"
  &gt;
    &lt;prov:Entity rdf:about="http://example.org/qdata/"&gt;
      &lt;prov:hasProvenance  rdf:resource="http://source1.example.org/provenance/qdata/" /&gt; ;
      &lt;prov:hasProvenance  rdf:resource="http://source2.example.org/prov/qdata/" /&gt; ;
      &lt;prov:hasProvenance  rdf:resource="http://source3.example.com/prov?id=qdata" /&gt; ;
    &lt;/prov:Entity&gt;
  &lt;/rdf:RDF&gt;
        </pre>
        <p class="TODO">@@TODO: revise to conform with Provenance Model vocabulary</p>
      </section>

      <section>
        <h2>Plain XML example of provenance locations</h2>
        <p class="TODO">
          @@TODO: provide example and schema
        </p>
      </section>

    </section>
 -->

<!-- ===================================================================================== -->

  </body>
</html>
