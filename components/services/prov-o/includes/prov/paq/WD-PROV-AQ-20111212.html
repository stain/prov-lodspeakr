<!DOCTYPE html PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'>
<html lang="en" dir="ltr">
<head>
    <title>PROV-AQ: Provenance Access and Query</title>
    <link rel="stylesheet" type="text/css" href="css/prov-aq.css">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<!--  Use common W3C-hosted version of ReSpec.js:
-->
    
<!--  Use local version of ReSpec.js for debugging:
    <script src="js/respec.js" class="remove"></script>
-->
    
  <style type="text/css">
/*****************************************************************
 * ReSpec CSS
 * Robin Berjon (robin at berjon dot com)
 * v0.05 - 2009-07-31
 *****************************************************************/


/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

code {
    color:  #ff4500;
}


/* --- WEB IDL --- */
pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
}

pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

.idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
}

/*.idlModule*/
/*.idlModuleID*/
/*.idlInterface*/
.idlInterfaceID, .idlDictionaryID {
    font-weight:    bold;
    color:  #005a9c;
}

.idlSuperclass {
    font-style: italic;
    color:  #005a9c;
}

/*.idlAttribute*/
.idlAttrType, .idlFieldType, .idlMemberType {
    color:  #005a9c;
}
.idlAttrName, .idlFieldName, .idlMemberName {
    color:  #ff4500;
}
.idlAttrName a, .idlFieldName a, .idlMemberName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlMethod*/
.idlMethType {
    color:  #005a9c;
}
.idlMethName {
    color:  #ff4500;
}
.idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlParam*/
.idlParamType {
    color:  #005a9c;
}
.idlParamName {
    font-style: italic;
}

.extAttr {
    color:  #666;
}

/*.idlConst*/
.idlConstType {
    color:  #005a9c;
}
.idlConstName {
    color:  #ff4500;
}
.idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlException*/
.idlExceptionID {
    font-weight:    bold;
    color:  #c00;
}

.idlTypedefID, .idlTypedefType {
    color:  #005a9c;
}

.idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
}

.excName a {
    font-family:    monospace;
}

.idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
}

.excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
}
.excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
.excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

.idlImplements a {
    font-weight:    bold;
}

dl.attributes, dl.methods, dl.constants, dl.fields, dl.dictionary-members {
    margin-left:    2em;
}

.attributes dt, .methods dt, .constants dt, .fields dt, .dictionary-members dt {
    font-weight:    normal;
}

.attributes dt code, .methods dt code, .constants dt code, .fields dt code, .dictionary-members dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
}

.attributes dt code, .fields dt code, .dictionary-members dt code {
    background:  #ffffd2;
}

.attributes dt .idlAttrType code, .fields dt .idlFieldType code, .dictionary-members dt .idlMemberType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
}

.methods dt code {
    background:  #d9e6f8;
}

.constants dt code {
    background:  #ddffd2;
}

.attributes dd, .methods dd, .constants dd, .fields dd, .dictionary-members dd {
    margin-bottom:  1em;
}

table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
}
table.parameters { border-bottom:  1px solid #90b8de; }
table.exceptions { border-bottom:  1px solid #deb890; }

.parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-family:    initial;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
}
.parameters th { background: #90b8de; }
.exceptions th { background: #deb890; }

.parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
}

.parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
}

.parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
}

.parameters td.prmType {
    width:  120px;
}

table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
}

/* --- TOC --- */
.toc a {
    text-decoration:    none;
}

a .secno {
    color:  #000;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

/* --- EXAMPLES --- */
pre.example {
    border-top: 1px solid #ff4500;
    border-bottom: 1px solid #ff4500;
    padding:    1em;
    margin-top: 1em;
}

pre.example::before {
    content:    "Example";
    display:    block;
    width:      150px;
    background: #ff4500;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

/* --- EDITORIAL NOTES --- */
.issue {
    padding:    1em;
    margin: 1em 0em 0em;
    border: 1px solid #f00;
    background: #ffc;
}

.issue::before {
    content:    "Issue";
    display:    block;
    width:  150px;
    margin: -1.5em 0 0.5em 0;
    font-weight:    bold;
    border: 1px solid #f00;
    background: #fff;
    padding:    3px 1em;
}

.note {
    margin: 1em 0em 0em;
    padding:    1em;
    border: 2px solid #cff6d9;
    background: #e2fff0;
}

.note::before {
    content:    "Note";
    display:    block;
    width:  150px;
    margin: -1.5em 0 0.5em 0;
    font-weight:    bold;
    border: 1px solid #cff6d9;
    background: #fff;
    padding:    3px 1em;
}

/* --- Best Practices --- */
div.practice {
    border: solid #bebebe 1px;
    margin: 2em 1em 1em 2em;
}

span.practicelab {
    margin: 1.5em 0.5em 1em 1em;
    font-weight: bold;
    font-style: italic;
}

span.practicelab   { background: #dfffff; }

span.practicelab {
    position: relative;
    padding: 0 0.5em;
    top: -1.5em;
}

p.practicedesc {
    margin: 1.5em 0.5em 1em 1em;
}

@media screen {
    p.practicedesc {
        position: relative;
        top: -2em;
        padding: 0;
        margin: 1.5em 0.5em -1em 1em;
    }
}

/* --- SYNTAX HIGHLIGHTING --- */
pre.sh_sourceCode {
  background-color: white;
  color: black;
  font-style: normal;
  font-weight: normal;
}

pre.sh_sourceCode .sh_keyword { color: #005a9c; font-weight: bold; }           /* language keywords */
pre.sh_sourceCode .sh_type { color: #666; }                            /* basic types */
pre.sh_sourceCode .sh_usertype { color: teal; }                             /* user defined types */
pre.sh_sourceCode .sh_string { color: red; font-family: monospace; }        /* strings and chars */
pre.sh_sourceCode .sh_regexp { color: orange; font-family: monospace; }     /* regular expressions */
pre.sh_sourceCode .sh_specialchar { color: 	#ffc0cb; font-family: monospace; }  /* e.g., \n, \t, \\ */
pre.sh_sourceCode .sh_comment { color: #A52A2A; font-style: italic; }         /* comments */
pre.sh_sourceCode .sh_number { color: purple; }                             /* literal numbers */
pre.sh_sourceCode .sh_preproc { color: #00008B; font-weight: bold; }       /* e.g., #include, import */
pre.sh_sourceCode .sh_symbol { color: blue; }                            /* e.g., *, + */
pre.sh_sourceCode .sh_function { color: black; font-weight: bold; }         /* function calls and declarations */
pre.sh_sourceCode .sh_cbracket { color: red; }                              /* block brackets (e.g., {, }) */
pre.sh_sourceCode .sh_todo { font-weight: bold; background-color: #00FFFF; }   /* TODO and FIXME */

/* Predefined variables and functions (for instance glsl) */
pre.sh_sourceCode .sh_predef_var { color: #00008B; }
pre.sh_sourceCode .sh_predef_func { color: #00008B; font-weight: bold; }

/* for OOP */
pre.sh_sourceCode .sh_classname { color: teal; }

/* line numbers (not yet implemented) */
pre.sh_sourceCode .sh_linenum { display: none; }

/* Internet related */
pre.sh_sourceCode .sh_url { color: blue; text-decoration: underline; font-family: monospace; }

/* for ChangeLog and Log files */
pre.sh_sourceCode .sh_date { color: blue; font-weight: bold; }
pre.sh_sourceCode .sh_time, pre.sh_sourceCode .sh_file { color: #00008B; font-weight: bold; }
pre.sh_sourceCode .sh_ip, pre.sh_sourceCode .sh_name { color: #006400; }

/* for Prolog, Perl... */
pre.sh_sourceCode .sh_variable { color: #006400; }

/* for LaTeX */
pre.sh_sourceCode .sh_italics { color: #006400; font-style: italic; }
pre.sh_sourceCode .sh_bold { color: #006400; font-weight: bold; }
pre.sh_sourceCode .sh_underline { color: #006400; text-decoration: underline; }
pre.sh_sourceCode .sh_fixed { color: green; font-family: monospace; }
pre.sh_sourceCode .sh_argument { color: #006400; }
pre.sh_sourceCode .sh_optionalargument { color: purple; }
pre.sh_sourceCode .sh_math { color: orange; }
pre.sh_sourceCode .sh_bibtex { color: blue; }

/* for diffs */
pre.sh_sourceCode .sh_oldfile { color: orange; }
pre.sh_sourceCode .sh_newfile { color: #006400; }
pre.sh_sourceCode .sh_difflines { color: blue; }

/* for css */
pre.sh_sourceCode .sh_selector { color: purple; }
pre.sh_sourceCode .sh_property { color: blue; }
pre.sh_sourceCode .sh_value { color: #006400; font-style: italic; }

/* other */
pre.sh_sourceCode .sh_section { color: black; font-weight: bold; }
pre.sh_sourceCode .sh_paren { color: red; }
pre.sh_sourceCode .sh_attribute { color: #006400; }

</style><link href="http://www.w3.org/StyleSheets/TR/W3C-WD" rel="stylesheet" type="text/css" charset="utf-8"></head>
  <body style="display: inherit; "><div class="head"><p><a href="http://www.w3.org/"><img width="72" height="48" src="http://www.w3.org/Icons/w3c_home" alt="W3C"></a></p><h1 class="title" id="title">PROV-AQ: Provenance Access and Query</h1><h2 id="w3c-working-draft-12-december-2011"><acronym title="World Wide Web Consortium">W3C</acronym> Working Draft 12 December 2011</h2><dl><dt>This version:</dt><dd><a href="http://www.w3.org/TR/2011/WD-prov-aq-20111212/">http://www.w3.org/TR/2011/WD-prov-aq-20111212/</a></dd><dt>Latest published version:</dt><dd><a href="http://www.w3.org/TR/prov-aq/">http://www.w3.org/TR/prov-aq/</a></dd><dt>Latest editor's draft:</dt><dd><a href="http://dvcs.w3.org/hg/prov/raw-file/tip/paq/prov-aq.html">http://dvcs.w3.org/hg/prov/raw-file/tip/paq/prov-aq.html</a></dd><dt>Editors:</dt><dd><span>Graham Klyne</span>, <a href="http://www.ox.ac.uk/">University of Oxford</a></dd>
<dd><span>Paul Groth</span>, <a href="http://www.vu.nl/">VU University Amsterdam</a></dd>
<dt>Authors:</dt><dd><a href="http://www.ecs.soton.ac.uk/~lavm/">Luc Moreau</a>, University of Southampton</dd>
<dd><span>Olaf Hartig</span>, Invited Expert</dd>
<dd><span>Yogesh Simmhan</span>, Invited Expert</dd>
<dd><a href="http://www.rpi.edu/research/ccni/">James Myers</a>, Rensselaer Polytechnic Institute</dd>
<dd><a href="http://tw.rpi.edu/web/person/TimLebo">Timothy Lebo</a>, Rensselaer Polytechnic Institute</dd>
<dd><a href="http://semanticweb.org/wiki/Khalid_Belhajjame">Khalid Belhajjame</a>, University of Manchester</dd>
<dd><a href="http://www.inf.kcl.ac.uk/staff/simonm/">Simon Miles</a>, Invited Expert</dd>
</dl><p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2011-2011 <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. <acronym title="World Wide Web Consortium">W3C</acronym> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p><hr></div>


    <div id="abstract" class="introductory section"><h2>Abstract</h2>
This document specifies how to use standard Web protocols,
including HTTP, to obtain information about the provenance of Web
resources. We describe both simple access mechanisms for
locating provenance information associated with web pages or resources, and
provenance query services for more complex deployments. This is
part of the larger <acronym title="World Wide Web Consortium">W3C</acronym> Prov provenance framework.
    </div><div id="sotd" class="introductory section"><h2>Status of This Document</h2><p><em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <acronym title="World Wide Web Consortium">W3C</acronym> publications and the latest revision of this technical report can be found in the <a href="http://www.w3.org/TR/"><acronym title="World Wide Web Consortium">W3C</acronym> technical reports index</a> at http://www.w3.org/TR/.</em></p>
      This document is part of a set of specifications produced by the <acronym title="World Wide Web Consortium">W3C</acronym> provenance working group aiming to define interoperable interchange of provenance information in heterogeneous environments such as the Web.  It describes the use of existing web mechanisms for discovery and retrieval of provenance information. 
    <p>This document was published by the <a href="http://www.w3.org/2011/prov">Provenance Working Group</a> as a First Public Working Draft. If you wish to make comments regarding this document, please send them to <a href="mailto:public-prov-comments@w3.org">public-prov-comments@w3.org</a> (<a href="mailto:public-prov-comments-request@w3.org?subject=subscribe">subscribe</a>, <a href="http://lists.w3.org/Archives/Public/public-prov-comments/">archives</a>). All feedback is welcome.</p><p>Publication as a Working Draft does not imply endorsement by the <acronym title="World Wide Web Consortium">W3C</acronym> Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.</p><p>This document was produced by a group operating under the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <acronym title="World Wide Web Consortium">W3C</acronym> Patent Policy</a>. The group does not expect this document to become a <acronym title="World Wide Web Consortium">W3C</acronym> Recommendation. <acronym title="World Wide Web Consortium">W3C</acronym> maintains a <a href="http://www.w3.org/2004/01/pp-impl/46974/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the <acronym title="World Wide Web Consortium">W3C</acronym> Patent Policy</a>.</p></div><div id="toc" class="section"><h2 class="introductory">Table of Contents</h2><ul class="toc"><li class="tocline"><a href="#introduction" class="tocxref"><span class="secno">1. </span>Introduction</a><ul class="toc"><li class="tocline"><a href="#concepts" class="tocxref"><span class="secno">1.1 </span>Concepts</a></li><li class="tocline"><a href="#provenance--entities-and-resources" class="tocxref"><span class="secno">1.2 </span>Provenance, entities and resources</a></li><li class="tocline"><a href="#interpreting-provenance-information" class="tocxref"><span class="secno">1.3 </span>Interpreting provenance information</a></li></ul></li><li class="tocline"><a href="#accessing-provenance-information" class="tocxref"><span class="secno">2. </span>Accessing provenance information</a></li><li class="tocline"><a href="#locating-provenance-information" class="tocxref"><span class="secno">3. </span>Locating provenance information</a><ul class="toc"><li class="tocline"><a href="#resource-accessed-by-http" class="tocxref"><span class="secno">3.1 </span>Resource accessed by HTTP</a><ul class="toc"><li class="tocline"><a href="#specifying-provenance-services" class="tocxref"><span class="secno">3.1.1 </span>Specifying Provenance Services</a></li></ul></li><li class="tocline"><a href="#resource-represented-as-html" class="tocxref"><span class="secno">3.2 </span>Resource represented as HTML</a><ul class="toc"><li class="tocline"><a href="#specifying-provenance-services-1" class="tocxref"><span class="secno">3.2.1 </span>Specifying Provenance Services</a></li></ul></li><li class="tocline"><a href="#resource-represented-as-rdf" class="tocxref"><span class="secno">3.3 </span>Resource represented as RDF</a></li><li class="tocline"><a href="#arbitrary-data" class="tocxref"><span class="secno">3.4 </span>Arbitrary data</a></li></ul></li><li class="tocline"><a href="#provenance-services" class="tocxref"><span class="secno">4. </span>Provenance services</a><ul class="toc"><li class="tocline"><a href="#using-the-provenance-service-api" class="tocxref"><span class="secno">4.1 </span>Using the provenance service API</a><ul class="toc"><li class="tocline"><a href="#retrieve-provenance-uris-for-a-resource" class="tocxref"><span class="secno">4.1.1 </span>Retrieve Provenance-URIs for a resource</a></li><li class="tocline"><a href="#retrieve-provenance-information-for-a-resource" class="tocxref"><span class="secno">4.1.2 </span>Retrieve Provenance information for a resource</a></li></ul></li><li class="tocline"><a href="#resources-presented-and-representations-used" class="tocxref"><span class="secno">4.2 </span>Resources presented and representations used</a><ul class="toc"><li class="tocline"><a href="#service-description" class="tocxref"><span class="secno">4.2.1 </span>Service description</a></li><li class="tocline"><a href="#provenance-locations" class="tocxref"><span class="secno">4.2.2 </span>Provenance locations</a></li><li class="tocline"><a href="#provenance-information" class="tocxref"><span class="secno">4.2.3 </span>Provenance information</a></li></ul></li><li class="tocline"><a href="#provenance-service-discovery" class="tocxref"><span class="secno">4.3 </span>Provenance service discovery</a></li></ul></li><li class="tocline"><a href="#querying-provenance-information" class="tocxref"><span class="secno">5. </span>Querying provenance information</a><ul class="toc"><li class="tocline"><a href="#find-provenance-uri-given-entity-uri-of-resource" class="tocxref"><span class="secno">5.1 </span>Find provenance-URI given entity-URI of resource</a></li><li class="tocline"><a href="#find-provenance-uri-given-identifying-information-about-a-resource" class="tocxref"><span class="secno">5.2 </span>Find Provenance-URI given identifying information about a resource</a></li><li class="tocline"><a href="#obtain-provenance-information-directly-given-an-entity-uri-of-a-resource" class="tocxref"><span class="secno">5.3 </span>Obtain provenance information directly given an entity-URI of a resource</a></li></ul></li><li class="tocline"><a href="#incremental-provenance-retrieval" class="tocxref"><span class="secno">6. </span>Incremental Provenance Retrieval</a><ul class="toc"><li class="tocline"><a href="#via-web-retrieval" class="tocxref"><span class="secno">6.1 </span>Via Web Retrieval</a></li><li class="tocline"><a href="#via-queries" class="tocxref"><span class="secno">6.2 </span>Via Queries</a></li></ul></li><li class="tocline"><a href="#iana-considerations" class="tocxref"><span class="secno">7. </span>IANA considerations</a><ul class="toc"><li class="tocline"><a href="#registration-template-for-link-relation---provenance" class="tocxref"><span class="secno">7.1 </span>Registration template for link relation: "provenance"</a></li><li class="tocline"><a href="#registration-template-for-link-relation---anchor" class="tocxref"><span class="secno">7.2 </span>Registration template for link relation: "anchor"</a></li><li class="tocline"><a href="#registration-template-for-link-relation---provenance-service" class="tocxref"><span class="secno">7.3 </span>Registration template for link relation: "provenance-service"</a></li></ul></li><li class="tocline"><a href="#security-considerations" class="tocxref"><span class="secno">8. </span>Security considerations</a></li><li class="tocline"><a href="#acknowledgements" class="tocxref"><span class="secno">A. </span>Acknowledgements</a></li><li class="tocline"><a href="#provenance-service-format-examples" class="tocxref"><span class="secno">B. </span>Provenance service format examples</a><ul class="toc"><li class="tocline"><a href="#rdf-turtle-example-of-service-description" class="tocxref"><span class="secno">B.1 </span>RDF Turtle example of service description</a></li><li class="tocline"><a href="#rdf-xml-example-of-service-description" class="tocxref"><span class="secno">B.2 </span>RDF/XML example of service description</a></li><li class="tocline"><a href="#plain-xml-example-of-service-description" class="tocxref"><span class="secno">B.3 </span>Plain XML example of service description</a></li><li class="tocline"><a href="#rdf-turtle-example-of-provenance-locations" class="tocxref"><span class="secno">B.4 </span>RDF Turtle example of provenance locations</a></li><li class="tocline"><a href="#rdf-xml-example-of-provenance-locations" class="tocxref"><span class="secno">B.5 </span>RDF/XML example of provenance locations</a></li><li class="tocline"><a href="#plain-xml-example-of-provenance-locations" class="tocxref"><span class="secno">B.6 </span>Plain XML example of provenance locations</a></li></ul></li><li class="tocline"><a href="#references" class="tocxref"><span class="secno">C. </span>References</a><ul class="toc"><li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">C.1 </span>Normative references</a></li><li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">C.2 </span>Informative references</a></li></ul></li></ul></div>

    

<!-- == Sect 1 =================================================================================== -->
    
    <div id="introduction" class="section">
      <!--OddPage--><h2><span class="secno">1. </span>Introduction</h2>
      <p>
        The Provenance Data Model [<cite><a class="bibref" rel="biblioentry" href="#bib-PROV-DM">PROV-DM</a></cite>] and Provenance Ontology [<cite><a class="bibref" rel="biblioentry" href="#bib-PROV-O">PROV-O</a></cite>] specifications define how to represent provenance information in the World Wide Web.
      </p>
      <p>
        This note describes how existing web mechanisms may be used to locate, retrieve and query provenance information.
      </p>
      
      <div id="concepts" class="section">
        <h3><span class="secno">1.1 </span>Concepts</h3>
        <p>
          In defining the specification below, we make use of the following concepts. 
          </p><dl>
            <dt><dfn id="dfn-provenance-information">Provenance information</dfn></dt>
            <dd>refers to provenance represented in some fashion.</dd>
            <dt><dfn id="dfn-provenance-uri">Provenance-URI</dfn></dt>
            <dd>a URI denoting some <a class="internalDFN" href="#dfn-provenance-information">provenance information</a>.</dd>
            <dt><dfn id="dfn-entity">Entity</dfn></dt>
            <dd>an aspect of a <a class="internalDFN" href="#dfn-resource">resource</a>, about which one wishes to present some <a class="internalDFN" href="#dfn-provenance-information">provenance information</a>. For example, a weather report for a given date may be an aspect of a resource that is maintained as the current weather report. An entity is itself a <a class="internalDFN" href="#dfn-resource">resource</a>.  See also [<cite><a class="bibref" rel="biblioentry" href="#bib-PROV-DM">PROV-DM</a></cite>], and [<cite><a class="bibref" rel="biblioentry" href="#bib-WEBARCH">WEBARCH</a></cite>] <a href="http://www.w3.org/TR/webarch/#representation-reuse">section 2.3.2</a>.</dd>
            <dt><dfn id="dfn-entity-uri">Entity-URI</dfn></dt>
            <dd>a URI denoting an <a class="internalDFN" href="#dfn-entity">entity</a>, which allows that entity to be identified for the purpose of finding and expressing <a class="internalDFN" href="#dfn-provenance-information">provenance information</a> (see <a href="#provenance-entities-resources" class="sectionRef">section 1.2 </a> for discussion)</dd>
            <dt><dfn id="dfn-provenance-service">Provenance service</dfn></dt>
            <dd>a service that provides a <a class="internalDFN" href="#dfn-provenance-uri">provenance-URI</a> or <a class="internalDFN" href="#dfn-provenance-information">provenance information</a> given a <a class="internalDFN" href="#dfn-resource">resource</a> URI or an <a class="internalDFN" href="#dfn-entity-uri">entity-URI</a>.</dd>
            <dt><dfn id="dfn-service-uri">Service-URI</dfn></dt>
            <dd>the URI of a <a class="internalDFN" href="#dfn-provenance-service">provenance service</a>.</dd>
            <dt><dfn id="dfn-resource">Resource</dfn></dt>
            <dd>also referred to as <dfn id="dfn-web-resource">web resource</dfn>: a resource as described by the Architecture of the World Wide Web [<cite><a class="bibref" rel="biblioentry" href="#bib-WEBARCH">WEBARCH</a></cite>], <a href="http://www.w3.org/TR/webarch/#id-resources">section 2.2</a>. A resource may be associated with multiple <a title="Entity" class="internalDFN" href="#dfn-entity">entities</a> (see <a href="#provenance-entities-resources" class="sectionRef">section 1.2 </a> for discussion)</dd>
          </dl>
        <p></p>

      </div>

      <div id="provenance--entities-and-resources" class="section">
        <h3 id="provenance-entities-resources"><span class="secno">1.2 </span>Provenance, entities and resources</h3>
        <p>
          Fundamentally, <a class="internalDFN" href="#dfn-provenance-information">provenance information</a> is <em>about</em> <a class="internalDFN">resources</a>.  In general, resources may vary over time and context.  E.g., a resource describing the weather in London changes from day-to-day, or one listing restaurants near you will vary depending on your location.  Provenance information, to be useful, must be persistent and not itself dependent on context.  Yet we may still want to make provenance assertions about dynamic or context-dependent web resources (e.g. the weather forecast for London on a particular day may have been derived from a particular set of Meteorological Office data).
        </p>
        <p>
          Provenance descriptions of dynamic and context-dependent resources are possible through the notion of entities.  An <a class="internalDFN" href="#dfn-entity">entity</a> is simply a web resource that is a contextualized view or instance of an original web resource.  For example, a <acronym title="World Wide Web Consortium">W3C</acronym> specification typically undergoes several public revisions before it is finalized.  A URI that refers to the "current" revision might be thought of as denoting the specification through its lifetime.  Separate URIs for each individual revision would then be <a class="internalDFN">entity-URIs</a>, denoting the specification at a particular stage in its development.  Using these, we can make provenance assertions that a particular revision was published on a particular date, and was last modified by a particular editor.  Entity-URIs may use any URI scheme, and are not required to be dereferencable.
        </p>
        <p>
           Requests for provenance about a resource may return provenance information that uses one or more entity-URIs to refer to versions of that resource.  Some given provenance information may use multiple entity-URIs if there are assertions referring to the same underlying resource in different contexts.  For example, provenance information describing a <acronym title="World Wide Web Consortium">W3C</acronym> document might include information about all revisions of the document using statements that use the different entity-URIs of the various revisions.
        </p>
        <p>
          In summary, a key notion within the concepts outlined above is that <a class="internalDFN" href="#dfn-provenance-information">provenance information</a> may be not universally applicable to a <a class="internalDFN" href="#dfn-resource">resource</a>, but may be expressed with respect to that resource in a restricted context (e.g. at a particular time). This restricted view is called an <a class="internalDFN" href="#dfn-entity">entity</a>, and an <a class="internalDFN" href="#dfn-entity-uri">entity-URI</a> is used to refer to it within provenance information.
        </p>
      </div>

      <div id="interpreting-provenance-information" class="section">
        <h3><span class="secno">1.3 </span>Interpreting provenance information</h3>
        <p><a class="internalDFN" href="#dfn-provenance-information">Provenance information</a> describes relationships between entities, activities and agents.  As such, any given provenance information may contain information about several <a title="Entity" class="internalDFN" href="#dfn-entity">entities</a>.  Within some provenance information, the entities thus described are identified by their <a class="internalDFN" href="#dfn-entity-uri">Entity-URI</a>s.
        </p>
        <p>When interpreting provenance information, it is important to be aware that statements about several entities may be present, and to be accordingly selective when using the information provided.  (In some exceptional cases, it may be that the provenance information returned does not contain any information relating to a specific associated entity.)
        </p>
      </div>

    </div>
 
<!-- == Sect 2 =================================================================================== -->
    
    <div id="accessing-provenance-information" class="section">
      <!--OddPage--><h2><span class="secno">2. </span>Accessing provenance information</h2>
        <p>Web applications may access <a class="internalDFN" href="#dfn-provenance-information">provenance information</a> in the same way as any web resource, by dereferencing its URI. Typically, this will be by performing an HTTP GET operation. Thus, any provenance information may be associated with a <a class="internalDFN" href="#dfn-provenance-uri">provenance-URI</a>, and may be accessed by dereferencing that URI using normal web mechanisms.
        </p>
        <p>
          Provenance assertions are about pre-determined activities involving entities; as such, they are not dynamic.  Thus, provenance information returned at a given provenance-URI may commonly be static.  But the availability of provenance information about a resource may vary (e.g. if there is insufficient storage to keep it indefinitely, or new information becomes available at a later date), so the provenance information returned at a given URI may change, provided that such change does not contradict any previously retrieved information.
        </p>
        <p>
          How much or how little provenance information is returned in response to to a retrieval request is a matter for the provenance provider application.  At a minimum, for as long as provenance information about an entity remains available, sufficient should be returned to enable a client application to walk the provenance graph per <a class="sectionRef" href="#incremental-provenance-retrieval">section 6. Incremental Provenance Retrieval</a>.
        </p>
        <p>
        When publishing provenance as a web resource, the <a class="internalDFN" href="#dfn-provenance-uri">provenance-URI</a> should be discoverable using one or more of the mechanisms described in <a href="#locating-provenance-information" class="sectionRef">section 3. Locating provenance information</a>.
        </p>
        <p>
          If there is no URI for some particular provenance information, then alternative mechanisms may be needed. Possible mechanisms are suggested in <a href="#provenance-services" class="sectionRef">section 4. Provenance services</a> and <a href="#querying-provenance-information" class="sectionRef">section 5. Querying provenance information</a>.
        </p>
    </div>
 
<!-- == Sect 3 =================================================================================== -->
    
    <div id="locating-provenance-information" class="section">
      <!--OddPage--><h2><span class="secno">3. </span>Locating provenance information</h2>
      <p>
        When <a class="internalDFN" href="#dfn-provenance-information">provenance information</a> is a resource that can be accessed using normal web retrieval, one needs to know a <a class="internalDFN" href="#dfn-provenance-uri">provenance-URI</a> to dereference.  If this is known in advance, there is nothing more to specify.  If a provenance-URI is not known then a mechanism to discover one must be based on information that is available to the would-be accessor.
      </p>
      <p>Provenance information may be provided by several parties other than the provider of the original resource, each using different provenance-URIs, and each with different concerns.  (It is possible that these different parties may provide contradictory provenance information.)
      </p>
      <p>
      Once provenance information information is retrieved, one also needs to know how to locate the view of that resource within that provenance information. This view is an <a class="internalDFN" href="#dfn-entity">entity</a> and is identified by an <a class="internalDFN" href="#dfn-entity-uri">entity-URI</a>.
      </p>
      <p>
        We start by considering mechanisms for the resource provider to indicate a <a class="internalDFN" href="#dfn-provenance-uri">provenance-URI</a> along with a <a class="internalDFN" href="#dfn-entity-uri">entity-URI</a>.  (Mechanisms that can be independent of the resource provision are discussed in <a href="#provenance-services" class="sectionRef">section 4. Provenance services</a>).  Three mechanisms are described here:
        </p><ul>
          <li>The requester knows the resource URI <em>and</em> the resource is accessible using HTTP</li>
          <li>The requester has a copy of a resource represented as HTML or XHTML</li>
          <li>The requester has a copy of a resource represented as RDF (including the range of possible RDF syntaxes, such as HTML with embedded RDFa)</li>
        </ul>
        These particular cases are selected as corresponding to primary current web protocol and data formats.  Finally, in <a href="#arbitrary-data" class="sectionRef">section 3.4 Arbitrary data</a>, we discuss the case of a resource in an unspecified format which has been provided by some means other than HTTP.
      <p></p>
      <p>
        The mechanisms specified for use with HTTP and HTML are similar to those proposed by POWDER [<cite><a class="bibref" rel="biblioentry" href="#bib-POWDER-DR">POWDER-DR</a></cite>] (sections <a href="http://www.w3.org/TR/2009/REC-powder-dr-20090901/#assoc-markup">4.1.1</a> and <a href="http://www.w3.org/TR/2009/REC-powder-dr-20090901/#httplink">4.1.3</a>).
      </p>

      <div id="resource-accessed-by-http" class="section">
        <h3><span class="secno">3.1 </span>Resource accessed by HTTP</h3>
        <p>
          For a document accessible using HTTP, provenance information may be indicated using an HTTP <code>Link</code> header field, as defined by <a href="http://tools.ietf.org/html/rfc5988">Web Linking (RFC 5988)</a> [<cite><a class="bibref" rel="biblioentry" href="#bib-LINK-REL">LINK-REL</a></cite>].  The <code>Link</code> header field is included in the HTTP response to a GET or HEAD operation (other HTTP operations are not excluded, but are not considered here).
        </p>
        <p>
          A <code>provenance</code> link relation type for referencing provenance information is registered according to the template in <a href="#iana-considerations" class="sectionRef">section 7. IANA considerations</a>, and may be used as shown::
          </p><pre class="pattern">Link: <cite>provenance-URI</cite>; rel="provenance"; anchor="<cite>entity-URI</cite>"</pre>
          When used in conjunction with an HTTP success response code (<code>2xx</code>), this HTTP header field indicates that <code><cite>provenance-URI</cite></code> is the URI of some provenance information associated with the requested resource and that the associated entity is identified as <code><cite>entity-URI</cite></code>. (See also <a href="#interpreting-provenance-information" class="sectionRef">section 1.3 Interpreting provenance information</a>.)
        <p></p>
        <p>
        If no <code>anchor</code> link is provided then the <code><cite>entity-URI</cite></code> is assumed to be the URI of the resource.
        </p>
        <p>
          At this time, the meaning of these links returned with other HTTP response codes is not defined: future revisions of this specification may define interpretations for these.
        </p>
        <p>
          An HTTP response <em class="rfc2119" title="may">may</em> include multiple <code>provenance</code> link header fields, indicating a number of different provenance resources that are known to the responding server, each providing provenance information about the accessed resource.
        </p>
        <p>
          The presence of a <code>provenance</code> link in an HTTP response does not preclude the possibility that other publishers may offer provenance information about the same resource.  In such cases, discovery of the additional provenance information must use other means (e.g. see <a href="#provenance-services" class="sectionRef">section 4. Provenance services</a>).
        </p>
        <p>
          Provenance resources indicated in this way are not guaranteed to be authoritative.  Trust in the linked provenance data must be determined separately from trust in the original resource, just as in the web at large, it is a users' responsibility to determine an appropriate level of trust in any other linked resource; e.g. based on the domain that serves it, or an associated digital signature.  (Ssee also <a href="#security-considerations" class="sectionRef">section 8. Security considerations</a>.)
        </p>

        <div id="specifying-provenance-services" class="section">
          <h4><span class="secno">3.1.1 </span>Specifying Provenance Services</h4>
            <p class="pending">
              This is a new proposal. It needs to be checked as to whether it is useful.  GK/PG to review nature of provenance-service-URI.
            </p>
            <p>
              The document provider may indicate that provenance information about the document is provided by a <a class="internalDFN" href="#dfn-provenance-service">provenance service</a>. This is done through the use of a <code>provenance-service</code> link relation type following the same pattern as above:
            </p>
            <pre class="pattern">Link: <cite>provenance-service-URI</cite>; anchor="<cite>entity-URI</cite>"; rel="provenance-service"</pre>
            <p>
              The <code>provenance-service</code> link identifies the <a class="internalDFN" href="#dfn-service-uri">service-URI</a>.  Dereferencing this URI yields a service description that provides further information to enable a client to determine a <a class="internalDFN" href="#dfn-provenance-uri">provenance-URI</a> or retrieve <a class="internalDFN" href="#dfn-provenance-information">provenance information</a> for an <a class="internalDFN" href="#dfn-entity">entity</a>; see <a href="#provenance-services" class="sectionRef">section 4. Provenance services</a> for more details.
            </p>
            <p>
            There may be multiple <code>provenance-service</code> link header fields, and these may appear in the same document as <code>provenance</code> links (though, in simple cases, we anticipate that <code>provenance</code> and <code>provenance-service</code> link relations will not be used together).
          </p>
        </div>

      </div>

      <div id="resource-represented-as-html" class="section">
        <h3><span class="secno">3.2 </span>Resource represented as HTML</h3>
        <p>
          For a document presented as HTML or XHTML, without regard for how it has been obtained, provenance information may be associated with a resource by adding a <code>&lt;Link&gt;</code> element to the HTML <code>&lt;head&gt;</code> section.
          Two new link relation types for referencing provenance information are registered according to the template in <a href="#iana-considerations" class="sectionRef">section 7. IANA considerations</a>, and may be used as shown:
          </p><pre class="pattern">  &lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
     &lt;head&gt;
        &lt;link rel="provenance" href="<cite>provenance-URI</cite>"&gt;
        &lt;link rel="anchor" href="<cite>entity-URI</cite>"&gt;
        &lt;title&gt;Welcome to example.com&lt;/title&gt;
     &lt;/head&gt;
     &lt;body&gt;
        ...
     &lt;/body&gt;
  &lt;/html&gt;</pre>
        <p></p>
        <p>
          The <code><cite>provenance-URI</cite></code> given by the <code>provenance</code> link element identifies the provenance-URI for the document.
        </p>
        <p>
          The <code><cite>entity-URI</cite></code> given by the <code>anchor</code> link element specifies an identifier for the presented document view, and which may be used within the provenance information when referring to this document.
        </p>
        <p>
          An HTML document header <em class="rfc2119" title="may">may</em> include multiple "provenance" link elements, indicating a number of different provenance resources that are known to the creator of the document, each of which may provide provenance information about the document. 
        </p>
        <p>
          Likewise, the header <em class="rfc2119" title="may">may</em> include multiple "anchor" link elements indicating that, e.g., different revisions of the document can be identified in the provenance information using the different  <code><cite>entity-URIs</cite></code>.
        </p>
        <p>
        If no "anchor" link element is provided then the <code><cite>entity-URI</cite></code> is assumed to be the URI of the document. It is <em class="rfc2119" title="recommended">recommended</em> that this convention be used only when the document is static.
        </p>

        <div id="specifying-provenance-services-1" class="section">
          <h4><span class="secno">3.2.1 </span>Specifying Provenance Services</h4>
            <p>
              The document creator may specify that the provenance information about the document is provided by a <a class="internalDFN" href="#dfn-provenance-service">provenance service</a>. This is done through the use of a third link relation type following the same pattern as above:
            </p>
            <pre class="pattern">  &lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
     &lt;head&gt;
        &lt;link rel="provenance-service" href="<cite>service-URI</cite>"&gt;
        &lt;link rel="anchor" href="<cite>entity-URI</cite>"&gt;
        &lt;title&gt;Welcome to example.com&lt;/title&gt;
     &lt;/head&gt;
     &lt;body&gt;
        ...
     &lt;/body&gt;
  &lt;/html&gt;</pre>
          <p>
            The <code>provenance-service</code> link element identifies the <a class="internalDFN" href="#dfn-service-uri">service-URI</a>.  Dereferencing this URI yields a service description that provides further information to enable a client to access <a class="internalDFN" href="#dfn-provenance-information">provenance information</a> for an <a class="internalDFN" href="#dfn-entity">entity</a>; see <a href="#provenance-services" class="sectionRef">section 4. Provenance services</a> for more details.
          </p>
          <p>
            There may be multiple <code>provenance-service</code> link elements, and these <em class="rfc2119" title="may">may</em> appear in the same document as <code>anchor</code> and <code>provenance</code> link elements (though, in simple cases, we anticipate that <code>provenance</code> and <code>provenance-service</code> link relations would not be used together).
          </p>
        </div>
      </div>

      <div id="resource-represented-as-rdf" class="section">
        <h3><span class="secno">3.3 </span>Resource represented as RDF</h3>
        <p>
          If a resource is represented as RDF (in any of its recognized syntaxes, including RDFa), it may contain references to its own provenance using additional RDF statements.
        </p>
        <p>
          For this purpose a new RDF property, <code>prov:hasProvenance</code>, is defined as a relation between two resources, where the object of the property is a resource that provides provenance information about the subject resource.  Multiple <code>prov:hasProvenance</code> assertions may be made about a subject resource.
        </p>
        <p>
          Another new RDF property, <code>prov:hasAnchor</code>, is defined to allow the RDF content to specify one or more <a class="internalDFN" href="#dfn-entity-uri">entity-URI</a>s of the RDF document for the purpose of provenance information (similar to the use of the "anchor" link relation in HTML).
        </p>
        <p class="TODO">
          @@TODO: document namespace.  Check naming style.  Use provenance model namespace?  Define as part of model?<br>
          @@TODO: example, when vocabulary issues are settled.
        </p>
      </div>

      <div id="arbitrary-data" class="section">
        <h3><span class="secno">3.4 </span>Arbitrary data</h3>
        <p class="pending">
          We have so far decided not to try and define a common mechanism for arbitrary data, because it's not clear to us what the correct choice would be.  Is this a reasonable position, or is there a real need for a generic solution for provenance discovery for arbitrary, non-web-accessible data objects?
        </p>
        <p>
          If a resource is represented using a data format other than HTML or RDF, and no URI for the resource is known, provenance discovery becomes trickier to achieve.  This specification does not define a specific mechanism for such arbitrary resources, but this section discusses some of the options that might be considered.
        </p>
        <p>
          For formats which have provision for including metadata within the file (e.g. JPEG images, PDF documents, etc.), use the format-specific metadata to include a <a class="internalDFN" href="#dfn-entity-uri">entity-URI</a>, <a class="internalDFN" href="#dfn-provenance-uri">provenance-URI</a> and/or <a class="internalDFN" href="#dfn-service-uri">service-URI</a>. Format-specific metadata provision might also be used to include <a class="internalDFN" href="#dfn-provenance-information">provenance information</a> directly in the resource.
        </p>
        <p>
          Use a generic packaging format that can combine an arbitrary data file with a separate metadata file in a known format, such as RDF.  At this time, it is not clear what format that should be, but some possible candidates are:
          </p><ul>
            <li>MIME multipart/related [<cite><a class="bibref" rel="biblioentry" href="#bib-RFC2387">RFC2387</a></cite>]: both email and HTTP are based on MIME or MIME-derivatives, so this has the advantage of working well with the network transfer mechanisms discussed in the motivating scenarios considered.
            </li>
            <li>
              Composite object-packaging work from the digital library community, of which there are several (ORE, MPEG-21, BagIt @@refs) to name a handful.  Practical implementations of these seem to commonly be based on the ZIP file format.
            </li>
            <li>
              Packaging formats along the lines of those used for shipping Java web applications or (basically, a ZIP file with a manifest and some imposed structure)
            </li>
            <li>
              Ongoing work in the research community (e.g. <a href="http://eprints.ecs.soton.ac.uk/21587/">Why Linked Data is Not Enough for Scientists</a>, ePub, etc.) to encapsulate data, code, annotations and metadata into a common exchangeable format.
            </li>
          </ul>
        <p></p>
        <p class="TODO">
          Fix references in above text.
        </p>
      </div>

    </div>

<!-- == Sect 4 =================================================================================== -->

    <div id="provenance-services" class="section">
      <!--OddPage--><h2><span class="secno">4. </span>Provenance services</h2>
      <p>
        This section describes a REST API [<cite><a class="bibref" rel="biblioentry" href="#bib-REST-APIs">REST-APIs</a></cite>] for a provenance service with facilities for discovery and/or retrieval of provenance information, which can be implemented independently of the original resource delivery channels (e.g. by a third party service).
      </p>
      <p>
        All service implementations must respond with a service description (<a href="#service-description" class="sectionRef">section 4.2.1 Service description</a>) when the service URI is dereferenced.
        Service implementations may provide either discovery, retrieval or both of these services, indicated by presence of the corresponding service URI templates in the service description.  Which of these services to provide is a choice for individual service implementations.
      </p>
      <p>
        On the Web, the normal mechanism for retrieving information is to associate it with a URI, and dereference the URI using normal retrieval mechanisms.  This approach is enabled using the provenance discovery service mechanism:  given the URI of some resource for which provenance information is required, the service returns one or more URIs from which provenance information may be obtained.  This approach may be preferred when the provenance service cannot specify the form of URIs used for identifying provenance information, or when there may be more than one source of provenance information known to the provenance service.
      </p>
      <p>
        The provenance retrieval service returns provenance information directly.  This mechanism may be preferred when the provenance information is not already presented directly to the web, or is stored in a database with a complex query protocol, or when the provenance service can control the URI from which provenance information is served and avoid the intermediate step of URI discovery.
      </p>

      <div id="using-the-provenance-service-api" class="section">
        <h3><span class="secno">4.1 </span>Using the provenance service API</h3>
        <p>
          This section describes general procedures for using the provenance service API.  Later sections describe the resources presented by the API, and their representation using JSON.  <a href="#provenance-service-format-examples" class="sectionRef">section B. Provenance service format examples</a>gives examples of alternative representations. Normal HTTP content negotiation mechanisms may be used to retrieve representations using formats convenient for the client application.
        </p>

        <div id="retrieve-provenance-uris-for-a-resource" class="section">
          <h4><span class="secno">4.1.1 </span>Retrieve Provenance-URIs for a resource</h4>
          <p>
            To use the provenance service to retrieve a list of provenance-URIs for a resource, starting with the service URI (<code>service-URI</code>) and the URI of the resource or entity (<code>entity-URI</code>):
            </p><ol>
              <li>Dereference <code>service-URI</code> to obtain a representation of the <a class="internalDFN" href="#dfn-service-description">service description</a>.</li>
              <li>Extract the provenance locations template from the service description.</li>
              <li>Use the provenance locations template with <code>entity-URI</code> for template variable <code>uri</code> to form <code>provenance-locations-URI</code>.</li>
              <li>Dereference <code>provenance-locations-URI</code> to obtain a <a class="internalDFN" href="#dfn-provenance-locations-resource">provenance locations resource</a> in one of the formats described below.</li>
            </ol>
          <p></p>
          <p>
            Any or all of URIs in the returned provenance locations may be used to retrieve provenance information, per <a href="#accessing-provenance-information" class="sectionRef">section 2. Accessing provenance information</a>.
          </p>
        </div>

        <div id="retrieve-provenance-information-for-a-resource" class="section">
          <h4><span class="secno">4.1.2 </span>Retrieve Provenance information for a resource</h4>
          <p>
            To use the provenance service to directly retrieve provenance information for a resource, starting with the  service URI (<code>service-URI</code>) and the URI of the resource or context (<code>entity-URI</code>):
            </p><ol>
              <li>Dereference <code>service-URI</code> to obtain a representation of the <a class="internalDFN" href="#dfn-service-description">service description</a>.</li>
              <li>Extract the provenance information template from the service description.</li>
              <li>Use the provenance information template with <code>entity-URI</code> for template variable <code>uri</code> to form <code>provenance-URI</code>.</li>
              <li>Dereference <code>provenance-URI</code> to obtain <a class="internalDFN" href="#dfn-provenance-information">provenance information</a>.</li>
            </ol>
          <p></p>
        </div>

      </div>

      <div id="resources-presented-and-representations-used" class="section">
        <h3><span class="secno">4.2 </span>Resources presented and representations used</h3>

        <div id="service-description" class="section">
          <h4><span class="secno">4.2.1 </span>Service description</h4>
          <p>
            A provenance <dfn id="dfn-service-description">service description</dfn> describes the provenance discovery and retrieval service and, in particular, provides URI templates [<cite><a class="bibref" rel="biblioentry" href="#bib-URI-template">URI-template</a></cite>] for URIs to access <a title="provenance locations resource" class="internalDFN" href="#dfn-provenance-locations-resource">provenance locations resources</a> and/or <a class="internalDFN" href="#dfn-provenance-information">provenance information</a>.  Dereferencing the service URI returns a representation of this service description.  The service description <em class="rfc2119" title="may">may</em> contain additional metadata about the service beyond that described here: API clients are expected to ignore any metadata elements they do not understand.
          </p>
          <p>
            This example shows a provenance service description using JSON format [<cite><a class="bibref" rel="biblioentry" href="#bib-RFC4627">RFC4627</a></cite>], which is presented as MIME content-type <code>application/json</code>.  
            Other examples may be seen in <a href="#provenance-service-format-examples" class="sectionRef">section B. Provenance service format examples</a>.
          </p>
          <pre class="example code">{
  "provenance_service_uri":         "http://example.org/provenance_service/",
  "provenance_locations_template":  "http://example.org/provenance_service/locations/?uri={uri}",
  "provenance_content_template":    "http://example.org/provenance_service/provenance/?uri={uri}"
}</pre>
          <p class="issue">
            Is there any point in including the provenance service URI here?  It has been included for consistency with RDF representations, but is functionally redundant.
          </p>
        </div>

        <div id="provenance-locations" class="section">
          <h4><span class="secno">4.2.2 </span>Provenance locations</h4>
          <p>
            A <dfn id="dfn-provenance-locations-resource">provenance locations resource</dfn> enumerates one or more <a class="internalDFN" href="#dfn-provenance-uri">provenance-URI</a>s identifying <a class="internalDFN" href="#dfn-provenance-information">provenance information</a> associated with a given resource.
          </p>
          <p>
            The examples below and in <a href="#provenance-service-format-examples" class="sectionRef">section B. Provenance service format examples</a> are for a given resource URI <code>http://example.org/qdata/</code>, and using the service description example above, its URI would be <code>http://example.org/provenance_service/location/?uri=http%3A%2F%2Fexample.org%2Fqdata%2F</code>.
          </p>
          <p>
            This example uses JSON format [<cite><a class="bibref" rel="biblioentry" href="#bib-RFC4627">RFC4627</a></cite>], presented as MIME content type <code>application/json</code>.
            Other examples may be seen in <a href="#provenance-service-format-examples" class="sectionRef">section B. Provenance service format examples</a>.
          </p>
          <pre class="example code">{
  "uri": "http://example.org/qdata/",
  "provenance": [
    "http://source1.example.org/provenance/qdata/",
    "http://source2.example.org/prov/qdata/",
    "http://source3.example.com/prov?id=qdata"
  ]
}</pre>
          <p class="note">
            The template might use <code>?uri={+uri}</code> rather than just <code>?uri={uri}</code>, and thereby avoid %-escaping the <code>:</code> and <code>/</code> characters in the given URI, but this could cause difficulties for URIs containing query parameters and/or fragment identifiers.  In this case, the client application would need to ensure that any such characters were %-escaped <em>before</em> being passed into a URI-template expansion processor.
          </p>
        </div>

        <div id="provenance-information" class="section">
          <h4><span class="secno">4.2.3 </span>Provenance information</h4>
          <p>
            Provenance information about a resource or resources may be returned in any format. It is recommended that the format be one defined by the Provenance Model specification [<cite><a class="bibref" rel="biblioentry" href="#bib-PROV-DM">PROV-DM</a></cite>].
          </p>
          <p>
            Assuming a given resource URI <code>http://example.org/qdata/</code>, and
            using the service description example above, the provenance URI would be <code>http://example.org/provenance_service/provenance/?uri=http%3A%2F%2Fexample.org%2Fqdata%2F</code>.
          </p>
        </div>

      </div>

      <!-- <section class="informative"> -->
      <div id="provenance-service-discovery" class="section">
        <h3><span class="secno">4.3 </span>Provenance service discovery</h3>
        <p>
          This specification does not define any specific mechanism for discovering provenance services.  Applications may use any appropriate mechanism, including but not limited to: prior configuration, search engines, service registries, etc.
        </p>
      </div>

    </div>
 
<!-- ===================================================================================== -->
    
    <div id="querying-provenance-information" class="section">
      <!--OddPage--><h2><span class="secno">5. </span>Querying provenance information</h2>
      <p>
        Simply identifying and retrieving provenance information as a web resource may not always meet the requirements of a particular application or service, e.g.:
        </p><ul>
          <li>the entity for which provenance information is required is not identified by a known URI</li>
          <li>the provenance information for an entity is not directly identified by a known URI</li>
          <li>a requirement to access provenance information for a number of distinct but related entities in a single atomic operation</li>
          <li><i>etc.</i></li>
        </ul>
      <p></p>
      <p>
        A provenance query service provides an alternative way to access provenance information and/or Provenance-URIs.  An application will need a provenance query service URI, and some relevant information about the entity whose provenance is to be accessed.
      </p>
      <p>
        The details of a provenance query service is an implementation choice, but for interoperability between different providers and users we recommend use of SPARQL [<cite><a class="bibref" rel="biblioentry" href="#bib-RDF-SPARQL-PROTOCOL">RDF-SPARQL-PROTOCOL</a></cite>] [<cite><a class="bibref" rel="biblioentry" href="#bib-RDF-SPARQL-QUERY">RDF-SPARQL-QUERY</a></cite>].  The query service URI would then be the URI of a SPARQL endpoint  (or, to use the SPARQL specification language, a <a href="http://www.w3.org/TR/rdf-sparql-protocol/#conformant-sparql-protocol-service">SPARQL protocol service</a>).  The following subsections provide examples for what are considered to be some plausible common scenarios for using SPARQL, and are not intended to cover all possibilities.
      </p>

      <div id="find-provenance-uri-given-entity-uri-of-resource" class="section">
        <h3><span class="secno">5.1 </span>Find provenance-URI given entity-URI of resource</h3>
        <p>
          If the requester has an <a class="internalDFN" href="#dfn-entity-uri">entity-URI</a>, a simple SPARQL query may be used to return the corresponding <a class="internalDFN" href="#dfn-provenance-uri">provenance-URI</a>. E.g., if the original resource has a entity-URI <code>http://example.org/resource</code>, 
          <code>
            </code></p><pre class="example code"><code>  @prefix prov: &lt;@@TBD&gt;
  SELECT ?provenance_uri WHERE
  {
    &lt;http://example.org/resource&gt; prov:hasProvenance ?provenance_uri
  }
            </code></pre><code>
          </code>
        <p></p>
        <p class="TODO">
          @@TODO: specific provenance namespace and property to be determined by the model or ontology specification?
        </p>
      </div>

      <div id="find-provenance-uri-given-identifying-information-about-a-resource" class="section">
        <h3><span class="secno">5.2 </span>Find Provenance-URI given identifying information about a resource</h3>
        <p>
          If the requester has identifying information that is not the URI of the original resource, then they will need to construct a more elaborate query to locate an entity description and obtain its provenance-URI(s).  The nature of identifying information that can be used in this way will depend upon the third party service used, further definition of which is out of scope for this specification.  For example, a query for a document identified by a DOI, say <code>1234.5678</code>, using the PRISM vocabulary [<cite><a class="bibref" rel="biblioentry" href="#bib-PRISM">PRISM</a></cite>] recommended by FaBio [<cite><a class="bibref" rel="biblioentry" href="#bib-FABIO">FABIO</a></cite>], might look like this:
          </p><pre class="example code">@prefix prov: &lt;@@TBD&gt;
@prefix prism: &lt;http://prismstandard.org/namespaces/basic/2.0/&gt;
SELECT ?provenance_uri WHERE
{
  [ prism:doi "1234.5678" ] prov:hasProvenance ?provenance_uri
}</pre>
        <p></p>
        <p class="TODO">
          @@TODO: specific provenance namespace and property to be determined by the model specification?
        </p>
      </div>

      <div id="obtain-provenance-information-directly-given-an-entity-uri-of-a-resource" class="section">
        <h3><span class="secno">5.3 </span>Obtain provenance information directly given an entity-URI of a resource</h3>
        <p>
          This scenario retrieves provenance information directly given the URI of a resource or entity, and may be useful where the provenance information has not been assigned a specific URI, or when the calling application is interested only in specific elements of provenance information.
        </p>
        <p>
          If the original resource has an entity-URI <code>http://example.org/resource</code>, a SPARQL query for provenance information might look like this: 
          </p><pre class="example code">@prefix prov: &lt;@@TBD&gt;
CONSTRUCT
{
  &lt;http://example.org/resource&gt; ?p ?v
}
WHERE
{
  &lt;http://example.org/resource&gt; ?p ?v
}</pre>
          This query essentially extracts all available properties and values available from the query service used that are directly about the specified entity, and returns them as an RDF graph.  This may be fine if the service contains <em>only</em> provenance information about the indicated resource, or if the non-provenance information is also of interest.  A more complex query using specific provenance vocabulary terms may be needed to selectively retrieve just provenance information when other kinds of information are also available.
        <p></p>
        <p class="TODO">
          @@TODO: specific provenance namespace and property to be determined by the model specification?  The above query pattern assumes provenance information is included in direct properties about the entity.  When an RDF provenance vocabulary is fully formulated, this may well turn out to not be the case.  A better example would be one that retrieves specific provenance information when the vocabulary terms have been defined.
        </p>
      </div>

    </div>

<!-- ===================================================================================== -->

    <div id="incremental-provenance-retrieval" class="section">
      <!--OddPage--><h2><span class="secno">6. </span>Incremental Provenance Retrieval</h2>
      <p><a class="internalDFN" href="#dfn-provenance-information">Provenance information</a> may be large. While this specification does not define how to implement scalable provenance systems, it does allow for publishers to make available provenance in an incremental fashion. We now discuss two possibilities for incremental provenance retrieval.
      </p>

      <div id="via-web-retrieval" class="section">
        <h3><span class="secno">6.1 </span>Via Web Retrieval</h3>
        <p>Publishers are not required to publish all the provenance information associated with a given entity at a particular <a class="internalDFN" href="#dfn-provenance-uri">provenance-URI</a>. The amount of provenance information exposed is application dependent. However, it is possible to incrementally retrieve (i.e. walk the provenance graph) by progressively looking up provenance information using HTTP. The pattern is as follows:
          </p><ol>
            <li>For a given entity (<code>entity-uri-1</code>) retrieve it's associated <code>provenance-uri-1</code> using the HTTP <code>Link</code> header (<a href="#resource-accessed-by-http" class="sectionRef">section 3.1 Resource accessed by HTTP</a>)</li>
            <li>Dereference <code>provenance-uri-1</code></li>
            <li>Navigate the provenance information</li>
            <li>When reaching a dead-end during navigation, that is on encountering a reference to an entity (<code>entity-uri-2</code>) with no provided provenance information, find its provenance-URI and continue from Step 1.  (Note: an HTTP HEAD operation may be used to obtain the Link headers without retrieving the entity content.)</li>
          </ol>
        <p></p>
        <p>To reduce the overhead of multiple HTTP requests, a provenance information publisher may link entities to their associated provenance information using the <code>prov:hasProvenance</code> predicate. Thus, the same pattern above applies, except instead of having to retrieve a new <code>Link</code> header field, one can immediately dereference the entity's associated provenance. 
        </p>
        <p>The same approach can be adopted when using the <a class="internalDFN" href="#dfn-provenance-service">provenance service</a> API (<a href="#provenance-services" class="sectionRef">section 4. Provenance services</a>). However, instead of performing an HTTP HEAD or GET against a resource one queries the provenance service using the given <a class="internalDFN" href="#dfn-entity-uri">entity-uri</a>.
        </p>
      </div>

      <div id="via-queries" class="section">
        <h3><span class="secno">6.2 </span>Via Queries</h3>
        <p>Provenance information may be made available using a SPARQL endpoint (<a href="#querying-provenance-information" class="sectionRef">section 5. Querying provenance information</a>) [<cite><a class="bibref" rel="biblioentry" href="#bib-RDF-SPARQL-PROTOCOL">RDF-SPARQL-PROTOCOL</a></cite>] [<cite><a class="bibref" rel="biblioentry" href="#bib-RDF-SPARQL-QUERY">RDF-SPARQL-QUERY</a></cite>]. Using SPARQL queries, provenance can be selectively retrieved using combinations of filters and or path queries.
        </p>
      </div>

    </div>
 
<!-- ===================================================================================== -->

    <div id="iana-considerations" class="section">
      <!--OddPage--><h2><span class="secno">7. </span>IANA considerations</h2>
      <p>This document requests registration of new link relations, per <a href="http://tools.ietf.org/html/rfc5988#section-6.2.1">section-6.2.1 of RFC 5988</a>.
      </p>
      <p class="TODO">
          @@TODO The following templates should be completed and submitted to link-relations@ietf.org:
      </p>
      <div id="registration-template-for-link-relation---provenance" class="section">
        <h3><span class="secno">7.1 </span>Registration template for link relation: "provenance"</h3>
        <p>
          </p><dl>
            <dt>Relation Name:</dt>
            <dd>
              <code>provenance</code>
            </dd>
            <dt>Description:</dt>
            <dd>
              the resource identified by target IRI of the link provides provenance information about the entity identified by the context link
            </dd>
            <dt>Reference:</dt>
            <dd>
              @@this spec, @@provenance-model-spec
            </dd>
            <dt>Notes:</dt>
            <dd>
              ...
            </dd>
            <dt>Application Data:</dt>
            <dd>
              ...
            </dd>
          </dl>
        <p></p>
      </div>
      <div id="registration-template-for-link-relation---anchor" class="section">
        <h3><span class="secno">7.2 </span>Registration template for link relation: "anchor"</h3>
        <p class="pending">
          The name "anchor" has been used for the link relation name, despite the corresponding URI being described as an entity-URI.  This terminology has been chosen to align with usage in the description of the HTTP <code>Link</code> header field, per <a href="http://tools.ietf.org/html/rfc5988#section-5.2">RFC 5988</a>.
        </p>
        <p>
          </p><dl>
            <dt>Relation Name:</dt>
            <dd>
              <code>anchor</code>
            </dd>
            <dt>Description:</dt>
            <dd>
              when used in conjunction with a "provenance" link, the resource identified by target IRI of the link is an entity for which provenance information may be provided.  This may be used, for example, to isolate relevant information from a referenced document that contains provenance information for several entities.
            </dd>
            <dt>Reference:</dt>
            <dd>
              @@this spec, @@provenance-model-spec
            </dd>
            <dt>Notes:</dt>
            <dd>
              ...
            </dd>
            <dt>Application Data:</dt>
            <dd>
              ...
            </dd>
          </dl>
        <p></p>
      </div>
      <div id="registration-template-for-link-relation---provenance-service" class="section">
        <h3><span class="secno">7.3 </span>Registration template for link relation: "provenance-service"</h3>
        <p>
          </p><dl>
            <dt>Relation Name:</dt>
            <dd>
              <code>provenance-service</code>
            </dd>
            <dt>Description:</dt>
            <dd>
              the resource identified by target URI of the link is an provenance service per <a href="#provenance-services" class="sectionRef">section 4. Provenance services</a> of this specification.
            </dd>
            <dt>Reference:</dt>
            <dd>
              @@this spec, @@provenance-model-spec
            </dd>
            <dt>Notes:</dt>
            <dd>
              ...
            </dd>
            <dt>Application Data:</dt>
            <dd>
              ...
            </dd>
          </dl>
        <p></p>
      </div>
    </div>
 
<!-- ===================================================================================== -->

    <div id="security-considerations" class="section">
      <!--OddPage--><h2><span class="secno">8. </span>Security considerations</h2>
      <p>
        Provenance is central to establishing trust in data. If provenance information is corrupted, it may lead agents (human or software) to draw inappropriate and possibly harmful conclusions.  Therefore, care is needed to ensure that the integrity of provenance data is maintained.
      </p>
      <p>
        When using HTTP to access provenance information, or to determine a provenance URI, secure HTTP (https) <em class="rfc2119" title="should">should</em> be used.
      </p>
      <p>
        When retrieving a provenance URI from a document, steps <em class="rfc2119" title="should">should</em> be taken to ensure the document itself is an accurate copy of the original whose author is being trusted (e.g. signature checking, or verifying its checksum against an author-provided secure web service).
      </p>
      <p class="TODO">
        @@TODO ... privacy, access control to provenance (note to self: discussed in Edinburgh linked data provenance workshop).  In particular, note that the fact that a resource is openly accessible does not mean that its provenance information should also be.
      </p>
    </div>
 
<!-- ===================================================================================== -->
    
    <div class="appendix section" id="acknowledgements">
      <!--OddPage--><h2><span class="secno">A. </span>Acknowledgements</h2>
      <p>
        The editors acknowledge the contribution and review from members of the provenance working group.
      </p>
      <p>
        Many thanks to Robin Berjon for making our lives so much easier with his cool <a href="http://dev.w3.org/2009/dap/ReSpec.js/documentation.html">ReSpec</a> tool.
      </p>
    </div>
 
<!-- ===================================================================================== -->

    <div class="appendix section" id="provenance-service-format-examples">
      <!--OddPage--><h2><span class="secno">B. </span>Provenance service format examples</h2>
      <p>
        In <a href="#provenance-services" class="sectionRef">section 4. Provenance services</a>, the provenance service description was represented as a JSON-formatted document.  As noted, HTTP content negotiation <em class="rfc2119" title="may">may</em> be enabled to retrieve the document in alternative formats.  This appendix provides examples of service description document represented using RDF Turtle and XML syntaxes, and XML. 
      </p>

      <div id="rdf-turtle-example-of-service-description" class="section">
        <h3><span class="secno">B.1 </span>RDF Turtle example of service description</h3>
        <p>
          This example uses the RDF Turtle format [<cite><a class="bibref" rel="biblioentry" href="#bib-TURTLE">TURTLE</a></cite>], presented as MIME content-type <code>text/turtle</code>.
        </p>
        <pre class="example code">@prefix provds: &lt;@@TBD@@#&gt; .
&lt;http://example.org/provenance_service/&gt; a provds:Service_description ;
  provds:provenance_locations_template       "http://example.org/provenance_service/locations/?uri={uri}" ;
  provds:provenance_content_template     "http://example.org/provenance_service/provenance/?uri={uri}"
  .</pre>
        <p class="note">
          The provenance URI templates are encoded in RDF as plain string literals, <em>not</em> as resource URIs.
        </p>
        <p class="TODO">
          Finalize URIs in the above example.
        </p>
      </div>

      <div id="rdf-xml-example-of-service-description" class="section">
        <h3><span class="secno">B.2 </span>RDF/XML example of service description</h3>
        <p>This is essentially the same as the Turtle example above, but encoded in RDF/XML [<cite><a class="bibref" rel="biblioentry" href="#bib-RDF-SYNTAX-GRAMMAR">RDF-SYNTAX-GRAMMAR</a></cite>], and presented as MIME content-type <code>application/xml+rdf</code>.</p>
        <pre class="example code">&lt;rdf:RDF
  xmlns:rdf    = "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:rdfs   = "http://www.w3.org/2000/01/rdf-schema#"
  xmlns:provds = "@@TBD@@#"
&gt;
  &lt;provds:Service_description rdf:about="http://example.org/provenance_service/"&gt;
   example.org &lt;provds:provenance_locations_template&gt;http://example.org/provenance_service/locations/?uri={uri}&lt;/provds:location_template&gt; ;
    &lt;provds:provenance_content_template&gt;http://example.org/provenance_service/provenance/?uri={uri}&lt;/provds:provenance_template&gt; ;
  &lt;/provds:Service_description&gt;
&lt;/rdf:RDF&gt;</pre>
        <p class="TODO">
          Finalize URIs in the above example.
        </p>
      </div>

      <div id="plain-xml-example-of-service-description" class="section">
        <h3><span class="secno">B.3 </span>Plain XML example of service description</h3>
        <p class="TODO">
          @@TODO: provide example and schema
        </p>
      </div>

      <div id="rdf-turtle-example-of-provenance-locations" class="section">
        <h3><span class="secno">B.4 </span>RDF Turtle example of provenance locations</h3>
        <p>
          This example uses the RDF Turtle format [<cite><a class="bibref" rel="biblioentry" href="#bib-TURTLE">TURTLE</a></cite>], presented as MIME content type <code>text/turtle</code>.
        </p>
        <pre class="example code">@prefix prov: &lt;@@TBD@@#&gt; .
&lt;http://example.org/qdata/&gt; a prov:Entity ;
  prov:hasProvenance  &lt;http://source1.example.org/provenance/qdata/&gt; ;
  prov:hasProvenance  &lt;http://source2.example.org/prov/qdata/&gt; ;
  prov:hasProvenance  &lt;http://source3.example.com/prov?id=qdata&gt;
  .</pre>
        <p class="issue">
          NOTE: The namespace URI used here for the provenance properties is different from that used in the service description.  I am anticipating that it will be defined as part of the provenance model.  If it is not defined as part of the provenance model, then a property name should be allocated in the provenance discovery service namespace.
        </p>
        <p class="TODO">@@TODO: revise to conform with Provenance Model vocabulary; review URIs</p>
      </div>

      <div id="rdf-xml-example-of-provenance-locations" class="section">
        <h3><span class="secno">B.5 </span>RDF/XML example of provenance locations</h3>
        <p>
          This is essentially the same as the Turtle example above, but encoded in RDF/XML [<cite><a class="bibref" rel="biblioentry" href="#bib-RDF-SYNTAX-GRAMMAR">RDF-SYNTAX-GRAMMAR</a></cite>], and presented with MIME content type <code>application/rdf+xml</code>.
        </p>
        <pre class="example code">&lt;rdf:RDF
  xmlns:rdf    = "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:rdfs   = "http://www.w3.org/2000/01/rdf-schema#"
  xmlns:prov   = "@@TBD@@#"
&gt;
  &lt;prov:Entity rdf:about="http://example.org/qdata/"&gt;
    &lt;prov:hasProvenance  rdf:resource="http://source1.example.org/provenance/qdata/" /&gt; ;
    &lt;prov:hasProvenance  rdf:resource="http://source2.example.org/prov/qdata/" /&gt; ;
    &lt;prov:hasProvenance  rdf:resource="http://source3.example.com/prov?id=qdata" /&gt; ;
  &lt;/prov:Entity&gt;
&lt;/rdf:RDF&gt;</pre>
        <p class="issue">@@TODO: revise to conform with Provenance Model vocabulary</p>
      </div>

      <div id="plain-xml-example-of-provenance-locations" class="section">
        <h3><span class="secno">B.6 </span>Plain XML example of provenance locations</h3>
        <p class="TODO">
          @@TODO: provide example and schema
        </p>
      </div>

    </div>

<!-- ===================================================================================== -->

<!--
    <section class="appendix">
      <h2>Motivating scenario</h2>
      <p class="pending">
        I propose to replace this appendix with text based on Yogesh's walk-through of the scenario, renaming to be something like "Motivating scenario and examples"
      </p>
      <p><a href="http://www.w3.org/2011/prov/wiki/ProvenanceAccessScenario">This scenario</a> was selected by the provenance working group as a touchstone for evaluating any provenance access proposal.  This appendix evaluates the foregoing proposals against the requirements implied by that scenario.</p>
      <p>
        <ul>
          <li>Obtaining the document D: for the purpose of this analysis, it is assumed that the access to the document is either from a known Web URI, or the document is available as HTML or RDF (the primary web standards for documents and data).  The mechanisms here are in principle applicable to other document forms of a per-format basis.
            <ul>
              <li>D1, D2: use the HTTP <code>Link:</code> header.  Any server providing the document may provide this information. Different servers might offer links to different provenance sources.</li>
              <li>D3: information provided as an image with a known URI, but from a non-provenance-aware source.  The image URI can be used as a key to access a third party provenance discovery service.
              <li>D4, D6, D7, D8: information provided as an image, without a known web location.  At the very least, some mechanism, not specified here, is needed to identify the image provided.  In the case of an email attachment, it is possible (but not guaranteed) that the email message MIME wrapper specifies a URI for the image, which can be used as a key.  Some image formats support embedded metadata which might be used for this purpose.  <em>(Arbitrary data files could be wrapped in a package, say MIME multipart/related [[RFC2387]], that could include additional metadata.  Image files could be wrapped in a minimal HTML document.  It is not clear to me at this stage that a single mechanism is appropriate for all situations)</em>.</li>
              <li>D5: HTML email.  Depending on how the HTML is constructed, the HTML header could include <code>&lt;link&gt;</code> elements.</li>
            </ul>
          </li>
          <li>Lacking identification or in-band metadata, some independent identification of the thing represented by an available mechanism is required.  <em>I think this is unavoidable</em></li>
          <li>Enacting the "Oh yeah?" feature
            <ul>
              <li>W: once a URI for provenance information has been determined, accessing it using a web browser or other web client software should be straightforward.  If the provenance is accessible via a third party query service, that may be less straightforward.</li>
              <li>E: this scenario seems to envisage a wholesale overhaul of email client software, which seems unlikely.  If a URI for provenance can be provided, the natural way to access it would be via a web client of some kind, which might be a browser or other software.</li>
              <li>S: this scenario effectively calls for this:  given an arbitrary data resource, implement a general purpose application to discover, retrieve and analyze provenance about that resource.  At the present time, this is a matter for experimental development, which could be based substantially on the mechanisms described for provenance discovery and access via third party services.</li>
            </ul>
          </li>
          <li>I: Accessing the provenance
            <ul>
              <li>W: a web client needs one or more URIs for provenance information, and/or URI(s) for a provenance query service and sufficient additional information about the resource to formulate an effective query.  They may also need access information that can be used to assess (or help a user assess) the trustworthiness of provenance of information obtained, (which could be more provenance information)</li>
              <li>E: an email client is a passive receiver of information, so asking one to retrieve provenance information is a perverse expectation.  There have been some attempts to standardize email protocols that interact with the email sender but such mechanisms have not been significantly deployed in practice. This case can be viewed as a variation on the shell-client case (S) below.  If all provenance information is sent <em>with</em> the original content using standard email mechanisms (MIME multipart, etc.) then the email client may use that (or hand it off to a helper application) as the basis for provenance-based analysis or presentation.</li>
              <li>S: command shell or other local application.  This is the general case for provenance access.  Given some arbitrary information, what does a provenance-aware application need to access the required provenance information?  It may employ any of the mechanisms described above.</li>
            </ul>
          </li>
        </ul>
      </p>
      <section>
        <h2>Gap analysis</h2>
        <p>
          There are clearly a number of capabilities needed for a provenance-aware application that are not covered by the mechanisms described above.  But most of these amount to implementation details and decisions for a particular application, and as such are beyond the scope of this document to specify.
        </p>
        <p>
          One feature not covered above that might be a candidate for specification is a common format for a data package that combines original content along with provenance-related metadata or data.  At this stage, it is not clear what format that might take, but some possible candidates are discussed in <a href="#arbitrary-data" class="sectionRef"></a>.
          In any case, it seems to me that a specification that is specific for provenance to the exclusion of other metadata is unlikely to obtain traction, as provenance is just part of a wider landscape of information quality, trust, preservation and more.
        </p>
      </section>
    </section>

-->

  

<div id="references" class="appendix section"><!--OddPage--><h2><span class="secno">C. </span>References</h2><div id="normative-references" class="section"><h3><span class="secno">C.1 </span>Normative references</h3><p>No normative references.</p></div><div id="informative-references" class="section"><h3><span class="secno">C.2 </span>Informative references</h3><dl class="bibliography"><dt id="bib-FABIO">[FABIO]</dt><dd>D. Shotton; S. Peroni. <a href="http://speroni.web.cs.unibo.it/cgi-bin/lode/req.py?req=http:/purl.org/spar/fabio#namespacedeclarations"><cite>FaBiO, the FRBR-aligned Bibliographic Ontology.</cite></a> June 2011. URL: <a href="http://speroni.web.cs.unibo.it/cgi-bin/lode/req.py?req=http:/purl.org/spar/fabio#namespacedeclarations">http://speroni.web.cs.unibo.it/cgi-bin/lode/req.py?req=http:/purl.org/spar/fabio#namespacedeclarations</a>
</dd><dt id="bib-LINK-REL">[LINK-REL]</dt><dd>M. Nottingham, <a href="http://www.ietf.org/rfc/rfc5988.txt"><cite>Web Linking</cite></a>, October 2010, Internet RFC 5988. URL: <a href="http://www.ietf.org/rfc/rfc5988.txt">http://www.ietf.org/rfc/rfc5988.txt</a>
</dd><dt id="bib-POWDER-DR">[POWDER-DR]</dt><dd>Kevin Smith; Phil Archer; Andrea Perego. <a href="http://www.w3.org/TR/2008/WD-powder-dr-20081114"><cite>Protocol for Web Description Resources (POWDER): Description Resources.</cite></a> 14 November 2008. W3C Working Draft. (Work in progress.) URL: <a href="http://www.w3.org/TR/2008/WD-powder-dr-20081114">http://www.w3.org/TR/2008/WD-powder-dr-20081114</a> 
</dd><dt id="bib-PRISM">[PRISM]</dt><dd>International Digital Enterprise Alliance, Inc. <a href="http://www.prismstandard.org/specifications/2.0/PRISM_prism_namespace_2.0.pdf"><cite>PRISM: Publishing Requirements for Industry Standard Metadata</cite></a>. February 2008. URL: <a href="http://www.prismstandard.org/specifications/2.0/PRISM_prism_namespace_2.0.pdf">http://www.prismstandard.org/specifications/2.0/PRISM_prism_namespace_2.0.pdf</a>
</dd><dt id="bib-PROV-DM">[PROV-DM]</dt><dd>L. Moreau; P. Missier. <a href="http://www.w3.org/TR/prov-dm/"><cite>The PROV Data Model and Abstract Syntax Notation</cite></a>. 2011, Work in progress. URL: <a href="http://www.w3.org/TR/prov-dm/">http://www.w3.org/TR/prov-dm/</a>
</dd><dt id="bib-PROV-O">[PROV-O]</dt><dd>S. Sahoo; D. McGuinness. <a href="http://dvcs.w3.org/hg/prov/raw-file/default/ontology/ProvenanceFormalModel.html"><cite>PROV Ontology Model</cite></a>. 2011, Work in progress. URL: <a href="http://dvcs.w3.org/hg/prov/raw-file/default/ontology/ProvenanceFormalModel.html/">http://dvcs.w3.org/hg/prov/raw-file/default/ontology/ProvenanceFormalModel.html</a>
</dd><dt id="bib-RDF-SPARQL-PROTOCOL">[RDF-SPARQL-PROTOCOL]</dt><dd>Lee Feigenbaum; Kendall Grant Clark; Elias Torres. <a href="http://www.w3.org/TR/2008/REC-rdf-sparql-protocol-20080115"><cite>SPARQL Protocol for RDF.</cite></a> 15 January 2008. W3C Recommendation. URL: <a href="http://www.w3.org/TR/2008/REC-rdf-sparql-protocol-20080115">http://www.w3.org/TR/2008/REC-rdf-sparql-protocol-20080115</a> 
</dd><dt id="bib-RDF-SPARQL-QUERY">[RDF-SPARQL-QUERY]</dt><dd>Andy Seaborne; Eric Prud'hommeaux. <a href="http://www.w3.org/TR/2008/REC-rdf-sparql-query-20080115"><cite>SPARQL Query Language for RDF.</cite></a> 15 January 2008. W3C Recommendation. URL: <a href="http://www.w3.org/TR/2008/REC-rdf-sparql-query-20080115">http://www.w3.org/TR/2008/REC-rdf-sparql-query-20080115</a> 
</dd><dt id="bib-RDF-SYNTAX-GRAMMAR">[RDF-SYNTAX-GRAMMAR]</dt><dd>Dave Beckett. <a href="http://www.w3.org/TR/2004/REC-rdf-syntax-grammar-20040210"><cite>RDF/XML Syntax Specification (Revised).</cite></a> 10 February 2004. W3C Recommendation. URL: <a href="http://www.w3.org/TR/2004/REC-rdf-syntax-grammar-20040210">http://www.w3.org/TR/2004/REC-rdf-syntax-grammar-20040210</a> 
</dd><dt id="bib-REST-APIs">[REST-APIs]</dt><dd>R. Fielding. <a href="http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven">REST APIs must be hypertext driven</a>. October 2008 (blog post), URL: <a href="http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven">http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven</a>
</dd><dt id="bib-RFC2387">[RFC2387]</dt><dd>E. Levinson. <a href="http://www.ietf.org/rfc/rfc2387.txt"><cite>The MIME Multipart/Related Content-type.</cite></a> August 1998. Internet RFC 2387. URL: <a href="http://www.ietf.org/rfc/rfc2387.txt">http://www.ietf.org/rfc/rfc2387.txt</a>
</dd><dt id="bib-RFC4627">[RFC4627]</dt><dd>D. Crockford. <a href="http://www.ietf.org/rfc/rfc4627.txt"><cite>The application/json Media Type for JavaScript Object Notation (JSON)</cite></a> July 2006. Internet RFC 4627. URL: <a href="http://www.ietf.org/rfc/rfc4627.txt">http://www.ietf.org/rfc/rfc4627.txt</a>
</dd><dt id="bib-TURTLE">[TURTLE]</dt><dd>David Beckett, Tim Berners-Lee. <a href="http://www.w3.org/TeamSubmission/turtle/"><cite>Turtle: Terse RDF Triple Language.</cite></a> January 2008. W3C Team Submission. URL: <a href="http://www.w3.org/TeamSubmission/turtle/">http://www.w3.org/TeamSubmission/turtle/</a> 
</dd><dt id="bib-URI-template">[URI-template]</dt><dd>J. Gregorio; R. Fielding, ed.; M. Hadley; M. Nottingham. <a href="http://tools.ietf.org/html/draft-gregorio-uritemplate-06"><cite>URI Template</cite></a>. July 2011, Work in progress. URL: <a href="http://tools.ietf.org/html/draft-gregorio-uritemplate-06"><cite>http://tools.ietf.org/html/draft-gregorio-uritemplate-06</cite></a>
</dd><dt id="bib-WEBARCH">[WEBARCH]</dt><dd>Norman Walsh; Ian Jacobs. <a href="http://www.w3.org/TR/2004/REC-webarch-20041215/"><cite>Architecture of the World Wide Web, Volume One.</cite></a> 15 December 2004. W3C Recommendation. URL: <a href="http://www.w3.org/TR/2004/REC-webarch-20041215/">http://www.w3.org/TR/2004/REC-webarch-20041215/</a> 
</dd></dl></div></div></body></html>